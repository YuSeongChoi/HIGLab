<!DOCTYPE html>
<html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>ğŸŒ Network Framework â€” HIG Lab</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
<style>
:root{--bg:#fafafa;--text:#1d1d1f;--text-2:#6e6e73;--accent:#0071e3;--code-bg:#1e1e2e;--border:#d2d2d7}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);color:var(--text);line-height:1.8}
.top-bar{position:sticky;top:0;z-index:100;background:rgba(250,250,250,0.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.top-bar-inner{max-width:800px;margin:0 auto;padding:12px 24px;display:flex;justify-content:space-between}
.top-logo{font-size:16px;font-weight:700;text-decoration:none;color:var(--text)}.top-logo span{color:var(--accent)}
article{max-width:800px;margin:0 auto;padding:48px 24px 120px}
h1{font-size:clamp(28px,5vw,40px);font-weight:900;margin-bottom:16px;letter-spacing:-1px}
h2{font-size:24px;font-weight:800;margin:48px 0 16px}p{margin-bottom:16px}
.subtitle{font-size:18px;color:var(--text-2);margin-bottom:32px}
.code-block{background:var(--code-bg);border-radius:12px;margin:20px 0;overflow:hidden}
.code-header{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.1);font-size:12px;color:#6e6e73;font-weight:600}
pre.code-body{margin:0;padding:16px;font-family:'JetBrains Mono',monospace;font-size:13px;color:#cdd6f4;white-space:pre;overflow-x:auto}
.kw{color:#cba6f7}.type{color:#89b4fa}.str{color:#a6e3a1}.comment{color:#6c7086}
.badge{display:inline-block;padding:4px 12px;border-radius:16px;font-size:13px;font-weight:600;margin:0 4px 8px 0}
.badge.ios{background:#0071e3;color:#fff}.badge.new{background:#34c759;color:#fff}
ul{margin:16px 0 16px 24px}li{margin:8px 0}
.info-box{background:#f5f5f7;border-left:4px solid var(--accent);padding:16px;margin:24px 0;border-radius:8px}
</style></head>
<body>
<div class="top-bar"><div class="top-bar-inner"><a href="../index.html" class="top-logo">HIG <span>Lab</span></a><a href="01-tutorial.en.html" class="lang-toggle" style="font-size:12px;font-weight:600;color:#0071e3;text-decoration:none;padding:4px 10px;border:1.5px solid #0071e3;border-radius:12px;">ğŸŒ EN</a></div></div>
<article>
<h1>ğŸŒ Network Framework</h1>
<p class="subtitle">í˜„ëŒ€ì ì¸ ì €ìˆ˜ì¤€ ë„¤íŠ¸ì›Œí¬ í†µì‹  í”„ë ˆì„ì›Œí¬</p>

<div><span class="badge ios">iOS 12+</span><span class="badge new">TLS 1.3 ì§€ì›</span></div>

<h2>âœ¨ Network Frameworkë€?</h2>
<p>NetworkëŠ” TCP, UDP, TLS, WebSocket ë“±ì˜ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ êµ¬í˜„í•˜ëŠ” í˜„ëŒ€ì ì¸ ì €ìˆ˜ì¤€ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. URLSessionë³´ë‹¤ ë” ì„¸ë°€í•œ ì œì–´ê°€ ê°€ëŠ¥í•˜ë©°, NWConnection, NWListenerë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸/ì„œë²„ í†µì‹ ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Bonjour ì„œë¹„ìŠ¤ ê²€ìƒ‰, IPv6 ì§€ì›, ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ëª¨ë‹ˆí„°ë§ ë“±ì˜ ê³ ê¸‰ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.</p>

<div class="info-box">
<strong>ğŸ’¡ í•µì‹¬ ê¸°ëŠ¥:</strong> TCP/UDP í†µì‹  Â· TLS 1.3 ì•”í˜¸í™” Â· WebSocket ì§€ì› Â· Bonjour ê²€ìƒ‰ Â· ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ëª¨ë‹ˆí„°ë§ Â· IPv4/IPv6 Â· ì»¤ìŠ¤í…€ í”„ë¡œí† ì½œ
</div>

<h2>ğŸ”Œ 1. NWConnection - TCP í´ë¼ì´ì–¸íŠ¸</h2>
<p>TCP ì—°ê²°ì„ ìƒì„±í•˜ê³  ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ìŠµë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">TCPClient.swift â€” TCP í´ë¼ì´ì–¸íŠ¸</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">Network</span>
<span class="kw">import</span> <span class="type">SwiftUI</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">TCPClient</span> {
    <span class="kw">private</span> <span class="kw">var</span> connection: <span class="type">NWConnection</span>?
    <span class="kw">var</span> isConnected = <span class="kw">false</span>
    <span class="kw">var</span> receivedMessages: [<span class="type">String</span>] = []

    <span class="comment">// TCP ì—°ê²° ì‹œì‘</span>
    <span class="kw">func</span> connect(to host: <span class="type">String</span>, port: <span class="type">UInt16</span>) {
        <span class="comment">// í˜¸ìŠ¤íŠ¸ì™€ í¬íŠ¸ ì„¤ì •</span>
        <span class="kw">guard</span> <span class="kw">let</span> endpoint = <span class="type">NWEndpoint</span>.<span class="type">Host</span>(host) <span class="kw">else</span> {
            print(<span class="str">"âŒ ì˜ëª»ëœ í˜¸ìŠ¤íŠ¸"</span>)
            <span class="kw">return</span>
        }

        <span class="kw">let</span> port = <span class="type">NWEndpoint</span>.<span class="type">Port</span>(rawValue: port) ?? <span class="type">NWEndpoint</span>.<span class="type">Port</span>.<span class="str">any</span>

        <span class="comment">// TCP íŒŒë¼ë¯¸í„°</span>
        <span class="kw">let</span> parameters = <span class="type">NWParameters</span>.tcp

        <span class="comment">// TLS í™œì„±í™” (HTTPS)</span>
        parameters.includeTLS = <span class="kw">true</span>

        <span class="comment">// IPv4/IPv6 ìš°ì„ ìˆœìœ„</span>
        parameters.preferNoProxies = <span class="kw">true</span>
        parameters.requiredInterfaceType = .wifi <span class="comment">// .wifi, .cellular, .loopback</span>

        <span class="comment">// ì—°ê²° ìƒì„±</span>
        connection = <span class="type">NWConnection</span>(host: endpoint, port: port, using: parameters)

        <span class="comment">// ìƒíƒœ í•¸ë“¤ëŸ¬</span>
        connection?.stateUpdateHandler = { [<span class="kw">weak self</span>] state <span class="kw">in</span>
            <span class="kw">switch</span> state {
            <span class="kw">case</span> .ready:
                print(<span class="str">"âœ… ì—°ê²° ì„±ê³µ"</span>)
                <span class="kw">self</span>?.isConnected = <span class="kw">true</span>
                <span class="kw">self</span>?.receiveMessage()

            <span class="kw">case</span> .waiting(<span class="kw">let</span> error):
                print(<span class="str">"â³ ì—°ê²° ëŒ€ê¸° ì¤‘: \(error)"</span>)

            <span class="kw">case</span> .failed(<span class="kw">let</span> error):
                print(<span class="str">"âŒ ì—°ê²° ì‹¤íŒ¨: \(error)"</span>)
                <span class="kw">self</span>?.isConnected = <span class="kw">false</span>

            <span class="kw">case</span> .cancelled:
                print(<span class="str">"âŒ ì—°ê²° ì·¨ì†Œë¨"</span>)
                <span class="kw">self</span>?.isConnected = <span class="kw">false</span>

            <span class="kw">default</span>:
                <span class="kw">break</span>
            }
        }

        <span class="comment">// ì—°ê²° ì‹œì‘</span>
        connection?.start(queue: .<span class="type">global</span>(qos: .userInitiated))
        print(<span class="str">"ğŸ”— ì—°ê²° ì‹œë„: \(host):\(port)"</span>)
    }

    <span class="comment">// ë©”ì‹œì§€ ì „ì†¡</span>
    <span class="kw">func</span> sendMessage(<span class="kw">_</span> message: <span class="type">String</span>) {
        <span class="kw">guard</span> <span class="kw">let</span> connection = connection, isConnected <span class="kw">else</span> {
            print(<span class="str">"âš ï¸ ì—°ê²°ë˜ì§€ ì•ŠìŒ"</span>)
            <span class="kw">return</span>
        }

        <span class="kw">guard</span> <span class="kw">let</span> data = message.data(using: .utf8) <span class="kw">else</span> { <span class="kw">return</span> }

        connection.send(
            content: data,
            completion: .contentProcessed { error <span class="kw">in</span>
                <span class="kw">if</span> <span class="kw">let</span> error = error {
                    print(<span class="str">"âŒ ì „ì†¡ ì‹¤íŒ¨: \(error)"</span>)
                } <span class="kw">else</span> {
                    print(<span class="str">"ğŸ“¤ ì „ì†¡ ì™„ë£Œ: \(message)"</span>)
                }
            }
        )
    }

    <span class="comment">// ë©”ì‹œì§€ ìˆ˜ì‹ </span>
    <span class="kw">private</span> <span class="kw">func</span> receiveMessage() {
        connection?.receive(minimumIncompleteLength: <span class="str">1</span>, maximumLength: <span class="str">65536</span>) { [<span class="kw">weak self</span>] data, context, isComplete, error <span class="kw">in</span>
            <span class="kw">if</span> <span class="kw">let</span> error = error {
                print(<span class="str">"âŒ ìˆ˜ì‹  ì—ëŸ¬: \(error)"</span>)
                <span class="kw">return</span>
            }

            <span class="kw">if</span> <span class="kw">let</span> data = data, !data.isEmpty {
                <span class="kw">if</span> <span class="kw">let</span> message = <span class="type">String</span>(data: data, encoding: .utf8) {
                    print(<span class="str">"ğŸ“¥ ìˆ˜ì‹ : \(message)"</span>)
                    <span class="kw">self</span>?.receivedMessages.append(message)
                }
            }

            <span class="comment">// ê³„ì† ìˆ˜ì‹  ëŒ€ê¸°</span>
            <span class="kw">if</span> !isComplete {
                <span class="kw">self</span>?.receiveMessage()
            }
        }
    }

    <span class="comment">// ì—°ê²° ì¢…ë£Œ</span>
    <span class="kw">func</span> disconnect() {
        connection?.cancel()
        connection = <span class="kw">nil</span>
        isConnected = <span class="kw">false</span>
        print(<span class="str">"âŒ ì—°ê²° ì¢…ë£Œ"</span>)
    }
}</pre>
</div>

<h2>ğŸ§ 2. NWListener - TCP ì„œë²„</h2>
<p>TCP ì„œë²„ë¥¼ ë§Œë“¤ì–´ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ì„ ìˆ˜ì‹ í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">TCPServer.swift â€” TCP ì„œë²„</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">Network</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">TCPServer</span> {
    <span class="kw">private</span> <span class="kw">var</span> listener: <span class="type">NWListener</span>?
    <span class="kw">private</span> <span class="kw">var</span> connections: [<span class="type">NWConnection</span>] = []
    <span class="kw">var</span> isListening = <span class="kw">false</span>
    <span class="kw">var</span> port: <span class="type">UInt16</span> = <span class="str">0</span>

    <span class="comment">// ì„œë²„ ì‹œì‘</span>
    <span class="kw">func</span> startServer(on port: <span class="type">UInt16</span>) {
        <span class="kw">do</span> {
            <span class="comment">// TCP íŒŒë¼ë¯¸í„°</span>
            <span class="kw">let</span> parameters = <span class="type">NWParameters</span>.tcp
            parameters.acceptLocalOnly = <span class="kw">true</span> <span class="comment">// ë¡œì»¬ ì—°ê²°ë§Œ í—ˆìš©</span>

            <span class="comment">// ë¦¬ìŠ¤ë„ˆ ìƒì„±</span>
            <span class="kw">let</span> nwPort = <span class="type">NWEndpoint</span>.<span class="type">Port</span>(rawValue: port) ?? <span class="type">NWEndpoint</span>.<span class="type">Port</span>.<span class="str">any</span>
            listener = <span class="kw">try</span> <span class="type">NWListener</span>(using: parameters, on: nwPort)

            <span class="comment">// ìƒíƒœ í•¸ë“¤ëŸ¬</span>
            listener?.stateUpdateHandler = { [<span class="kw">weak self</span>] state <span class="kw">in</span>
                <span class="kw">switch</span> state {
                <span class="kw">case</span> .ready:
                    print(<span class="str">"âœ… ì„œë²„ ì‹œì‘ë¨"</span>)
                    <span class="kw">self</span>?.isListening = <span class="kw">true</span>
                    <span class="kw">if</span> <span class="kw">let</span> port = <span class="kw">self</span>?.listener?.port {
                        <span class="kw">self</span>?.port = port.rawValue
                        print(<span class="str">"  í¬íŠ¸: \(port)"</span>)
                    }

                <span class="kw">case</span> .failed(<span class="kw">let</span> error):
                    print(<span class="str">"âŒ ì„œë²„ ì‹¤íŒ¨: \(error)"</span>)
                    <span class="kw">self</span>?.isListening = <span class="kw">false</span>

                <span class="kw">case</span> .cancelled:
                    print(<span class="str">"âŒ ì„œë²„ ì·¨ì†Œë¨"</span>)
                    <span class="kw">self</span>?.isListening = <span class="kw">false</span>

                <span class="kw">default</span>:
                    <span class="kw">break</span>
                }
            }

            <span class="comment">// ìƒˆ ì—°ê²° í•¸ë“¤ëŸ¬</span>
            listener?.newConnectionHandler = { [<span class="kw">weak self</span>] newConnection <span class="kw">in</span>
                print(<span class="str">"ğŸ”— ìƒˆ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°"</span>)
                <span class="kw">self</span>?.handleConnection(newConnection)
            }

            <span class="comment">// ë¦¬ìŠ¤ë„ˆ ì‹œì‘</span>
            listener?.start(queue: .<span class="type">global</span>(qos: .userInitiated))

        } <span class="kw">catch</span> {
            print(<span class="str">"âŒ ì„œë²„ ì‹œì‘ ì‹¤íŒ¨: \(error)"</span>)
        }
    }

    <span class="comment">// í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì²˜ë¦¬</span>
    <span class="kw">private</span> <span class="kw">func</span> handleConnection(<span class="kw">_</span> connection: <span class="type">NWConnection</span>) {
        connections.append(connection)

        <span class="comment">// ìƒíƒœ í•¸ë“¤ëŸ¬</span>
        connection.stateUpdateHandler = { state <span class="kw">in</span>
            <span class="kw">switch</span> state {
            <span class="kw">case</span> .ready:
                print(<span class="str">"  âœ… í´ë¼ì´ì–¸íŠ¸ ì¤€ë¹„ë¨"</span>)
                <span class="kw">self</span>.receiveMessage(from: connection)

            <span class="kw">case</span> .failed(<span class="kw">let</span> error):
                print(<span class="str">"  âŒ í´ë¼ì´ì–¸íŠ¸ ì‹¤íŒ¨: \(error)"</span>)
                <span class="kw">self</span>.removeConnection(connection)

            <span class="kw">case</span> .cancelled:
                print(<span class="str">"  âŒ í´ë¼ì´ì–¸íŠ¸ ì—°ê²° í•´ì œ"</span>)
                <span class="kw">self</span>.removeConnection(connection)

            <span class="kw">default</span>:
                <span class="kw">break</span>
            }
        }

        connection.start(queue: .<span class="type">global</span>(qos: .userInitiated))
    }

    <span class="comment">// ë©”ì‹œì§€ ìˆ˜ì‹ </span>
    <span class="kw">private</span> <span class="kw">func</span> receiveMessage(from connection: <span class="type">NWConnection</span>) {
        connection.receive(minimumIncompleteLength: <span class="str">1</span>, maximumLength: <span class="str">65536</span>) { data, context, isComplete, error <span class="kw">in</span>
            <span class="kw">if</span> <span class="kw">let</span> error = error {
                print(<span class="str">"  âŒ ìˆ˜ì‹  ì—ëŸ¬: \(error)"</span>)
                <span class="kw">return</span>
            }

            <span class="kw">if</span> <span class="kw">let</span> data = data, !data.isEmpty {
                <span class="kw">if</span> <span class="kw">let</span> message = <span class="type">String</span>(data: data, encoding: .utf8) {
                    print(<span class="str">"  ğŸ“¥ ìˆ˜ì‹ : \(message)"</span>)

                    <span class="comment">// Echo ì‘ë‹µ</span>
                    <span class="kw">let</span> response = <span class="str">"Echo: \(message)"</span>
                    <span class="kw">self</span>.sendMessage(response, to: connection)
                }
            }

            <span class="kw">if</span> !isComplete {
                <span class="kw">self</span>.receiveMessage(from: connection)
            }
        }
    }

    <span class="comment">// ë©”ì‹œì§€ ì „ì†¡</span>
    <span class="kw">private</span> <span class="kw">func</span> sendMessage(<span class="kw">_</span> message: <span class="type">String</span>, to connection: <span class="type">NWConnection</span>) {
        <span class="kw">guard</span> <span class="kw">let</span> data = message.data(using: .utf8) <span class="kw">else</span> { <span class="kw">return</span> }

        connection.send(content: data, completion: .contentProcessed { error <span class="kw">in</span>
            <span class="kw">if</span> <span class="kw">let</span> error = error {
                print(<span class="str">"  âŒ ì „ì†¡ ì‹¤íŒ¨: \(error)"</span>)
            } <span class="kw">else</span> {
                print(<span class="str">"  ğŸ“¤ ì „ì†¡: \(message)"</span>)
            }
        })
    }

    <span class="comment">// ì—°ê²° ì œê±°</span>
    <span class="kw">private</span> <span class="kw">func</span> removeConnection(<span class="kw">_</span> connection: <span class="type">NWConnection</span>) {
        connections.removeAll { $0 === connection }
    }

    <span class="comment">// ì„œë²„ ì¤‘ì§€</span>
    <span class="kw">func</span> stopServer() {
        listener?.cancel()
        listener = <span class="kw">nil</span>

        connections.forEach { $0.cancel() }
        connections.removeAll()

        isListening = <span class="kw">false</span>
        print(<span class="str">"â¹ï¸ ì„œë²„ ì¤‘ì§€"</span>)
    }
}</pre>
</div>

<h2>ğŸ“¡ 3. UDP í†µì‹ </h2>
<p>UDP í”„ë¡œí† ì½œë¡œ ë°ì´í„°ê·¸ë¨ì„ ì£¼ê³ ë°›ìŠµë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">UDPClient.swift â€” UDP í´ë¼ì´ì–¸íŠ¸</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">Network</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">UDPClient</span> {
    <span class="kw">private</span> <span class="kw">var</span> connection: <span class="type">NWConnection</span>?
    <span class="kw">var</span> isConnected = <span class="kw">false</span>

    <span class="comment">// UDP ì—°ê²°</span>
    <span class="kw">func</span> connect(to host: <span class="type">String</span>, port: <span class="type">UInt16</span>) {
        <span class="kw">guard</span> <span class="kw">let</span> endpoint = <span class="type">NWEndpoint</span>.<span class="type">Host</span>(host) <span class="kw">else</span> { <span class="kw">return</span> }
        <span class="kw">let</span> port = <span class="type">NWEndpoint</span>.<span class="type">Port</span>(rawValue: port) ?? <span class="type">NWEndpoint</span>.<span class="type">Port</span>.<span class="str">any</span>

        <span class="comment">// UDP íŒŒë¼ë¯¸í„°</span>
        <span class="kw">let</span> parameters = <span class="type">NWParameters</span>.udp

        connection = <span class="type">NWConnection</span>(host: endpoint, port: port, using: parameters)

        connection?.stateUpdateHandler = { [<span class="kw">weak self</span>] state <span class="kw">in</span>
            <span class="kw">switch</span> state {
            <span class="kw">case</span> .ready:
                print(<span class="str">"âœ… UDP ì¤€ë¹„ë¨"</span>)
                <span class="kw">self</span>?.isConnected = <span class="kw">true</span>

            <span class="kw">case</span> .failed(<span class="kw">let</span> error):
                print(<span class="str">"âŒ UDP ì‹¤íŒ¨: \(error)"</span>)
                <span class="kw">self</span>?.isConnected = <span class="kw">false</span>

            <span class="kw">default</span>:
                <span class="kw">break</span>
            }
        }

        connection?.start(queue: .<span class="type">global</span>(qos: .userInitiated))
        print(<span class="str">"ğŸ“¡ UDP ì—°ê²°: \(host):\(port)"</span>)
    }

    <span class="comment">// ë°ì´í„°ê·¸ë¨ ì „ì†¡</span>
    <span class="kw">func</span> sendDatagram(<span class="kw">_</span> message: <span class="type">String</span>) {
        <span class="kw">guard</span> <span class="kw">let</span> connection = connection, isConnected <span class="kw">else</span> { <span class="kw">return</span> }
        <span class="kw">guard</span> <span class="kw">let</span> data = message.data(using: .utf8) <span class="kw">else</span> { <span class="kw">return</span> }

        connection.send(content: data, completion: .contentProcessed { error <span class="kw">in</span>
            <span class="kw">if</span> <span class="kw">let</span> error = error {
                print(<span class="str">"âŒ UDP ì „ì†¡ ì‹¤íŒ¨: \(error)"</span>)
            } <span class="kw">else</span> {
                print(<span class="str">"ğŸ“¤ UDP ì „ì†¡: \(message)"</span>)
            }
        })
    }

    <span class="comment">// ë°ì´í„°ê·¸ë¨ ìˆ˜ì‹ </span>
    <span class="kw">func</span> receiveDatagram() {
        connection?.receiveMessage { data, context, isComplete, error <span class="kw">in</span>
            <span class="kw">if</span> <span class="kw">let</span> error = error {
                print(<span class="str">"âŒ UDP ìˆ˜ì‹  ì—ëŸ¬: \(error)"</span>)
                <span class="kw">return</span>
            }

            <span class="kw">if</span> <span class="kw">let</span> data = data, <span class="kw">let</span> message = <span class="type">String</span>(data: data, encoding: .utf8) {
                print(<span class="str">"ğŸ“¥ UDP ìˆ˜ì‹ : \(message)"</span>)
            }

            <span class="comment">// ê³„ì† ìˆ˜ì‹ </span>
            <span class="kw">self</span>.receiveDatagram()
        }
    }

    <span class="comment">// ì—°ê²° ì¢…ë£Œ</span>
    <span class="kw">func</span> disconnect() {
        connection?.cancel()
        connection = <span class="kw">nil</span>
        isConnected = <span class="kw">false</span>
    }
}</pre>
</div>

<h2>ğŸ” 4. Bonjour ì„œë¹„ìŠ¤ ê²€ìƒ‰</h2>
<p>ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ì—ì„œ Bonjour ì„œë¹„ìŠ¤ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">BonjourBrowser.swift â€” Bonjour ê²€ìƒ‰</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">Network</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">BonjourBrowser</span> {
    <span class="kw">private</span> <span class="kw">var</span> browser: <span class="type">NWBrowser</span>?
    <span class="kw">var</span> discoveredServices: [<span class="type">NWBrowser</span>.<span class="type">Result</span>] = []
    <span class="kw">var</span> isBrowsing = <span class="kw">false</span>

    <span class="comment">// Bonjour ê²€ìƒ‰ ì‹œì‘</span>
    <span class="kw">func</span> startBrowsing(serviceType: <span class="type">String</span> = <span class="str">"_http._tcp"</span>, domain: <span class="type">String</span> = <span class="str">"local."</span>) {
        <span class="comment">// Browser íŒŒë¼ë¯¸í„°</span>
        <span class="kw">let</span> parameters = <span class="type">NWParameters</span>()
        parameters.includePeerToPeer = <span class="kw">true</span>

        <span class="comment">// Bonjour ì„œë¹„ìŠ¤ íƒ€ì…</span>
        <span class="kw">let</span> bonjourType = <span class="type">NWBrowser</span>.<span class="type">Descriptor</span>.bonjour(type: serviceType, domain: domain)

        <span class="comment">// Browser ìƒì„±</span>
        browser = <span class="type">NWBrowser</span>(for: bonjourType, using: parameters)

        <span class="comment">// ìƒíƒœ í•¸ë“¤ëŸ¬</span>
        browser?.stateUpdateHandler = { [<span class="kw">weak self</span>] state <span class="kw">in</span>
            <span class="kw">switch</span> state {
            <span class="kw">case</span> .ready:
                print(<span class="str">"âœ… Bonjour ê²€ìƒ‰ ì‹œì‘"</span>)
                <span class="kw">self</span>?.isBrowsing = <span class="kw">true</span>

            <span class="kw">case</span> .failed(<span class="kw">let</span> error):
                print(<span class="str">"âŒ ê²€ìƒ‰ ì‹¤íŒ¨: \(error)"</span>)
                <span class="kw">self</span>?.isBrowsing = <span class="kw">false</span>

            <span class="kw">case</span> .cancelled:
                print(<span class="str">"âŒ ê²€ìƒ‰ ì·¨ì†Œë¨"</span>)
                <span class="kw">self</span>?.isBrowsing = <span class="kw">false</span>

            <span class="kw">default</span>:
                <span class="kw">break</span>
            }
        }

        <span class="comment">// ê²€ìƒ‰ ê²°ê³¼ í•¸ë“¤ëŸ¬</span>
        browser?.browseResultsChangedHandler = { [<span class="kw">weak self</span>] results, changes <span class="kw">in</span>
            print(<span class="str">"ğŸ” ì„œë¹„ìŠ¤ ë³€ê²½: \(changes.count)ê°œ"</span>)

            <span class="kw">for</span> change <span class="kw">in</span> changes {
                <span class="kw">switch</span> change {
                <span class="kw">case</span> .added(<span class="kw">let</span> result):
                    print(<span class="str">"  â• ì„œë¹„ìŠ¤ ë°œê²¬: \(result.endpoint)"</span>)
                    <span class="kw">self</span>?.discoveredServices.append(result)

                <span class="kw">case</span> .removed(<span class="kw">let</span> result):
                    print(<span class="str">"  â– ì„œë¹„ìŠ¤ ì‚¬ë¼ì§: \(result.endpoint)"</span>)
                    <span class="kw">self</span>?.discoveredServices.removeAll { $0.endpoint == result.endpoint }

                <span class="kw">case</span> .changed(old: <span class="kw">let</span> old, new: <span class="kw">let</span> new, flags: <span class="kw">_</span>):
                    print(<span class="str">"  ğŸ”„ ì„œë¹„ìŠ¤ ë³€ê²½: \(old.endpoint) -> \(new.endpoint)"</span>)

                <span class="kw">case</span> .identical:
                    <span class="kw">break</span>

                <span class="kw">@unknown</span> <span class="kw">default</span>:
                    <span class="kw">break</span>
                }
            }
        }

        <span class="comment">// ê²€ìƒ‰ ì‹œì‘</span>
        browser?.start(queue: .<span class="type">global</span>(qos: .userInitiated))
    }

    <span class="comment">// ê²€ìƒ‰ ì¤‘ì§€</span>
    <span class="kw">func</span> stopBrowsing() {
        browser?.cancel()
        browser = <span class="kw">nil</span>
        isBrowsing = <span class="kw">false</span>
        discoveredServices.removeAll()
        print(<span class="str">"â¹ï¸ ê²€ìƒ‰ ì¤‘ì§€"</span>)
    }
}</pre>
</div>

<h2>ğŸ“Š 5. ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ëª¨ë‹ˆí„°ë§</h2>
<p>ë„¤íŠ¸ì›Œí¬ ìƒíƒœì™€ ê²½ë¡œ ë³€í™”ë¥¼ ê°ì§€í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">NetworkMonitor.swift â€” ë„¤íŠ¸ì›Œí¬ ëª¨ë‹ˆí„°ë§</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">Network</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">NetworkMonitor</span> {
    <span class="kw">private</span> <span class="kw">let</span> monitor = <span class="type">NWPathMonitor</span>()
    <span class="kw">var</span> isConnected = <span class="kw">false</span>
    <span class="kw">var</span> connectionType: <span class="type">NWInterface</span>.<span class="type">InterfaceType</span>?
    <span class="kw">var</span> isExpensive = <span class="kw">false</span>
    <span class="kw">var</span> isConstrained = <span class="kw">false</span>

    <span class="kw">init</span>() {
        startMonitoring()
    }

    <span class="comment">// ëª¨ë‹ˆí„°ë§ ì‹œì‘</span>
    <span class="kw">func</span> startMonitoring() {
        monitor.pathUpdateHandler = { [<span class="kw">weak self</span>] path <span class="kw">in</span>
            <span class="kw">self</span>?.isConnected = path.status == .satisfied
            <span class="kw">self</span>?.isExpensive = path.isExpensive
            <span class="kw">self</span>?.isConstrained = path.isConstrained

            <span class="comment">// ì—°ê²° íƒ€ì… í™•ì¸</span>
            <span class="kw">if</span> path.usesInterfaceType(.wifi) {
                <span class="kw">self</span>?.connectionType = .wifi
                print(<span class="str">"ğŸ“¡ Wi-Fi ì—°ê²°"</span>)
            } <span class="kw">else</span> <span class="kw">if</span> path.usesInterfaceType(.cellular) {
                <span class="kw">self</span>?.connectionType = .cellular
                print(<span class="str">"ğŸ“± ì…€ë£°ëŸ¬ ì—°ê²°"</span>)
            } <span class="kw">else</span> <span class="kw">if</span> path.usesInterfaceType(.wiredEthernet) {
                <span class="kw">self</span>?.connectionType = .wiredEthernet
                print(<span class="str">"ğŸ”Œ ìœ ì„  ì´ë”ë„· ì—°ê²°"</span>)
            } <span class="kw">else</span> {
                <span class="kw">self</span>?.connectionType = <span class="kw">nil</span>
                print(<span class="str">"âŒ ì—°ê²° ì—†ìŒ"</span>)
            }

            <span class="comment">// ì—°ê²° ìƒíƒœ</span>
            <span class="kw">switch</span> path.status {
            <span class="kw">case</span> .satisfied:
                print(<span class="str">"âœ… ë„¤íŠ¸ì›Œí¬ ì—°ê²°ë¨"</span>)
            <span class="kw">case</span> .unsatisfied:
                print(<span class="str">"âŒ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì•ˆ ë¨"</span>)
            <span class="kw">case</span> .requiresConnection:
                print(<span class="str">"â³ ì—°ê²° í•„ìš”"</span>)
            <span class="kw">@unknown</span> <span class="kw">default</span>:
                <span class="kw">break</span>
            }

            <span class="comment">// ë¹„ìš© ì •ë³´</span>
            <span class="kw">if</span> path.isExpensive {
                print(<span class="str">"ğŸ’° ë¹„ìš©ì´ ë°œìƒí•˜ëŠ” ë„¤íŠ¸ì›Œí¬ (ì…€ë£°ëŸ¬ ë°ì´í„°)"</span>)
            }

            <span class="kw">if</span> path.isConstrained {
                print(<span class="str">"âš ï¸ ì œí•œëœ ë„¤íŠ¸ì›Œí¬ (ì €ì „ë ¥ ëª¨ë“œ)"</span>)
            }

            <span class="comment">// ì‚¬ìš© ê°€ëŠ¥í•œ ì¸í„°í˜ì´ìŠ¤</span>
            print(<span class="str">"  ì‚¬ìš© ê°€ëŠ¥í•œ ì¸í„°í˜ì´ìŠ¤:"</span>)
            <span class="kw">for</span> interface <span class="kw">in</span> path.availableInterfaces {
                print(<span class="str">"    - \(interface.type): \(interface.name)"</span>)
            }
        }

        monitor.start(queue: .<span class="type">global</span>(qos: .userInitiated))
    }

    <span class="comment">// ëª¨ë‹ˆí„°ë§ ì¤‘ì§€</span>
    <span class="kw">func</span> stopMonitoring() {
        monitor.cancel()
    }

    <span class="kw">deinit</span> {
        stopMonitoring()
    }
}</pre>
</div>

<h2>ğŸ“± 6. SwiftUI í†µí•©</h2>
<p>ë„¤íŠ¸ì›Œí¬ ëª¨ë‹ˆí„°ë§ UIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">NetworkMonitorView.swift â€” ë„¤íŠ¸ì›Œí¬ ìƒíƒœ UI</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>

<span class="kw">struct</span> <span class="type">NetworkMonitorView</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> networkMonitor = <span class="type">NetworkMonitor</span>()

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">NavigationStack</span> {
            <span class="type">Form</span> {
                <span class="type">Section</span>(<span class="str">"ì—°ê²° ìƒíƒœ"</span>) {
                    <span class="type">HStack</span> {
                        <span class="type">Circle</span>()
                            .fill(networkMonitor.isConnected ? <span class="type">Color</span>.green : <span class="type">Color</span>.red)
                            .frame(width: <span class="str">16</span>, height: <span class="str">16</span>)

                        <span class="type">Text</span>(networkMonitor.isConnected ? <span class="str">"ì—°ê²°ë¨"</span> : <span class="str">"ì—°ê²° ì•ˆ ë¨"</span>)
                            .font(.headline)
                    }

                    <span class="kw">if</span> <span class="kw">let</span> type = networkMonitor.connectionType {
                        <span class="type">HStack</span> {
                            <span class="type">Text</span>(<span class="str">"ì—°ê²° íƒ€ì…"</span>)
                            <span class="type">Spacer</span>()
                            <span class="type">Text</span>(connectionTypeString(type))
                                .foregroundStyle(.secondary)
                        }
                    }
                }

                <span class="type">Section</span>(<span class="str">"ë„¤íŠ¸ì›Œí¬ íŠ¹ì„±"</span>) {
                    <span class="type">HStack</span> {
                        <span class="type">Image</span>(systemName: networkMonitor.isExpensive ? <span class="str">"checkmark.circle.fill"</span> : <span class="str">"xmark.circle"</span>)
                            .foregroundStyle(networkMonitor.isExpensive ? .orange : .secondary)
                        <span class="type">Text</span>(<span class="str">"ë¹„ìš© ë°œìƒ"</span>)
                        <span class="type">Spacer</span>()
                        <span class="type">Text</span>(networkMonitor.isExpensive ? <span class="str">"ì˜ˆ"</span> : <span class="str">"ì•„ë‹ˆì˜¤"</span>)
                            .foregroundStyle(.secondary)
                    }

                    <span class="type">HStack</span> {
                        <span class="type">Image</span>(systemName: networkMonitor.isConstrained ? <span class="str">"checkmark.circle.fill"</span> : <span class="str">"xmark.circle"</span>)
                            .foregroundStyle(networkMonitor.isConstrained ? .orange : .secondary)
                        <span class="type">Text</span>(<span class="str">"ì œí•œë¨"</span>)
                        <span class="type">Spacer</span>()
                        <span class="type">Text</span>(networkMonitor.isConstrained ? <span class="str">"ì˜ˆ"</span> : <span class="str">"ì•„ë‹ˆì˜¤"</span>)
                            .foregroundStyle(.secondary)
                    }
                }

                <span class="type">Section</span> {
                    <span class="type">Text</span>(<span class="str">"ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤."</span>)
                        .font(.caption)
                        .foregroundStyle(.secondary)
                }
            }
            .navigationTitle(<span class="str">"ë„¤íŠ¸ì›Œí¬ ëª¨ë‹ˆí„°"</span>)
        }
    }

    <span class="kw">private</span> <span class="kw">func</span> connectionTypeString(<span class="kw">_</span> type: <span class="type">NWInterface</span>.<span class="type">InterfaceType</span>) -> <span class="type">String</span> {
        <span class="kw">switch</span> type {
        <span class="kw">case</span> .wifi: <span class="kw">return</span> <span class="str">"Wi-Fi"</span>
        <span class="kw">case</span> .cellular: <span class="kw">return</span> <span class="str">"ì…€ë£°ëŸ¬"</span>
        <span class="kw">case</span> .wiredEthernet: <span class="kw">return</span> <span class="str">"ìœ ì„  ì´ë”ë„·"</span>
        <span class="kw">case</span> .loopback: <span class="kw">return</span> <span class="str">"ë¡œì»¬"</span>
        <span class="kw">case</span> .other: <span class="kw">return</span> <span class="str">"ê¸°íƒ€"</span>
        <span class="kw">@unknown</span> <span class="kw">default</span>: <span class="kw">return</span> <span class="str">"ì•Œ ìˆ˜ ì—†ìŒ"</span>
        }
    }
}</pre>
</div>

<h2>ğŸ’¡ HIG ê°€ì´ë“œë¼ì¸</h2>

<ul>
<li><strong>ê¶Œí•œ ì„¤ì •:</strong> Info.plistì— NSLocalNetworkUsageDescription ì¶”ê°€</li>
<li><strong>Bonjour ì„œë¹„ìŠ¤:</strong> NSBonjourServicesì— ì‚¬ìš©í•  ì„œë¹„ìŠ¤ íƒ€ì… ëª…ì‹œ</li>
<li><strong>TLS ì‚¬ìš©:</strong> ë¯¼ê°í•œ ë°ì´í„° ì „ì†¡ ì‹œ TLS í•„ìˆ˜</li>
<li><strong>ë„¤íŠ¸ì›Œí¬ íš¨ìœ¨:</strong> isExpensive ì²´í¬í•˜ì—¬ ëŒ€ìš©ëŸ‰ ë‹¤ìš´ë¡œë“œ ìµœì í™”</li>
<li><strong>ì—ëŸ¬ ì²˜ë¦¬:</strong> ì—°ê²° ì‹¤íŒ¨, íƒ€ì„ì•„ì›ƒì— ëŒ€í•œ ì ì ˆí•œ ì²˜ë¦¬</li>
</ul>

<h2>ğŸ¯ ì‹¤ì „ í™œìš©</h2>

<ul>
<li><strong>ì‹¤ì‹œê°„ í†µì‹ :</strong> ì±„íŒ…, ê²Œì„ ì„œë²„ ì—°ë™</li>
<li><strong>IoT í†µì‹ :</strong> ìŠ¤ë§ˆíŠ¸ í™ˆ ê¸°ê¸° ì œì–´</li>
<li><strong>ë¡œì»¬ ì„œë²„:</strong> ë””ë²„ê¹…ìš© ë¡œì»¬ ì„œë²„ êµ¬í˜„</li>
<li><strong>ì„œë¹„ìŠ¤ ê²€ìƒ‰:</strong> ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ì˜ í”„ë¦°í„°, ë¯¸ë””ì–´ ì„œë²„ ì°¾ê¸°</li>
<li><strong>P2P í†µì‹ :</strong> ì§ì ‘ì ì¸ ê¸°ê¸° ê°„ í†µì‹ </li>
</ul>

<h2>ğŸ“š ë” ì•Œì•„ë³´ê¸°</h2>

<ul>
<li><a href="https://developer.apple.com/documentation/network">Network Framework ê³µì‹ ë¬¸ì„œ</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2018/715/">WWDC: Network Framework ì„¸ì…˜</a></li>
<li><a href="https://developer.apple.com/design/human-interface-guidelines/networking">HIG: Networking</a></li>
</ul>

<div class="info-box">
<strong>âš¡ï¸ ì„±ëŠ¥ íŒ:</strong> <code>NWConnection</code>ì€ ìë™ìœ¼ë¡œ ìµœì ì˜ ë„¤íŠ¸ì›Œí¬ ê²½ë¡œë¥¼ ì„ íƒí•©ë‹ˆë‹¤. IPv4ì™€ IPv6ë¥¼ ëª¨ë‘ ì§€ì›í•˜ë©°, Wi-Fiì™€ ì…€ë£°ëŸ¬ ì‚¬ì´ë¥¼ ì›í™œí•˜ê²Œ ì „í™˜í•©ë‹ˆë‹¤. UDPëŠ” ì‹ ë¢°ì„±ì´ ë‚®ì§€ë§Œ ë¹ ë¥´ë©°, TCPëŠ” ì‹ ë¢°ì„±ì´ ë†’ì§€ë§Œ ì˜¤ë²„í—¤ë“œê°€ ìˆìŠµë‹ˆë‹¤.
</div>

<div style="margin-top:48px;padding:24px;background:linear-gradient(135deg,#f5f5f7,#e8e8ed);border-radius:16px;">
  <h2 style="font-size:20px;margin-bottom:12px;">ğŸ“ Apple ê³µì‹ ìë£Œ</h2>
  <div style="display:flex;flex-wrap:wrap;gap:12px;">
    <a href="https://developer.apple.com/documentation/network" target="_blank" style="display:inline-flex;align-items:center;gap:6px;padding:10px 16px;background:white;border-radius:10px;text-decoration:none;color:var(--accent);font-weight:600;font-size:14px;border:1px solid var(--border);transition:all .2s;">ğŸ“˜ ê³µì‹ ë¬¸ì„œ</a>
    <a href="https://developer.apple.com/videos/all-videos/?q=Network" target="_blank" style="display:inline-flex;align-items:center;gap:6px;padding:10px 16px;background:white;border-radius:10px;text-decoration:none;color:var(--accent);font-weight:600;font-size:14px;border:1px solid var(--border);transition:all .2s;">ğŸ¬ WWDC ì„¸ì…˜</a>
  </div>
</div>
</article>
</body></html>
