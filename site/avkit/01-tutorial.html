<!DOCTYPE html>
<html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>â–¶ï¸ AVKit â€” HIG Lab</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
<style>
:root{--bg:#fafafa;--text:#1d1d1f;--text-2:#6e6e73;--accent:#0071e3;--code-bg:#1e1e2e;--border:#d2d2d7}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);color:var(--text);line-height:1.8}
.top-bar{position:sticky;top:0;z-index:100;background:rgba(250,250,250,0.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.top-bar-inner{max-width:800px;margin:0 auto;padding:12px 24px;display:flex;justify-content:space-between}
.top-logo{font-size:16px;font-weight:700;text-decoration:none;color:var(--text)}.top-logo span{color:var(--accent)}
article{max-width:800px;margin:0 auto;padding:48px 24px 120px}
h1{font-size:clamp(28px,5vw,40px);font-weight:900;margin-bottom:16px;letter-spacing:-1px}
h2{font-size:24px;font-weight:800;margin:48px 0 16px}p{margin-bottom:16px}
.subtitle{font-size:18px;color:var(--text-2);margin-bottom:32px}
.code-block{background:var(--code-bg);border-radius:12px;margin:20px 0;overflow:hidden}
.code-header{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.1);font-size:12px;color:#6e6e73;font-weight:600}
pre.code-body{margin:0;padding:16px;font-family:'JetBrains Mono',monospace;font-size:13px;color:#cdd6f4;white-space:pre;overflow-x:auto}
.kw{color:#cba6f7}.type{color:#89b4fa}.str{color:#a6e3a1}.comment{color:#6c7086}
.badge{display:inline-block;padding:4px 12px;border-radius:16px;font-size:13px;font-weight:600;margin:0 4px 8px 0}
.badge.ios{background:#0071e3;color:#fff}.badge.new{background:#34c759;color:#fff}
ul{margin:16px 0 16px 24px}li{margin:8px 0}
.info-box{background:#f5f5f7;border-left:4px solid var(--accent);padding:16px;margin:24px 0;border-radius:8px}
</style></head>
<body>
<div class="top-bar"><div class="top-bar-inner"><a href="../index.html" class="top-logo">HIG <span>Lab</span></a><a href="01-tutorial.en.html" class="lang-toggle" style="font-size:12px;font-weight:600;color:#0071e3;text-decoration:none;padding:4px 10px;border:1.5px solid #0071e3;border-radius:12px;">ğŸŒ EN</a></div></div>
<article>
<h1>â–¶ï¸ AVKit</h1>
<p class="subtitle">ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ UIì™€ ì»¨íŠ¸ë¡¤ì„ ìœ„í•œ ê³ ê¸‰ í”„ë ˆì„ì›Œí¬</p>

<div><span class="badge ios">iOS 8+</span><span class="badge new">SwiftUI ì§€ì›</span></div>

<h2>âœ¨ AVKitì´ë€?</h2>
<p>AVKitì€ ë¹„ë””ì˜¤ ì¬ìƒì„ ìœ„í•œ ì™„ì „í•œ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. AVFoundation ìœ„ì— êµ¬ì¶•ë˜ì–´ ì¬ìƒ ì»¨íŠ¸ë¡¤, Picture-in-Picture, AirPlay, ìë§‰, ì±•í„° ë„¤ë¹„ê²Œì´ì…˜ ë“± í”„ë¡œí˜ì…”ë„í•œ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ê¸°ëŠ¥ì„ ì†ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. UIKitì˜ AVPlayerViewControllerì™€ SwiftUIì˜ VideoPlayerë¥¼ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.</p>

<div class="info-box">
<strong>ğŸ’¡ í•µì‹¬ ê¸°ëŠ¥:</strong> ì¬ìƒ ì»¨íŠ¸ë¡¤ Â· Picture-in-Picture Â· AirPlay Â· ìë§‰ Â· ì±•í„° Â· ì†ë„ ì¡°ì ˆ Â· ì „ì²´í™”ë©´ Â· ì œìŠ¤ì²˜ Â· ì‹œìŠ¤í…œ í†µí•©
</div>

<h2>ğŸ¬ 1. ê¸°ë³¸ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ (SwiftUI)</h2>
<p>SwiftUIì˜ VideoPlayerë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ ë¹„ë””ì˜¤ë¥¼ ì¬ìƒí•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">VideoPlayerView.swift â€” SwiftUI ë¹„ë””ì˜¤ í”Œë ˆì´ì–´</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">AVKit</span>

<span class="kw">struct</span> <span class="type">SimpleVideoPlayer</span>: <span class="type">View</span> {
    <span class="kw">let</span> url: <span class="type">URL</span>

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VideoPlayer</span>(player: <span class="type">AVPlayer</span>(url: url))
            .frame(height: <span class="str">300</span>)
    }
}

<span class="comment">// ì‚¬ìš© ì˜ˆì œ</span>
<span class="kw">struct</span> <span class="type">ContentView</span>: <span class="type">View</span> {
    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="kw">if</span> <span class="kw">let</span> url = <span class="type">URL</span>(string: <span class="str">"https://example.com/video.mp4"</span>) {
                <span class="type">SimpleVideoPlayer</span>(url: url)
            }
        }
    }
}

<span class="comment">// ì»¤ìŠ¤í…€ ì»¨íŠ¸ë¡¤ì´ ìˆëŠ” VideoPlayer</span>
<span class="kw">struct</span> <span class="type">VideoPlayerWithOverlay</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> player: <span class="type">AVPlayer</span>
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> isPlaying = <span class="kw">false</span>

    <span class="kw">init</span>(url: <span class="type">URL</span>) {
        _player = <span class="type">State</span>(initialValue: <span class="type">AVPlayer</span>(url: url))
    }

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VideoPlayer</span>(player: player) {
            <span class="comment">// ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´</span>
            <span class="type">VStack</span> {
                <span class="type">Text</span>(<span class="str">"ë‚˜ë§Œì˜ ë¹„ë””ì˜¤"</span>)
                    .font(.title)
                    .foregroundStyle(.white)
                    .padding()

                <span class="type">Spacer</span>()

                <span class="type">HStack</span> {
                    <span class="type">Button</span> {
                        <span class="kw">if</span> isPlaying {
                            player.pause()
                        } <span class="kw">else</span> {
                            player.play()
                        }
                        isPlaying.toggle()
                    } label: {
                        <span class="type">Image</span>(systemName: isPlaying ? <span class="str">"pause.fill"</span> : <span class="str">"play.fill"</span>)
                            .font(.largeTitle)
                            .foregroundStyle(.white)
                    }
                }
                .padding()
            }
        }
        .frame(height: <span class="str">300</span>)
    }
}</pre>
</div>

<h2>ğŸ“± 2. AVPlayerViewController (UIKit)</h2>
<p>UIKitì—ì„œ AVPlayerViewControllerë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ê¸°ëŠ¥ì„ ê°–ì¶˜ í”Œë ˆì´ì–´ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">PlayerViewController.swift â€” UIKit í”Œë ˆì´ì–´</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">AVKit</span>

<span class="kw">struct</span> <span class="type">PlayerView</span>: <span class="type">UIViewControllerRepresentable</span> {
    <span class="kw">let</span> player: <span class="type">AVPlayer</span>

    <span class="kw">func</span> makeUIViewController(context: <span class="type">Context</span>) -> <span class="type">AVPlayerViewController</span> {
        <span class="kw">let</span> controller = <span class="type">AVPlayerViewController</span>()
        controller.player = player

        <span class="comment">// ì¬ìƒ ì»¨íŠ¸ë¡¤ ì„¤ì •</span>
        controller.showsPlaybackControls = <span class="kw">true</span>

        <span class="comment">// Picture-in-Picture í—ˆìš©</span>
        controller.allowsPictureInPicturePlayback = <span class="kw">true</span>

        <span class="comment">// ë¹„ë””ì˜¤ ì¤‘ë ¥ ì„¤ì •</span>
        controller.videoGravity = .resizeAspect

        <span class="comment">// ìë§‰ í‘œì‹œ</span>
        controller.canStartPictureInPictureAutomaticallyFromInline = <span class="kw">true</span>

        <span class="kw">return</span> controller
    }

    <span class="kw">func</span> updateUIViewController(<span class="kw">_</span> uiViewController: <span class="type">AVPlayerViewController</span>, context: <span class="type">Context</span>) {}
}

<span class="comment">// ì‚¬ìš© ì˜ˆì œ</span>
<span class="kw">struct</span> <span class="type">VideoPlayerScreen</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> player: <span class="type">AVPlayer</span>?

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="kw">if</span> <span class="kw">let</span> player = player {
                <span class="type">PlayerView</span>(player: player)
                    .frame(height: <span class="str">300</span>)
            } <span class="kw">else</span> {
                <span class="type">ProgressView</span>()
            }
        }
        .onAppear {
            loadVideo()
        }
    }

    <span class="kw">func</span> loadVideo() {
        <span class="kw">guard</span> <span class="kw">let</span> url = <span class="type">URL</span>(string: <span class="str">"https://example.com/video.mp4"</span>) <span class="kw">else</span> { <span class="kw">return</span> }
        player = <span class="type">AVPlayer</span>(url: url)
    }
}</pre>
</div>

<h2>ğŸ“º 3. Picture-in-Picture</h2>
<p>Picture-in-Picture ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì—¬ ë¹„ë””ì˜¤ë¥¼ ë– ìˆëŠ” ì°½ì—ì„œ ì¬ìƒí•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">PiPPlayerView.swift â€” Picture-in-Picture</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">AVKit</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">PiPManager</span>: <span class="type">NSObject</span> {
    <span class="kw">var</span> pipController: <span class="type">AVPictureInPictureController</span>?
    <span class="kw">var</span> isPiPActive = <span class="kw">false</span>
    <span class="kw">var</span> isPiPSupported = <span class="kw">false</span>

    <span class="kw">func</span> setupPiP(with playerLayer: <span class="type">AVPlayerLayer</span>) {
        <span class="comment">// PiP ì§€ì› í™•ì¸</span>
        isPiPSupported = <span class="type">AVPictureInPictureController</span>.isPictureInPictureSupported()

        <span class="kw">guard</span> isPiPSupported <span class="kw">else</span> { <span class="kw">return</span> }

        <span class="comment">// PiP ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±</span>
        pipController = <span class="type">AVPictureInPictureController</span>(playerLayer: playerLayer)
        pipController?.delegate = <span class="kw">self</span>

        <span class="comment">// ì˜¤ë””ì˜¤ ì„¸ì…˜ ì„¤ì •</span>
        <span class="kw">try</span>? <span class="type">AVAudioSession</span>.sharedInstance().setCategory(.playback, mode: .moviePlayback)
        <span class="kw">try</span>? <span class="type">AVAudioSession</span>.sharedInstance().setActive(<span class="kw">true</span>)
    }

    <span class="kw">func</span> startPiP() {
        pipController?.startPictureInPicture()
    }

    <span class="kw">func</span> stopPiP() {
        pipController?.stopPictureInPicture()
    }
}

<span class="kw">extension</span> <span class="type">PiPManager</span>: <span class="type">AVPictureInPictureControllerDelegate</span> {
    <span class="kw">func</span> pictureInPictureControllerWillStartPictureInPicture(<span class="kw">_</span> pictureInPictureController: <span class="type">AVPictureInPictureController</span>) {
        isPiPActive = <span class="kw">true</span>
    }

    <span class="kw">func</span> pictureInPictureControllerDidStopPictureInPicture(<span class="kw">_</span> pictureInPictureController: <span class="type">AVPictureInPictureController</span>) {
        isPiPActive = <span class="kw">false</span>
    }

    <span class="kw">func</span> pictureInPictureController(
        <span class="kw">_</span> pictureInPictureController: <span class="type">AVPictureInPictureController</span>,
        failedToStartPictureInPictureWithError error: <span class="type">Error</span>
    ) {
        print(<span class="str">"PiP ì‹œì‘ ì‹¤íŒ¨: \(error.localizedDescription)"</span>)
    }
}

<span class="kw">struct</span> <span class="type">PiPPlayerView</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> player: <span class="type">AVPlayer</span>
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> pipManager = <span class="type">PiPManager</span>()

    <span class="kw">init</span>(url: <span class="type">URL</span>) {
        _player = <span class="type">State</span>(initialValue: <span class="type">AVPlayer</span>(url: url))
    }

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="type">PiPVideoView</span>(player: player, pipManager: pipManager)
                .frame(height: <span class="str">300</span>)

            <span class="type">Button</span> {
                <span class="kw">if</span> pipManager.isPiPActive {
                    pipManager.stopPiP()
                } <span class="kw">else</span> {
                    pipManager.startPiP()
                }
            } label: {
                <span class="type">Label</span>(
                    pipManager.isPiPActive ? <span class="str">"PiP ì¢…ë£Œ"</span> : <span class="str">"PiP ì‹œì‘"</span>,
                    systemImage: <span class="str">"pip"</span>
                )
            }
            .disabled(!pipManager.isPiPSupported)
            .buttonStyle(.borderedProminent)
            .padding()
        }
    }
}

<span class="kw">struct</span> <span class="type">PiPVideoView</span>: <span class="type">UIViewRepresentable</span> {
    <span class="kw">let</span> player: <span class="type">AVPlayer</span>
    <span class="kw">let</span> pipManager: <span class="type">PiPManager</span>

    <span class="kw">func</span> makeUIView(context: <span class="type">Context</span>) -> <span class="type">UIView</span> {
        <span class="kw">let</span> view = <span class="type">UIView</span>()
        <span class="kw">let</span> playerLayer = <span class="type">AVPlayerLayer</span>(player: player)
        playerLayer.videoGravity = .resizeAspect
        view.layer.addSublayer(playerLayer)

        <span class="comment">// PiP ì„¤ì •</span>
        pipManager.setupPiP(with: playerLayer)

        <span class="type">DispatchQueue</span>.main.async {
            playerLayer.frame = view.bounds
        }

        <span class="kw">return</span> view
    }

    <span class="kw">func</span> updateUIView(<span class="kw">_</span> uiView: <span class="type">UIView</span>, context: <span class="type">Context</span>) {
        <span class="kw">if</span> <span class="kw">let</span> layer = uiView.layer.sublayers?.first <span class="kw">as</span>? <span class="type">AVPlayerLayer</span> {
            layer.frame = uiView.bounds
        }
    }
}</pre>
</div>

<h2>ğŸ“¡ 4. AirPlay</h2>
<p>AirPlayë¥¼ í†µí•´ ë‹¤ë¥¸ ê¸°ê¸°ë¡œ ë¹„ë””ì˜¤ë¥¼ ìŠ¤íŠ¸ë¦¬ë°í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">AirPlayView.swift â€” AirPlay ì§€ì›</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">AVKit</span>

<span class="kw">struct</span> <span class="type">AirPlayButton</span>: <span class="type">UIViewRepresentable</span> {
    <span class="kw">func</span> makeUIView(context: <span class="type">Context</span>) -> <span class="type">AVRoutePickerView</span> {
        <span class="kw">let</span> routePickerView = <span class="type">AVRoutePickerView</span>()
        routePickerView.tintColor = .<span class="type">UIColor</span>.systemBlue
        routePickerView.activeTintColor = .<span class="type">UIColor</span>.systemGreen
        routePickerView.prioritizesVideoDevices = <span class="kw">true</span>

        <span class="kw">return</span> routePickerView
    }

    <span class="kw">func</span> updateUIView(<span class="kw">_</span> uiView: <span class="type">AVRoutePickerView</span>, context: <span class="type">Context</span>) {}
}

<span class="kw">struct</span> <span class="type">VideoPlayerWithAirPlay</span>: <span class="type">View</span> {
    <span class="kw">let</span> url: <span class="type">URL</span>
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> player: <span class="type">AVPlayer</span>?

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="kw">if</span> <span class="kw">let</span> player = player {
                <span class="type">VideoPlayer</span>(player: player)
                    .frame(height: <span class="str">300</span>)
            }

            <span class="type">HStack</span> {
                <span class="type">Text</span>(<span class="str">"AirPlayë¡œ ì¬ìƒ"</span>)
                    .font(.headline)

                <span class="type">Spacer</span>()

                <span class="type">AirPlayButton</span>()
                    .frame(width: <span class="str">40</span>, height: <span class="str">40</span>)
            }
            .padding()
        }
        .onAppear {
            setupPlayer()
        }
    }

    <span class="kw">func</span> setupPlayer() {
        player = <span class="type">AVPlayer</span>(url: url)

        <span class="comment">// AirPlayë¥¼ ìœ„í•œ ì˜¤ë””ì˜¤ ì„¸ì…˜</span>
        <span class="kw">let</span> audioSession = <span class="type">AVAudioSession</span>.sharedInstance()
        <span class="kw">try</span>? audioSession.setCategory(.playback, mode: .moviePlayback)
        <span class="kw">try</span>? audioSession.setActive(<span class="kw">true</span>)

        <span class="comment">// ì™¸ë¶€ ì¬ìƒ í—ˆìš©</span>
        player?.allowsExternalPlayback = <span class="kw">true</span>
        player?.usesExternalPlaybackWhileExternalScreenIsActive = <span class="kw">true</span>
    }
}</pre>
</div>

<h2>âš™ï¸ 5. ì»¤ìŠ¤í…€ ì»¨íŠ¸ë¡¤</h2>
<p>ì™„ì „íˆ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆëœ ì¬ìƒ ì»¨íŠ¸ë¡¤ì„ ë§Œë“­ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">CustomPlayerView.swift â€” ì»¤ìŠ¤í…€ ì»¨íŠ¸ë¡¤</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">AVKit</span>
<span class="kw">import</span> <span class="type">Combine</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">CustomPlayerManager</span> {
    <span class="kw">var</span> player: <span class="type">AVPlayer</span>
    <span class="kw">var</span> isPlaying = <span class="kw">false</span>
    <span class="kw">var</span> currentTime: <span class="type">Double</span> = <span class="str">0</span>
    <span class="kw">var</span> duration: <span class="type">Double</span> = <span class="str">0</span>
    <span class="kw">var</span> playbackRate: <span class="type">Float</span> = <span class="str">1.0</span>
    <span class="kw">var</span> volume: <span class="type">Float</span> = <span class="str">1.0</span>

    <span class="kw">private</span> <span class="kw">var</span> timeObserver: <span class="type">Any</span>?

    <span class="kw">init</span>(url: <span class="type">URL</span>) {
        <span class="kw">self</span>.player = <span class="type">AVPlayer</span>(url: url)
        setupObservers()
    }

    <span class="kw">func</span> setupObservers() {
        <span class="comment">// ì¬ìƒ ì‹œê°„ ê´€ì°°</span>
        timeObserver = player.addPeriodicTimeObserver(
            forInterval: <span class="type">CMTime</span>(seconds: <span class="str">0.5</span>, preferredTimescale: <span class="str">600</span>),
            queue: .main
        ) { [<span class="kw">weak self</span>] time <span class="kw">in</span>
            <span class="kw">self</span>?.currentTime = time.seconds
        }

        <span class="comment">// ì¬ìƒ ì™„ë£Œ ê°ì§€</span>
        <span class="type">NotificationCenter</span>.default.addObserver(
            forName: .AVPlayerItemDidPlayToEndTime,
            object: player.currentItem,
            queue: .main
        ) { [<span class="kw">weak self</span>] <span class="kw">_</span> <span class="kw">in</span>
            <span class="kw">self</span>?.isPlaying = <span class="kw">false</span>
            <span class="kw">self</span>?.player.seek(to: .zero)
        }

        <span class="comment">// ì˜ìƒ ê¸¸ì´ ë¡œë“œ</span>
        <span class="type">Task</span> {
            <span class="kw">if</span> <span class="kw">let</span> asset = player.currentItem?.asset,
               <span class="kw">let</span> duration = <span class="kw">try</span>? <span class="kw">await</span> asset.load(.duration) {
                <span class="kw">self</span>.duration = duration.seconds
            }
        }
    }

    <span class="kw">func</span> togglePlayPause() {
        <span class="kw">if</span> isPlaying {
            player.pause()
        } <span class="kw">else</span> {
            player.play()
        }
        isPlaying.toggle()
    }

    <span class="kw">func</span> seek(to time: <span class="type">Double</span>) {
        <span class="kw">let</span> cmTime = <span class="type">CMTime</span>(seconds: time, preferredTimescale: <span class="str">600</span>)
        player.seek(to: cmTime)
    }

    <span class="kw">func</span> skipForward(<span class="kw">_</span> seconds: <span class="type">Double</span> = <span class="str">10</span>) {
        seek(to: currentTime + seconds)
    }

    <span class="kw">func</span> skipBackward(<span class="kw">_</span> seconds: <span class="type">Double</span> = <span class="str">10</span>) {
        seek(to: max(<span class="str">0</span>, currentTime - seconds))
    }

    <span class="kw">func</span> changePlaybackRate(to rate: <span class="type">Float</span>) {
        playbackRate = rate
        player.rate = rate
    }

    <span class="kw">func</span> changeVolume(to volume: <span class="type">Float</span>) {
        <span class="kw">self</span>.volume = volume
        player.volume = volume
    }
}

<span class="kw">struct</span> <span class="type">CustomPlayerView</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> playerManager: <span class="type">CustomPlayerManager</span>
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> showControls = <span class="kw">true</span>

    <span class="kw">init</span>(url: <span class="type">URL</span>) {
        _playerManager = <span class="type">State</span>(initialValue: <span class="type">CustomPlayerManager</span>(url: url))
    }

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">ZStack</span> {
            <span class="comment">// ë¹„ë””ì˜¤ ë ˆì´ì–´</span>
            <span class="type">VideoLayer</span>(player: playerManager.player)
                .onTapGesture {
                    <span class="kw">withAnimation</span> {
                        showControls.toggle()
                    }
                }

            <span class="comment">// ì»¤ìŠ¤í…€ ì»¨íŠ¸ë¡¤</span>
            <span class="kw">if</span> showControls {
                <span class="type">VStack</span> {
                    <span class="type">Spacer</span>()

                    <span class="comment">// ì§„í–‰ ë°”</span>
                    <span class="type">VStack</span>(spacing: <span class="str">8</span>) {
                        <span class="type">Slider</span>(
                            value: <span class="type">Binding</span>(
                                get: { playerManager.currentTime },
                                set: { playerManager.seek(to: $0) }
                            ),
                            in: <span class="str">0</span>...max(playerManager.duration, <span class="str">1</span>)
                        )
                        .tint(.white)

                        <span class="type">HStack</span> {
                            <span class="type">Text</span>(formatTime(playerManager.currentTime))
                            <span class="type">Spacer</span>()
                            <span class="type">Text</span>(formatTime(playerManager.duration))
                        }
                        .font(.caption)
                        .foregroundStyle(.white)
                    }
                    .padding(.horizontal)

                    <span class="comment">// ì¬ìƒ ì»¨íŠ¸ë¡¤</span>
                    <span class="type">HStack</span>(spacing: <span class="str">40</span>) {
                        <span class="type">Button</span> {
                            playerManager.skipBackward()
                        } label: {
                            <span class="type">Image</span>(systemName: <span class="str">"gobackward.10"</span>)
                                .font(.title)
                        }

                        <span class="type">Button</span> {
                            playerManager.togglePlayPause()
                        } label: {
                            <span class="type">Image</span>(systemName: playerManager.isPlaying ? <span class="str">"pause.fill"</span> : <span class="str">"play.fill"</span>)
                                .font(.title)
                        }

                        <span class="type">Button</span> {
                            playerManager.skipForward()
                        } label: {
                            <span class="type">Image</span>(systemName: <span class="str">"goforward.10"</span>)
                                .font(.title)
                        }

                        <span class="type">Menu</span> {
                            <span class="type">Button</span>(<span class="str">"0.5x"</span>) { playerManager.changePlaybackRate(to: <span class="str">0.5</span>) }
                            <span class="type">Button</span>(<span class="str">"1.0x"</span>) { playerManager.changePlaybackRate(to: <span class="str">1.0</span>) }
                            <span class="type">Button</span>(<span class="str">"1.5x"</span>) { playerManager.changePlaybackRate(to: <span class="str">1.5</span>) }
                            <span class="type">Button</span>(<span class="str">"2.0x"</span>) { playerManager.changePlaybackRate(to: <span class="str">2.0</span>) }
                        } label: {
                            <span class="type">Image</span>(systemName: <span class="str">"gauge"</span>)
                                .font(.title)
                        }
                    }
                    .foregroundStyle(.white)
                    .padding()
                }
                .background(
                    <span class="type">LinearGradient</span>(
                        colors: [.<span class="type">Color</span>.clear, .<span class="type">Color</span>.black.opacity(<span class="str">0.7</span>)],
                        startPoint: .top,
                        endPoint: .bottom
                    )
                )
                .transition(.opacity)
            }
        }
        .frame(height: <span class="str">300</span>)
        .background(<span class="type">Color</span>.black)
    }

    <span class="kw">func</span> formatTime(<span class="kw">_</span> time: <span class="type">Double</span>) -> <span class="type">String</span> {
        <span class="kw">let</span> minutes = <span class="type">Int</span>(time) / <span class="str">60</span>
        <span class="kw">let</span> seconds = <span class="type">Int</span>(time) % <span class="str">60</span>
        <span class="kw">return</span> <span class="type">String</span>(format: <span class="str">"%d:%02d"</span>, minutes, seconds)
    }
}

<span class="kw">struct</span> <span class="type">VideoLayer</span>: <span class="type">UIViewRepresentable</span> {
    <span class="kw">let</span> player: <span class="type">AVPlayer</span>

    <span class="kw">func</span> makeUIView(context: <span class="type">Context</span>) -> <span class="type">UIView</span> {
        <span class="kw">let</span> view = <span class="type">UIView</span>()
        <span class="kw">let</span> playerLayer = <span class="type">AVPlayerLayer</span>(player: player)
        playerLayer.videoGravity = .resizeAspect
        view.layer.addSublayer(playerLayer)

        <span class="type">DispatchQueue</span>.main.async {
            playerLayer.frame = view.bounds
        }

        <span class="kw">return</span> view
    }

    <span class="kw">func</span> updateUIView(<span class="kw">_</span> uiView: <span class="type">UIView</span>, context: <span class="type">Context</span>) {
        <span class="kw">if</span> <span class="kw">let</span> layer = uiView.layer.sublayers?.first <span class="kw">as</span>? <span class="type">AVPlayerLayer</span> {
            layer.frame = uiView.bounds
        }
    }
}</pre>
</div>

<h2>ğŸ“± ì¢…í•© ì˜ˆì œ</h2>

<div class="code-block">
<div class="code-header">VideoApp.swift â€” ë¹„ë””ì˜¤ ì•±</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">AVKit</span>

<span class="kw">struct</span> <span class="type">VideoApp</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> selectedVideo: <span class="type">VideoItem</span>?

    <span class="kw">let</span> videos = [
        <span class="type">VideoItem</span>(title: <span class="str">"ìƒ˜í”Œ ë¹„ë””ì˜¤ 1"</span>, url: <span class="type">URL</span>(string: <span class="str">"https://example.com/video1.mp4"</span>)!),
        <span class="type">VideoItem</span>(title: <span class="str">"ìƒ˜í”Œ ë¹„ë””ì˜¤ 2"</span>, url: <span class="type">URL</span>(string: <span class="str">"https://example.com/video2.mp4"</span>)!),
    ]

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">NavigationStack</span> {
            <span class="type">List</span>(videos) { video <span class="kw">in</span>
                <span class="type">Button</span> {
                    selectedVideo = video
                } label: {
                    <span class="type">HStack</span> {
                        <span class="type">Image</span>(systemName: <span class="str">"play.rectangle.fill"</span>)
                            .font(.largeTitle)
                            .foregroundStyle(.blue)

                        <span class="type">Text</span>(video.title)
                            .font(.headline)
                    }
                }
            }
            .navigationTitle(<span class="str">"ë¹„ë””ì˜¤"</span>)
            .sheet(item: $selectedVideo) { video <span class="kw">in</span>
                <span class="type">VideoPlayerSheet</span>(video: video)
            }
        }
    }
}

<span class="kw">struct</span> <span class="type">VideoPlayerSheet</span>: <span class="type">View</span> {
    <span class="kw">let</span> video: <span class="type">VideoItem</span>
    <span class="kw">@Environment</span>(\.<span class="kw">dismiss</span>) <span class="kw">var</span> dismiss

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">NavigationStack</span> {
            <span class="type">CustomPlayerView</span>(url: video.url)
                .navigationTitle(video.title)
                .navigationBarTitleDisplayMode(.inline)
                .toolbar {
                    <span class="type">ToolbarItem</span>(placement: .cancellationAction) {
                        <span class="type">Button</span>(<span class="str">"ë‹«ê¸°"</span>) {
                            dismiss()
                        }
                    }
                }
        }
    }
}

<span class="kw">struct</span> <span class="type">VideoItem</span>: <span class="type">Identifiable</span> {
    <span class="kw">let</span> id = <span class="type">UUID</span>()
    <span class="kw">let</span> title: <span class="type">String</span>
    <span class="kw">let</span> url: <span class="type">URL</span>
}</pre>
</div>

<h2>ğŸ’¡ HIG ê°€ì´ë“œë¼ì¸</h2>

<ul>
<li><strong>ë„¤ì´í‹°ë¸Œ ì»¨íŠ¸ë¡¤:</strong> ê°€ëŠ¥í•˜ë©´ AVPlayerViewControllerì˜ ê¸°ë³¸ ì»¨íŠ¸ë¡¤ ì‚¬ìš©</li>
<li><strong>ì œìŠ¤ì²˜:</strong> íƒ­ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ í‘œì‹œ/ìˆ¨ê¹€, ìŠ¤ì™€ì´í”„ë¡œ íƒìƒ‰</li>
<li><strong>Picture-in-Picture:</strong> ë©€í‹°íƒœìŠ¤í‚¹ì„ ìœ„í•´ PiP ì§€ì›</li>
<li><strong>AirPlay:</strong> ì™¸ë¶€ ë””ìŠ¤í”Œë ˆì´ ì¬ìƒ í—ˆìš©</li>
<li><strong>ë°±ê·¸ë¼ìš´ë“œ:</strong> Info.plistì— ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œ ì¶”ê°€</li>
<li><strong>ì ‘ê·¼ì„±:</strong> ìë§‰ ë° ì˜¤ë””ì˜¤ ì„¤ëª… ì§€ì›</li>
</ul>

<h2>ğŸ¯ ì‹¤ì „ í™œìš©</h2>

<ul>
<li><strong>ìŠ¤íŠ¸ë¦¬ë° ì•±:</strong> Netflix, YouTube ìŠ¤íƒ€ì¼ í”Œë ˆì´ì–´</li>
<li><strong>êµìœ¡ í”Œë«í¼:</strong> ê°•ì˜ ë¹„ë””ì˜¤ ì¬ìƒ</li>
<li><strong>ì†Œì…œ ë¯¸ë””ì–´:</strong> ì¸í”¼ë“œ ë¹„ë””ì˜¤ ì¬ìƒ</li>
<li><strong>ë¼ì´ë¸Œ ë°©ì†¡:</strong> ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ì‹œì²­</li>
<li><strong>ë¹„ë””ì˜¤ í¸ì§‘:</strong> ë¯¸ë¦¬ë³´ê¸° í”Œë ˆì´ì–´</li>
</ul>

<h2>ğŸ“š ë” ì•Œì•„ë³´ê¸°</h2>

<ul>
<li><a href="https://developer.apple.com/documentation/avkit">AVKit ê³µì‹ ë¬¸ì„œ</a></li>
<li><a href="https://developer.apple.com/documentation/avkit/avplayerviewcontroller">AVPlayerViewController ë ˆí¼ëŸ°ìŠ¤</a></li>
<li><a href="https://developer.apple.com/documentation/avkit/adopting_picture_in_picture_in_a_standard_player">Picture-in-Picture ê°€ì´ë“œ</a></li>
</ul>

<div class="info-box">
<strong>âš¡ï¸ ì„±ëŠ¥ íŒ:</strong> AVPlayerViewControllerë¥¼ ì‚¬ìš©í•˜ë©´ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ìµœì í™”ëœ ì¬ìƒ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì»¤ìŠ¤í…€ ì»¨íŠ¸ë¡¤ì„ ë§Œë“¤ ë•ŒëŠ” <code>addPeriodicTimeObserver</code>ì˜ ê°„ê²©ì„ ë„ˆë¬´ ì§§ê²Œ ì„¤ì •í•˜ì§€ ë§ˆì„¸ìš”. 0.5ì´ˆ ì •ë„ê°€ ì ë‹¹í•©ë‹ˆë‹¤.
</div>

</article>
</body></html>