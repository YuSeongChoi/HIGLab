{"kind":"project","identifier":{"url":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/08-Push-Updates","interfaceLanguage":"swift"},"sections":[{"kind":"hero","chapter":"Ring 5: Real-time Updates","estimatedTimeInMinutes":15,"content":[{"inlineContent":[{"type":"text","text":"Learn how to remotely update Live Activity via push notifications from the server."}],"type":"paragraph"}],"title":"Push Token Updates"},{"tasks":[{"contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Live Activity has a dedicated Push Token.","type":"text"},{"text":" ","type":"text"},{"text":"This token enables remote updates through APNs.","type":"text"}]}],"mediaPosition":"trailing","kind":"contentAndMedia"}],"stepsSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Set pushType to token when starting the Activity.","type":"text"}]}],"type":"step","caption":[],"media":null,"runtimePreview":null,"code":"08-push-type.swift"},{"content":[{"type":"paragraph","inlineContent":[{"text":"Send the Push Token to the server.","type":"text"}]}],"type":"step","caption":[],"media":null,"runtimePreview":null,"code":"08-send-token.swift"},{"content":[{"type":"paragraph","inlineContent":[{"text":"Handle Token changes.","type":"text"}]}],"type":"step","caption":[],"media":null,"runtimePreview":null,"code":"08-token-updates.swift"}],"anchor":"Push-Token-Setup","title":"Push Token Setup"},{"contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"How to send Live Activity update pushes via APNs.","type":"text"}]}],"mediaPosition":"trailing","kind":"contentAndMedia"}],"stepsSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Review the APNs payload format.","type":"text"}]}],"type":"step","caption":[],"media":null,"runtimePreview":null,"code":"08-apns-payload.swift"}],"anchor":"Server-Implementation","title":"Server Implementation"}],"kind":"tasks"},{"kind":"callToAction","abstract":[{"text":"Learn how to test Live Activity on the simulator and real devices.","type":"text"}],"featuredEyebrow":"Tutorial","action":{"identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/09-Testing","isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"type":"reference","overridingTitle":"Get started"},"title":"Testing Live Activity"}],"schemaVersion":{"patch":0,"major":0,"minor":3},"hierarchy":{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents","modules":[{"projects":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/01-Understanding-Live-Activities","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/01-Understanding-Live-Activities#What-is-Live-Activity","kind":"task"},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/01-Understanding-Live-Activities#Dynamic-Island-Layouts","kind":"task"}]}],"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-1:-Understanding-Live-Activity"},{"projects":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/02-Activity-Attributes","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/02-Activity-Attributes#Designing-Data-Structure","kind":"task"}]},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/03-Activity-Configuration","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/03-Activity-Configuration#Widget-Extension-Setup","kind":"task"}]}],"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-2:-Building-Activity-Structure"},{"projects":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/04-Dynamic-Island-Compact","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/04-Dynamic-Island-Compact#Compact-Layout","kind":"task"}]},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/05-Dynamic-Island-Expanded","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/05-Dynamic-Island-Expanded#Expanded-Area-Structure","kind":"task"}]}],"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-3:-Dynamic-Island-UI"},{"projects":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/06-Lock-Screen-Layout","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/06-Lock-Screen-Layout#Lock-Screen-Layout","kind":"task"}]}],"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-4:-Lock-Screen-UI"},{"projects":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/07-Activity-Lifecycle","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/07-Activity-Lifecycle#Starting-an-Activity","kind":"task"},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/07-Activity-Lifecycle#Updating-an-Activity","kind":"task"}]},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/08-Push-Updates","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/08-Push-Updates#Push-Token-Setup","kind":"task"},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/08-Push-Updates#Server-Implementation","kind":"task"}]}],"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-5:-Real-time-Updates"},{"projects":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/09-Testing","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/09-Testing#Simulator-Testing","kind":"task"},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/09-Testing#Debug-Logging","kind":"task"},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/09-Testing#Check-Your-Understanding","kind":"assessment"}]},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced","sections":[{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced#Implementing-Real-time-Timers","kind":"task"},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced#State-Transitions-and-Animation","kind":"task"},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced#Advanced-Debugging-Techniques","kind":"task"},{"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced#Check-Your-Understanding","kind":"assessment"}]}],"reference":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-6:-Testing-and-Advanced-Features"}],"paths":[["doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents","doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/$volume","doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-5:-Real-time-Updates"]]},"metadata":{"title":"Push Token Updates","categoryPathComponent":"Table-of-Contents","category":"Building a Delivery Tracking Live Activity","role":"project"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/tutorials\/higactivitykit\/08-push-updates"]}],"references":{"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/01-Understanding-Live-Activities#What-is-Live-Activity":{"url":"\/tutorials\/higactivitykit\/01-understanding-live-activities#What-is-Live-Activity","abstract":[{"type":"text","text":"Learn the essence of Live Activity as defined by Apple HIG and"},{"type":"text","text":" "},{"text":"the core principles for creating great Live Activities.","type":"text"}],"role":"pseudoSymbol","title":"What is Live Activity?","kind":"section","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/01-Understanding-Live-Activities#What-is-Live-Activity","type":"section"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/09-Testing#Check-Your-Understanding":{"url":"\/tutorials\/higactivitykit\/09-testing#Check-Your-Understanding","title":"Check Your Understanding","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/09-Testing#Check-Your-Understanding","type":"link","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}]},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/05-Dynamic-Island-Expanded":{"type":"topic","abstract":[{"text":"Implement the Expanded layout shown when long-pressed.","type":"text"},{"text":" ","type":"text"},{"text":"Provide the richest information and interaction.","type":"text"}],"estimatedTime":"20min","role":"project","title":"Dynamic Island - Expanded Layout","kind":"project","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/05-Dynamic-Island-Expanded","url":"\/tutorials\/higactivitykit\/05-dynamic-island-expanded"},"08-token-updates.swift":{"highlights":[{"line":5},{"line":7},{"line":9},{"line":10},{"line":11},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":35},{"line":36},{"line":37},{"line":38},{"line":39},{"line":40},{"line":41},{"line":42},{"line":43}],"fileName":"PushSetup.swift","content":["import ActivityKit","","extension DeliveryActivityManager {","    ","    \/\/ MARK: - Token Í∞±Ïã† Ï≤òÎ¶¨","    ","    func observeAllActivityTokens() {","        Task {","            \/\/ Î™®Îì† ActivityÏùò ÌÜ†ÌÅ∞ Î≥ÄÍ≤Ω Í∞êÏßÄ","            for activity in Activity<DeliveryAttributes>.activities {","                observePushToken(for: activity)","            }","        }","    }","    ","    \/\/ Activity ÏÉÅÌÉú Î≥ÄÍ≤Ω Í∞êÏßÄ","    func observeActivityState(for activity: Activity<DeliveryAttributes>) {","        Task {","            for await state in activity.activityStateUpdates {","                switch state {","                case .active:","                    print(\"Activity ÌôúÏÑ±ÌôîÎê®\")","                case .ended:","                    print(\"Activity Ï¢ÖÎ£åÎê®\")","                case .dismissed:","                    print(\"Activity Îã´Ìûò\")","                case .stale:","                    print(\"Activity Ïò§ÎûòÎê®\")","                @unknown default:","                    break","                }","            }","        }","    }","    ","    \/\/ Content ÏóÖÎç∞Ïù¥Ìä∏ Í∞êÏßÄ (Ìë∏ÏãúÎ°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêêÏùÑ Îïå)","    func observeContentUpdates(for activity: Activity<DeliveryAttributes>) {","        Task {","            for await content in activity.contentUpdates {","                print(\"Content ÏóÖÎç∞Ïù¥Ìä∏Îê®: \\(content.state.status.displayName)\")","            }","        }","    }","}"],"identifier":"08-token-updates.swift","syntax":"swift","type":"file","fileType":"swift"},"doc://activitykit.HIGActivityKit/tutorials/Table-of-Contents/Ring-5:-Real-time-Updates":{"url":"\/tutorials\/table-of-contents\/ring-5:-real-time-updates","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-5:-Real-time-Updates","kind":"article","abstract":[],"role":"article","type":"topic","title":"Ring 5: Real-time Updates"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/05-Dynamic-Island-Expanded#Expanded-Area-Structure":{"url":"\/tutorials\/higactivitykit\/05-dynamic-island-expanded#Expanded-Area-Structure","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/05-Dynamic-Island-Expanded#Expanded-Area-Structure","kind":"section","abstract":[{"type":"text","text":"Implement the Expanded layout shown when long-pressed."},{"type":"text","text":" "},{"type":"text","text":"Provide the richest information and interaction."}],"role":"pseudoSymbol","type":"section","title":"Expanded Area Structure"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/09-Testing#Debug-Logging":{"url":"\/tutorials\/higactivitykit\/09-testing#Debug-Logging","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/09-Testing#Debug-Logging","kind":"section","abstract":[{"text":"Learn how to test Live Activity on the simulator and real devices.","type":"text"}],"role":"pseudoSymbol","type":"section","title":"Debug Logging"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/03-Activity-Configuration#Widget-Extension-Setup":{"url":"\/tutorials\/higactivitykit\/03-activity-configuration#Widget-Extension-Setup","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/03-Activity-Configuration#Widget-Extension-Setup","kind":"section","abstract":[{"text":"Configure Live Activity in Widget Extension","type":"text"},{"text":" ","type":"text"},{"text":"and create the basic layout structure.","type":"text"}],"role":"pseudoSymbol","type":"section","title":"Widget Extension Setup"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/04-Dynamic-Island-Compact":{"type":"topic","abstract":[{"text":"Implement Compact and Minimal states,","type":"text"},{"text":" ","type":"text"},{"text":"the smallest layouts for Dynamic Island.","type":"text"}],"estimatedTime":"15min","role":"project","title":"Dynamic Island - Compact Layout","kind":"project","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/04-Dynamic-Island-Compact","url":"\/tutorials\/higactivitykit\/04-dynamic-island-compact"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/10-Advanced#Implementing-Real-time-Timers":{"url":"\/tutorials\/higactivitykit\/10-advanced#Implementing-Real-time-Timers","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced#Implementing-Real-time-Timers","kind":"section","abstract":[{"text":"Learn about timers, state transition animations, and advanced debugging techniques.","type":"text"},{"text":" ","type":"text"},{"text":"Master useful patterns for real deployment environments.","type":"text"}],"role":"pseudoSymbol","type":"section","title":"Implementing Real-time Timers"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/07-Activity-Lifecycle":{"type":"topic","role":"project","kind":"project","url":"\/tutorials\/higactivitykit\/07-activity-lifecycle","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/07-Activity-Lifecycle","estimatedTime":"15min","abstract":[{"type":"text","text":"Learn how to start, update, and end Live Activities."}],"title":"Activity Lifecycle Management"},"08-apns-payload.swift":{"highlights":[],"fileName":"APNsPayload.json","content":["\/\/ MARK: - APNs Payload for Live Activity Update","","\/*"," ÏÑúÎ≤ÑÏóêÏÑú APNsÎ°ú Î≥¥ÎÇ¥Îäî ÌéòÏù¥Î°úÎìú ÌòïÏãù:"," "," Headers:"," - apns-push-type: liveactivity"," - apns-topic: {bundle-id}.push-type.liveactivity"," - apns-priority: 10 (Ï¶âÏãú) ÎòêÎäî 5 (Î∞∞ÌÑ∞Î¶¨ Ï†àÏïΩ)"," "," Payload:","*\/","","let apnsPayload = \"\"\"","{","    \"aps\": {","        \"timestamp\": 1699000000,","        \"event\": \"update\",","        \"content-state\": {","            \"status\": \"pickedUp\",","            \"estimatedArrival\": 1699001800,","            \"driverName\": \"ÍπÄÎ∞∞Îã¨\",","            \"driverImageURL\": \"https:\/\/example.com\/driver.jpg\"","        },","        \"alert\": {","            \"title\": \"Î∞∞Îã¨ ÏãúÏûë!\",","            \"body\": \"ÍπÄÎ∞∞Îã¨ÎãòÏù¥ ÏùåÏãùÏùÑ ÌîΩÏóÖÌñàÏñ¥Ïöî\"","        }","    }","}","\"\"\"","","\/\/ event Ï¢ÖÎ•ò:","\/\/ - \"update\": ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏","\/\/ - \"end\": Activity Ï¢ÖÎ£å","","let endPayload = \"\"\"","{","    \"aps\": {","        \"timestamp\": 1699002000,","        \"event\": \"end\",","        \"dismissal-date\": 1699005600,","        \"content-state\": {","            \"status\": \"delivered\",","            \"estimatedArrival\": 1699002000,","            \"driverName\": \"ÍπÄÎ∞∞Îã¨\",","            \"driverImageURL\": null","        },","        \"alert\": {","            \"title\": \"Î∞∞Îã¨ ÏôÑÎ£å!\",","            \"body\": \"ÎßõÏûàÍ≤å ÎìúÏÑ∏Ïöî üçï\"","        }","    }","}","\"\"\""],"identifier":"08-apns-payload.swift","type":"file","syntax":"json","fileType":"json"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/09-Testing":{"type":"topic","abstract":[{"text":"Learn how to test Live Activity on the simulator and real devices.","type":"text"}],"estimatedTime":"10min","role":"project","title":"Testing Live Activity","kind":"project","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/09-Testing","url":"\/tutorials\/higactivitykit\/09-testing"},"08-push-type.swift":{"highlights":[],"fileName":"PushSetup.swift","content":["import ActivityKit","","\/\/ MARK: - Push Token ÏÑ§Ï†ï","","extension DeliveryActivityManager {","    ","    func startActivityWithPush(","        attributes: DeliveryAttributes,","        initialState: DeliveryAttributes.ContentState","    ) async throws {","        let content = ActivityContent(state: initialState, staleDate: nil)","        ","        \/\/ pushType: .tokenÏúºÎ°ú Ìë∏Ïãú ÏóÖÎç∞Ïù¥Ìä∏ ÌôúÏÑ±Ìôî","        let activity = try Activity.request(","            attributes: attributes,","            content: content,","            pushType: .token  \/\/ ‚Üê Ï§ëÏöî!","        )","        ","        self.currentActivity = activity","        ","        \/\/ Push Token Í¥ÄÏ∞∞ ÏãúÏûë","        observePushToken(for: activity)","    }","}"],"identifier":"08-push-type.swift","syntax":"swift","type":"file","fileType":"swift"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/09-Testing#Simulator-Testing":{"url":"\/tutorials\/higactivitykit\/09-testing#Simulator-Testing","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/09-Testing#Simulator-Testing","kind":"section","abstract":[{"text":"Learn how to test Live Activity on the simulator and real devices.","type":"text"}],"role":"pseudoSymbol","type":"section","title":"Simulator Testing"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/01-Understanding-Live-Activities#Dynamic-Island-Layouts":{"url":"\/tutorials\/higactivitykit\/01-understanding-live-activities#Dynamic-Island-Layouts","abstract":[{"text":"Learn the essence of Live Activity as defined by Apple HIG and","type":"text"},{"text":" ","type":"text"},{"text":"the core principles for creating great Live Activities.","type":"text"}],"role":"pseudoSymbol","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/01-Understanding-Live-Activities#Dynamic-Island-Layouts","kind":"section","title":"Dynamic Island Layouts","type":"section"},"doc://activitykit.HIGActivityKit/tutorials/Table-of-Contents/Ring-3:-Dynamic-Island-UI":{"url":"\/tutorials\/table-of-contents\/ring-3:-dynamic-island-ui","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-3:-Dynamic-Island-UI","kind":"article","abstract":[],"role":"article","type":"topic","title":"Ring 3: Dynamic Island UI"},"doc://activitykit.HIGActivityKit/tutorials/Table-of-Contents":{"type":"topic","role":"overview","kind":"overview","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents","url":"\/tutorials\/table-of-contents","abstract":[{"type":"text","text":"Using ActivityKit, implement a Live Activity that displays real-time delivery status"},{"type":"text","text":" "},{"type":"text","text":"on the lock screen and Dynamic Island."}],"title":"Building a Delivery Tracking App"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/10-Advanced#Check-Your-Understanding":{"url":"\/tutorials\/higactivitykit\/10-advanced#Check-Your-Understanding","type":"link","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced#Check-Your-Understanding","title":"Check Your Understanding"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/10-Advanced#Advanced-Debugging-Techniques":{"url":"\/tutorials\/higactivitykit\/10-advanced#Advanced-Debugging-Techniques","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced#Advanced-Debugging-Techniques","kind":"section","abstract":[{"text":"Learn about timers, state transition animations, and advanced debugging techniques.","type":"text"},{"text":" ","type":"text"},{"text":"Master useful patterns for real deployment environments.","type":"text"}],"role":"pseudoSymbol","type":"section","title":"Advanced Debugging Techniques"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/04-Dynamic-Island-Compact#Compact-Layout":{"type":"section","abstract":[{"text":"Implement Compact and Minimal states,","type":"text"},{"text":" ","type":"text"},{"text":"the smallest layouts for Dynamic Island.","type":"text"}],"role":"pseudoSymbol","title":"Compact Layout","kind":"section","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/04-Dynamic-Island-Compact#Compact-Layout","url":"\/tutorials\/higactivitykit\/04-dynamic-island-compact#Compact-Layout"},"doc://activitykit.HIGActivityKit/tutorials/Table-of-Contents/Ring-2:-Building-Activity-Structure":{"url":"\/tutorials\/table-of-contents\/ring-2:-building-activity-structure","abstract":[],"role":"article","title":"Ring 2: Building Activity Structure","kind":"article","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-2:-Building-Activity-Structure","type":"topic"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/08-Push-Updates#Push-Token-Setup":{"type":"section","abstract":[{"text":"Learn how to remotely update Live Activity via push notifications from the server.","type":"text"}],"role":"pseudoSymbol","title":"Push Token Setup","kind":"section","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/08-Push-Updates#Push-Token-Setup","url":"\/tutorials\/higactivitykit\/08-push-updates#Push-Token-Setup"},"doc://activitykit.HIGActivityKit/tutorials/Table-of-Contents/Ring-4:-Lock-Screen-UI":{"url":"\/tutorials\/table-of-contents\/ring-4:-lock-screen-ui","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-4:-Lock-Screen-UI","kind":"article","abstract":[],"role":"article","type":"topic","title":"Ring 4: Lock Screen UI"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/03-Activity-Configuration":{"type":"topic","abstract":[{"text":"Configure Live Activity in Widget Extension","type":"text"},{"text":" ","type":"text"},{"text":"and create the basic layout structure.","type":"text"}],"estimatedTime":"15min","role":"project","title":"Setting Up ActivityConfiguration","kind":"project","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/03-Activity-Configuration","url":"\/tutorials\/higactivitykit\/03-activity-configuration"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/07-Activity-Lifecycle#Updating-an-Activity":{"url":"\/tutorials\/higactivitykit\/07-activity-lifecycle#Updating-an-Activity","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/07-Activity-Lifecycle#Updating-an-Activity","kind":"section","abstract":[{"text":"Learn how to start, update, and end Live Activities.","type":"text"}],"role":"pseudoSymbol","type":"section","title":"Updating an Activity"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/02-Activity-Attributes":{"type":"topic","role":"project","kind":"project","url":"\/tutorials\/higactivitykit\/02-activity-attributes","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/02-Activity-Attributes","estimatedTime":"15min","abstract":[{"type":"text","text":"Define ActivityAttributes and ContentState,"},{"type":"text","text":" "},{"type":"text","text":"the data models for Live Activity."}],"title":"Defining ActivityAttributes"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/01-Understanding-Live-Activities":{"type":"topic","abstract":[{"text":"Learn the essence of Live Activity as defined by Apple HIG and","type":"text"},{"text":" ","type":"text"},{"text":"the core principles for creating great Live Activities.","type":"text"}],"estimatedTime":"10min","role":"project","title":"Understanding Live Activity","kind":"project","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/01-Understanding-Live-Activities","url":"\/tutorials\/higactivitykit\/01-understanding-live-activities"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/10-Advanced#State-Transitions-and-Animation":{"type":"section","abstract":[{"text":"Learn about timers, state transition animations, and advanced debugging techniques.","type":"text"},{"text":" ","type":"text"},{"text":"Master useful patterns for real deployment environments.","type":"text"}],"role":"pseudoSymbol","title":"State Transitions and Animation","kind":"section","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced#State-Transitions-and-Animation","url":"\/tutorials\/higactivitykit\/10-advanced#State-Transitions-and-Animation"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/08-Push-Updates":{"type":"topic","role":"project","kind":"project","url":"\/tutorials\/higactivitykit\/08-push-updates","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/08-Push-Updates","estimatedTime":"15min","abstract":[{"type":"text","text":"Learn how to remotely update Live Activity via push notifications from the server."}],"title":"Push Token Updates"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/10-Advanced":{"type":"topic","abstract":[{"text":"Learn about timers, state transition animations, and advanced debugging techniques.","type":"text"},{"text":" ","type":"text"},{"text":"Master useful patterns for real deployment environments.","type":"text"}],"estimatedTime":"20min","role":"project","title":"Advanced Live Activity Features","kind":"project","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/10-Advanced","url":"\/tutorials\/higactivitykit\/10-advanced"},"08-send-token.swift":{"highlights":[{"line":5},{"line":6},{"line":7},{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":31},{"line":32},{"line":34},{"line":35},{"line":36},{"line":37},{"line":39},{"line":40},{"line":41},{"line":42},{"line":43},{"line":44},{"line":45},{"line":46}],"fileName":"PushSetup.swift","content":["import ActivityKit","","extension DeliveryActivityManager {","    ","    \/\/ MARK: - Push Token ÏÑúÎ≤Ñ Ï†ÑÏÜ°","    ","    func observePushToken(for activity: Activity<DeliveryAttributes>) {","        Task {","            \/\/ pushTokenUpdates: ÌÜ†ÌÅ∞Ïù¥ Î≥ÄÍ≤ΩÎê† ÎïåÎßàÎã§ ÏÉà Í∞í Î∞©Ï∂ú","            for await tokenData in activity.pushTokenUpdates {","                let token = tokenData.map { String(format: \"%02x\", $0) }.joined()","                print(\"Push Token: \\(token)\")","                ","                \/\/ ÏÑúÎ≤ÑÏóê ÌÜ†ÌÅ∞ Ï†ÑÏÜ°","                await sendTokenToServer(","                    activityId: activity.id,","                    token: token","                )","            }","        }","    }","    ","    func sendTokenToServer(activityId: String, token: String) async {","        \/\/ ÏÑúÎ≤Ñ API Ìò∏Ï∂ú","        let payload = [","            \"activity_id\": activityId,","            \"push_token\": token,","            \"platform\": \"ios\"","        ]","        ","        \/\/ URLSessionÏúºÎ°ú ÏÑúÎ≤ÑÏóê Ï†ÑÏÜ°","        guard let url = URL(string: \"https:\/\/api.example.com\/live-activity\/register\") else { return }","        ","        var request = URLRequest(url: url)","        request.httpMethod = \"POST\"","        request.setValue(\"application\/json\", forHTTPHeaderField: \"Content-Type\")","        request.httpBody = try? JSONSerialization.data(withJSONObject: payload)","        ","        do {","            let (_, response) = try await URLSession.shared.data(for: request)","            if let httpResponse = response as? HTTPURLResponse, httpResponse.statusCode == 200 {","                print(\"Token ÏÑúÎ≤Ñ Îì±Î°ù ÏôÑÎ£å\")","            }","        } catch {","            print(\"Token Îì±Î°ù Ïã§Ìå®: \\(error)\")","        }","    }","}"],"identifier":"08-send-token.swift","syntax":"swift","type":"file","fileType":"swift"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/06-Lock-Screen-Layout":{"type":"topic","role":"project","kind":"project","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/06-Lock-Screen-Layout","url":"\/tutorials\/higactivitykit\/06-lock-screen-layout","estimatedTime":"15min","abstract":[{"text":"Design the Live Activity layout displayed on the lock screen.","type":"text"},{"text":" ","type":"text"},{"text":"Similar to widgets but with real-time update capability.","type":"text"}],"title":"Lock Screen Live Activity"},"doc://activitykit.HIGActivityKit/tutorials/Table-of-Contents/Ring-6:-Testing-and-Advanced-Features":{"type":"topic","abstract":[],"role":"article","title":"Ring 6: Testing and Advanced Features","kind":"article","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-6:-Testing-and-Advanced-Features","url":"\/tutorials\/table-of-contents\/ring-6:-testing-and-advanced-features"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/08-Push-Updates#Server-Implementation":{"url":"\/tutorials\/higactivitykit\/08-push-updates#Server-Implementation","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/08-Push-Updates#Server-Implementation","kind":"section","abstract":[{"text":"Learn how to remotely update Live Activity via push notifications from the server.","type":"text"}],"role":"pseudoSymbol","type":"section","title":"Server Implementation"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/06-Lock-Screen-Layout#Lock-Screen-Layout":{"url":"\/tutorials\/higactivitykit\/06-lock-screen-layout#Lock-Screen-Layout","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/06-Lock-Screen-Layout#Lock-Screen-Layout","kind":"section","abstract":[{"type":"text","text":"Design the Live Activity layout displayed on the lock screen."},{"type":"text","text":" "},{"type":"text","text":"Similar to widgets but with real-time update capability."}],"role":"pseudoSymbol","type":"section","title":"Lock Screen Layout"},"doc://activitykit.HIGActivityKit/tutorials/Table-of-Contents/Ring-1:-Understanding-Live-Activity":{"url":"\/tutorials\/table-of-contents\/ring-1:-understanding-live-activity","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/Table-of-Contents\/Ring-1:-Understanding-Live-Activity","kind":"article","abstract":[],"role":"article","type":"topic","title":"Ring 1: Understanding Live Activity"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/02-Activity-Attributes#Designing-Data-Structure":{"url":"\/tutorials\/higactivitykit\/02-activity-attributes#Designing-Data-Structure","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/02-Activity-Attributes#Designing-Data-Structure","kind":"section","abstract":[{"text":"Define ActivityAttributes and ContentState,","type":"text"},{"text":" ","type":"text"},{"text":"the data models for Live Activity.","type":"text"}],"role":"pseudoSymbol","type":"section","title":"Designing Data Structure"},"doc://activitykit.HIGActivityKit/tutorials/HIGActivityKit/07-Activity-Lifecycle#Starting-an-Activity":{"url":"\/tutorials\/higactivitykit\/07-activity-lifecycle#Starting-an-Activity","identifier":"doc:\/\/activitykit.HIGActivityKit\/tutorials\/HIGActivityKit\/07-Activity-Lifecycle#Starting-an-Activity","kind":"section","abstract":[{"text":"Learn how to start, update, and end Live Activities.","type":"text"}],"role":"pseudoSymbol","type":"section","title":"Starting an Activity"}}}