{"sections":[{"chapter":"Photos and Videos","estimatedTimeInMinutes":25,"kind":"hero","title":"Video Recording","content":[{"inlineContent":[{"type":"text","text":"Record video using AVCaptureMovieFileOutput."},{"type":"text","text":" "},{"text":"Implement start\/stop recording, timer, and file saving.","type":"text"}],"type":"paragraph"}]},{"tasks":[{"title":"Movie File Output Setup","anchor":"Movie-File-Output-Setup","stepsSection":[{"caption":[],"media":null,"runtimePreview":null,"content":[{"inlineContent":[{"text":"Add movieOutput property to CameraManager.","type":"text"},{"text":" ","type":"text"},{"text":"This is the output object for video recording.","type":"text"}],"type":"paragraph"}],"type":"step","code":"04-movie-output-property.swift"},{"caption":[],"media":null,"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add movieOutput to the session."},{"type":"text","text":" "},{"type":"text","text":"Audio input is also needed to capture both video and audio."}]}],"type":"step","code":"04-add-movie-output.swift"},{"content":[{"type":"paragraph","inlineContent":[{"text":"Add audio input.","type":"text"},{"text":" ","type":"text"},{"text":"Capture audio from the microphone to record with video.","type":"text"}]}],"caption":[],"code":"04-add-audio-input.swift","type":"step","runtimePreview":null,"media":null}],"contentSection":[{"kind":"contentAndMedia","mediaPosition":"trailing","content":[{"inlineContent":[{"type":"text","text":"AVCaptureMovieFileOutput records video and audio to a file."},{"type":"text","text":" "},{"text":"It saves in QuickTime format (.mov) and can be converted to other formats later.","type":"text"}],"type":"paragraph"}]}]},{"title":"Starting and Stopping Recording","anchor":"Starting-and-Stopping-Recording","stepsSection":[{"code":"04-recording-delegate.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Implement AVCaptureFileOutputRecordingDelegate."},{"text":" ","type":"text"},{"type":"text","text":"Receive recording start and completion events."}],"type":"paragraph"}],"media":null,"caption":[]},{"code":"04-start-recording.swift","runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Implement the start recording method.","type":"text"},{"type":"text","text":" "},{"text":"Record to the temporary directory with a unique filename.","type":"text"}]}],"media":null,"caption":[]},{"code":"04-stop-recording.swift","runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Implement the stop recording method.","type":"text"},{"type":"text","text":" "},{"text":"Calling stopRecording() triggers the delegate callback.","type":"text"}]}],"media":null,"caption":[]},{"code":"04-finish-recording.swift","runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Implement recording completion handling.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Save the video to the photo library."}]}],"media":null,"caption":[]}],"contentSection":[{"kind":"contentAndMedia","content":[{"inlineContent":[{"type":"text","text":"Implement start and stop recording functionality."},{"type":"text","text":" "},{"type":"text","text":"Record to a temporary file and move to photo library on completion."}],"type":"paragraph"}],"mediaPosition":"trailing"}]},{"contentSection":[{"kind":"contentAndMedia","content":[{"inlineContent":[{"text":"Implement recording button, timer, and status display with SwiftUI.","type":"text"}],"type":"paragraph"}],"mediaPosition":"trailing"}],"stepsSection":[{"caption":[],"content":[{"inlineContent":[{"text":"Add property to track recording state.","type":"text"}],"type":"paragraph"}],"code":"04-recording-state.swift","media":null,"runtimePreview":null,"type":"step"},{"caption":[],"content":[{"type":"paragraph","inlineContent":[{"text":"Implement recording timer.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"Display recording time in real-time."}]}],"code":"04-recording-timer.swift","media":null,"runtimePreview":null,"type":"step"},{"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Implement recording button UI.","type":"text"},{"text":" ","type":"text"},{"text":"Display in red when recording.","type":"text"}]}],"caption":[],"media":null,"code":"04-record-button.swift","runtimePreview":null},{"caption":[],"code":"04-timer-display.swift","media":null,"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Add recording time display UI.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Display elapsed time in minutes:seconds format."}]}]}],"anchor":"Recording-UI-Implementation","title":"Recording UI Implementation"}],"kind":"tasks"},{"assessments":[{"title":[{"inlineContent":[{"text":"What is the default file format for videos recorded with AVCaptureMovieFileOutput?","type":"text"}],"type":"paragraph"}],"content":[],"choices":[{"content":[{"inlineContent":[{"text":"QuickTime (.mov)","type":"text"}],"type":"paragraph"}],"isCorrect":true,"justification":[{"inlineContent":[{"text":"AVCaptureMovieFileOutput records in QuickTime format by default.","type":"text"}],"type":"paragraph"}]},{"justification":[{"inlineContent":[{"text":"MP4 can be created through conversion later.","type":"text"}],"type":"paragraph"}],"content":[{"inlineContent":[{"text":"MP4 (.mp4)","type":"text"}],"type":"paragraph"}],"isCorrect":false},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"AVI (.avi)"}]}],"isCorrect":false,"justification":[{"inlineContent":[{"text":"AVFoundation doesn’t support AVI format by default.","type":"text"}],"type":"paragraph"}]}],"type":"multiple-choice"},{"title":[{"inlineContent":[{"text":"Which delegate method is called when video recording is complete?","type":"text"}],"type":"paragraph"}],"content":[],"choices":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"fileOutput(_:didStartRecordingTo:from:)"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"text":"This method is called when recording starts.","type":"text"}],"type":"paragraph"}],"isCorrect":false},{"content":[{"type":"paragraph","inlineContent":[{"code":"fileOutput(_:didFinishRecordingTo:from:error:)","type":"codeVoice"}]}],"justification":[{"type":"paragraph","inlineContent":[{"text":"This method is called when recording is complete, providing access to the saved video through the file URL.","type":"text"}]}],"isCorrect":true},{"content":[{"type":"paragraph","inlineContent":[{"code":"fileOutput(_:didOutputSampleBuffer:from:)","type":"codeVoice"}]}],"justification":[{"type":"paragraph","inlineContent":[{"text":"This is a delegate method for AVCaptureVideoDataOutput.","type":"text"}]}],"isCorrect":false}],"type":"multiple-choice"}],"anchor":"Check-Your-Understanding","kind":"assessments"},{"action":{"overridingTitle":"Get started","isActive":true,"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer","overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"type":"reference"},"title":"Preview Layer (AVCaptureVideoPreviewLayer)","abstract":[{"type":"text","text":"Display the camera preview on screen with AVCaptureVideoPreviewLayer."},{"type":"text","text":" "},{"type":"text","text":"Implement real-time preview by connecting SwiftUI and UIKit."}],"featuredEyebrow":"Tutorial","kind":"callToAction"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/tutorials\/higavfoundation\/04-video-recording"]}],"metadata":{"category":"Building a Camera App with AVFoundation","categoryPathComponent":"Table-of-Contents","role":"project","title":"Video Recording"},"hierarchy":{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents","modules":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/Building-Foundations","projects":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/01-AVFoundation-Introduction","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/01-AVFoundation-Introduction#What-is-AVFoundation","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/01-AVFoundation-Introduction#Capture-Pipeline-Structure","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/01-AVFoundation-Introduction#Check-Your-Understanding","kind":"assessment"}]},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup#Initializing-Capture-Session","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup#Setting-Up-Camera-Input","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup#Starting-and-Stopping-Session","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup#Check-Your-Understanding","kind":"assessment"}]}]},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/Photos-and-Videos","projects":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#Photo-Output-Setup","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#Implementing-Photo-Capture","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#Saving-Photos","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#SwiftUI-Camera-View","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#Check-Your-Understanding","kind":"assessment"}]},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording#Movie-File-Output-Setup","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording#Starting-and-Stopping-Recording","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording#Recording-UI-Implementation","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording#Check-Your-Understanding","kind":"assessment"}]},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Understanding-PreviewLayer","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Connecting-SwiftUI-with-UIViewRepresentable","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Handling-Screen-Rotation","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Tap-to-Focus","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Check-Your-Understanding","kind":"assessment"}]}]},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/Advanced-Capture","projects":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Metadata-Output-Setup","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Processing-Barcode-Recognition","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Displaying-Scan-Area","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Complete-Barcode-Scanner","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Check-Your-Understanding","kind":"assessment"}]},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#AVAudioRecorder-Setup","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#Recording-Control","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#Level-Monitoring","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#Recording-File-Management","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#Check-Your-Understanding","kind":"assessment"}]}]},{"projects":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Composition-Basics","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Video-Trimming","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Video-Merging","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Export","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Check-Your-Understanding","kind":"assessment"}]},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#AVAudioSession-Basics","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#Categories-and-Options","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#Interruption-Handling","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#Route-Change-Handling","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#Check-Your-Understanding","kind":"assessment"}]},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter","sections":[{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Video-Data-Output-Setup","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Applying-CIFilter","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Rendering-with-Metal","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Filter-Selection-UI","kind":"task"},{"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Check-Your-Understanding","kind":"assessment"}]}],"reference":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/Editing-and-Finishing"}],"paths":[["doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents","doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/$volume","doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/Photos-and-Videos"]]},"schemaVersion":{"minor":3,"patch":0,"major":0},"identifier":{"url":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording","interfaceLanguage":"swift"},"kind":"project","references":{"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/01-AVFoundation-Introduction#What-is-AVFoundation":{"url":"\/tutorials\/higavfoundation\/01-avfoundation-introduction#What-is-AVFoundation","type":"section","abstract":[{"text":"AVFoundation is the core framework for media work on Apple platforms.","type":"text"},{"text":" ","type":"text"},{"text":"It provides various media features from camera capture to audio recording and video editing.","type":"text"}],"title":"What is AVFoundation?","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/01-AVFoundation-Introduction#What-is-AVFoundation","kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/05-Preview-Layer#Check-Your-Understanding":{"title":"Check Your Understanding","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Check-Your-Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"type":"link","url":"\/tutorials\/higavfoundation\/05-preview-layer#Check-Your-Understanding"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/03-Photo-Capture":{"title":"Photo Capture (AVCapturePhotoOutput)","estimatedTime":"25min","type":"topic","role":"project","url":"\/tutorials\/higavfoundation\/03-photo-capture","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture","abstract":[{"type":"text","text":"Capture high-quality photos using AVCapturePhotoOutput."},{"type":"text","text":" "},{"type":"text","text":"Implement various capture options like flash, HDR, and Live Photo."}],"kind":"project"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/06-Metadata-Capture#Displaying-Scan-Area":{"url":"\/tutorials\/higavfoundation\/06-metadata-capture#Displaying-Scan-Area","type":"section","abstract":[{"text":"Scan barcodes and QR codes with AVCaptureMetadataOutput.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"Recognize and process metadata in real-time."}],"title":"Displaying Scan Area","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Displaying-Scan-Area","kind":"section"},"04-add-audio-input.swift":{"fileName":"CameraManager.swift","syntax":"swift","fileType":"swift","highlights":[{"line":11},{"line":12},{"line":14},{"line":15},{"line":16},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":24},{"line":25},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":37},{"line":38}],"type":"file","content":["import AVFoundation","import SwiftUI","","@MainActor","class CameraManager: ObservableObject {","    let captureSession = AVCaptureSession()","    private let sessionQueue = DispatchQueue(label: \"camera.session.queue\")","    ","    let movieOutput = AVCaptureMovieFileOutput()","    ","    private var videoDeviceInput: AVCaptureDeviceInput?","    private var audioDeviceInput: AVCaptureDeviceInput?","    ","    \/\/ MARK: - Audio Input 추가","    ","    func addAudioInput() {","        sessionQueue.async { [self] in","            \/\/ 마이크 장치 가져오기","            guard let audioDevice = AVCaptureDevice.default(for: .audio) else {","                print(\"마이크를 찾을 수 없습니다.\")","                return","            }","            ","            do {","                let audioInput = try AVCaptureDeviceInput(device: audioDevice)","                ","                captureSession.beginConfiguration()","                defer { captureSession.commitConfiguration() }","                ","                if captureSession.canAddInput(audioInput) {","                    captureSession.addInput(audioInput)","                    audioDeviceInput = audioInput","                    print(\"✅ 오디오 입력 추가됨\")","                } else {","                    print(\"오디오 입력을 추가할 수 없습니다.\")","                }","            } catch {","                print(\"오디오 입력 생성 실패: \\(error)\")","            }","        }","    }","}"],"identifier":"04-add-audio-input.swift"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/09-Audio-Session":{"title":"Audio Session Management","estimatedTime":"20min","type":"topic","role":"project","url":"\/tutorials\/higavfoundation\/09-audio-session","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session","abstract":[{"text":"Manage your app’s audio behavior with AVAudioSession.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Implement categories, modes, and interruption handling."}],"kind":"project"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/05-Preview-Layer#Tap-to-Focus":{"title":"Tap to Focus","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/05-preview-layer#Tap-to-Focus","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Tap-to-Focus","abstract":[{"text":"Display the camera preview on screen with AVCaptureVideoPreviewLayer.","type":"text"},{"text":" ","type":"text"},{"text":"Implement real-time preview by connecting SwiftUI and UIKit.","type":"text"}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/06-Metadata-Capture#Processing-Barcode-Recognition":{"title":"Processing Barcode Recognition","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/06-metadata-capture#Processing-Barcode-Recognition","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Processing-Barcode-Recognition","abstract":[{"type":"text","text":"Scan barcodes and QR codes with AVCaptureMetadataOutput."},{"type":"text","text":" "},{"type":"text","text":"Recognize and process metadata in real-time."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/04-Video-Recording#Check-Your-Understanding":{"titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"url":"\/tutorials\/higavfoundation\/04-video-recording#Check-Your-Understanding","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording#Check-Your-Understanding","type":"link","title":"Check Your Understanding"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/09-Audio-Session#Check-Your-Understanding":{"type":"link","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"url":"\/tutorials\/higavfoundation\/09-audio-session#Check-Your-Understanding","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#Check-Your-Understanding","title":"Check Your Understanding"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/03-Photo-Capture#SwiftUI-Camera-View":{"title":"SwiftUI Camera View","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/03-photo-capture#SwiftUI-Camera-View","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#SwiftUI-Camera-View","abstract":[{"text":"Capture high-quality photos using AVCapturePhotoOutput.","type":"text"},{"text":" ","type":"text"},{"text":"Implement various capture options like flash, HDR, and Live Photo.","type":"text"}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/04-Video-Recording#Movie-File-Output-Setup":{"url":"\/tutorials\/higavfoundation\/04-video-recording#Movie-File-Output-Setup","type":"section","abstract":[{"type":"text","text":"Record video using AVCaptureMovieFileOutput."},{"text":" ","type":"text"},{"text":"Implement start\/stop recording, timer, and file saving.","type":"text"}],"title":"Movie File Output Setup","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording#Movie-File-Output-Setup","kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/08-Video-Editing#Composition-Basics":{"title":"Composition Basics","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/08-video-editing#Composition-Basics","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Composition-Basics","abstract":[{"type":"text","text":"Edit videos with AVMutableComposition."},{"type":"text","text":" "},{"type":"text","text":"Implement trimming, merging, and audio mixing."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/08-Video-Editing":{"title":"Video Editing (AVMutableComposition)","estimatedTime":"30min","type":"topic","role":"project","url":"\/tutorials\/higavfoundation\/08-video-editing","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing","abstract":[{"type":"text","text":"Edit videos with AVMutableComposition."},{"text":" ","type":"text"},{"type":"text","text":"Implement trimming, merging, and audio mixing."}],"kind":"project"},"04-recording-state.swift":{"fileName":"CameraManager.swift","syntax":"swift","fileType":"swift","highlights":[],"content":["import AVFoundation","import SwiftUI","import Combine","","@MainActor","class CameraManager: NSObject, ObservableObject {","    let captureSession = AVCaptureSession()","    private let sessionQueue = DispatchQueue(label: \"camera.session.queue\")","    ","    let movieOutput = AVCaptureMovieFileOutput()","    ","    \/\/ MARK: - Recording State","    ","    @Published var isRecording = false","    @Published var recordingDuration: TimeInterval = 0","    @Published var currentVideoURL: URL?","    ","    \/\/ 녹화 상태 변경 시 햅틱 피드백","    private let feedbackGenerator = UIImpactFeedbackGenerator(style: .medium)","    ","    func toggleRecording() {","        feedbackGenerator.prepare()","        ","        if isRecording {","            stopRecording()","        } else {","            startRecording()","        }","        ","        feedbackGenerator.impactOccurred()","    }","    ","    func startRecording() {","        guard !isRecording else { return }","        recordingDuration = 0","        ","        sessionQueue.async { [self] in","            let outputURL = createTemporaryFileURL()","            movieOutput.startRecording(to: outputURL, recordingDelegate: self)","        }","    }","    ","    func stopRecording() {","        guard isRecording else { return }","        ","        sessionQueue.async { [self] in","            movieOutput.stopRecording()","        }","    }","    ","    private func createTemporaryFileURL() -> URL {","        let tempDir = FileManager.default.temporaryDirectory","        let fileName = \"video_\\(UUID().uuidString).mov\"","        return tempDir.appendingPathComponent(fileName)","    }","}","","extension CameraManager: AVCaptureFileOutputRecordingDelegate {","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, didStartRecordingTo fileURL: URL, from connections: [AVCaptureConnection]) {}","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, didFinishRecordingTo outputFileURL: URL, from connections: [AVCaptureConnection], error: Error?) {}","}"],"type":"file","identifier":"04-recording-state.swift"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/08-Video-Editing#Video-Trimming":{"title":"Video Trimming","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/08-video-editing#Video-Trimming","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Video-Trimming","abstract":[{"type":"text","text":"Edit videos with AVMutableComposition."},{"type":"text","text":" "},{"type":"text","text":"Implement trimming, merging, and audio mixing."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/10-Realtime-Filter#Rendering-with-Metal":{"url":"\/tutorials\/higavfoundation\/10-realtime-filter#Rendering-with-Metal","type":"section","abstract":[{"text":"Apply Core Image filters to real-time camera preview.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Implement frame-by-frame processing with AVCaptureVideoDataOutput."}],"title":"Rendering with Metal","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Rendering-with-Metal","kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/05-Preview-Layer#Connecting-SwiftUI-with-UIViewRepresentable":{"title":"Connecting SwiftUI with UIViewRepresentable","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/05-preview-layer#Connecting-SwiftUI-with-UIViewRepresentable","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Connecting-SwiftUI-with-UIViewRepresentable","abstract":[{"text":"Display the camera preview on screen with AVCaptureVideoPreviewLayer.","type":"text"},{"text":" ","type":"text"},{"text":"Implement real-time preview by connecting SwiftUI and UIKit.","type":"text"}],"kind":"section"},"04-add-movie-output.swift":{"highlights":[{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":37},{"line":38},{"line":39},{"line":40}],"type":"file","syntax":"swift","content":["import AVFoundation","import SwiftUI","","@MainActor","class CameraManager: ObservableObject {","    let captureSession = AVCaptureSession()","    private let sessionQueue = DispatchQueue(label: \"camera.session.queue\")","    ","    let photoOutput = AVCapturePhotoOutput()","    let movieOutput = AVCaptureMovieFileOutput()","    ","    @Published var isRecording = false","    ","    func configureSession() {","        sessionQueue.async { [self] in","            captureSession.beginConfiguration()","            defer { captureSession.commitConfiguration() }","            ","            \/\/ 비디오 녹화를 위해 high 프리셋 사용","            captureSession.sessionPreset = .high","            ","            \/\/ 비디오 입력 추가 (이전 단계에서 구현)","            \/\/ ...","            ","            \/\/ Movie Output 추가","            if captureSession.canAddOutput(movieOutput) {","                captureSession.addOutput(movieOutput)","                ","                \/\/ 비디오 연결 설정","                if let connection = movieOutput.connection(with: .video) {","                    \/\/ 비디오 안정화 활성화","                    if connection.isVideoStabilizationSupported {","                        connection.preferredVideoStabilizationMode = .auto","                    }","                }","            } else {","                print(\"Movie Output을 추가할 수 없습니다.\")","            }","        }","    }","}"],"identifier":"04-add-movie-output.swift","fileName":"CameraManager.swift","fileType":"swift"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/02-AVCaptureSession-Setup#Setting-Up-Camera-Input":{"title":"Setting Up Camera Input","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/02-avcapturesession-setup#Setting-Up-Camera-Input","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup#Setting-Up-Camera-Input","abstract":[{"text":"AVCaptureSession is the core of the capture pipeline.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"It manages real-time capture by connecting camera input and various outputs."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/08-Video-Editing#Check-Your-Understanding":{"type":"link","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"url":"\/tutorials\/higavfoundation\/08-video-editing#Check-Your-Understanding","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Check-Your-Understanding","title":"Check Your Understanding"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/03-Photo-Capture#Implementing-Photo-Capture":{"url":"\/tutorials\/higavfoundation\/03-photo-capture#Implementing-Photo-Capture","type":"section","abstract":[{"type":"text","text":"Capture high-quality photos using AVCapturePhotoOutput."},{"type":"text","text":" "},{"text":"Implement various capture options like flash, HDR, and Live Photo.","type":"text"}],"title":"Implementing Photo Capture","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#Implementing-Photo-Capture","kind":"section"},"04-movie-output-property.swift":{"fileName":"CameraManager.swift","syntax":"swift","fileType":"swift","highlights":[],"type":"file","content":["import AVFoundation","import SwiftUI","","@MainActor","class CameraManager: ObservableObject {","    let captureSession = AVCaptureSession()","    private let sessionQueue = DispatchQueue(label: \"camera.session.queue\")","    ","    \/\/ 사진 촬영용","    let photoOutput = AVCapturePhotoOutput()","    ","    \/\/ 비디오 녹화용","    let movieOutput = AVCaptureMovieFileOutput()","    ","    private var videoDeviceInput: AVCaptureDeviceInput?","    private var audioDeviceInput: AVCaptureDeviceInput?","    ","    @Published var isSessionRunning = false","    @Published var isRecording = false","}"],"identifier":"04-movie-output-property.swift"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/03-Photo-Capture#Photo-Output-Setup":{"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#Photo-Output-Setup","type":"section","title":"Photo Output Setup","abstract":[{"text":"Capture high-quality photos using AVCapturePhotoOutput.","type":"text"},{"text":" ","type":"text"},{"text":"Implement various capture options like flash, HDR, and Live Photo.","type":"text"}],"url":"\/tutorials\/higavfoundation\/03-photo-capture#Photo-Output-Setup","kind":"section","role":"pseudoSymbol"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/02-AVCaptureSession-Setup#Initializing-Capture-Session":{"url":"\/tutorials\/higavfoundation\/02-avcapturesession-setup#Initializing-Capture-Session","type":"section","abstract":[{"text":"AVCaptureSession is the core of the capture pipeline.","type":"text"},{"text":" ","type":"text"},{"text":"It manages real-time capture by connecting camera input and various outputs.","type":"text"}],"title":"Initializing Capture Session","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup#Initializing-Capture-Session","kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/10-Realtime-Filter":{"title":"Real-time Filters (CIFilter)","estimatedTime":"30min","type":"topic","role":"project","url":"\/tutorials\/higavfoundation\/10-realtime-filter","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter","abstract":[{"type":"text","text":"Apply Core Image filters to real-time camera preview."},{"type":"text","text":" "},{"type":"text","text":"Implement frame-by-frame processing with AVCaptureVideoDataOutput."}],"kind":"project"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/01-AVFoundation-Introduction#Capture-Pipeline-Structure":{"url":"\/tutorials\/higavfoundation\/01-avfoundation-introduction#Capture-Pipeline-Structure","type":"section","abstract":[{"type":"text","text":"AVFoundation is the core framework for media work on Apple platforms."},{"type":"text","text":" "},{"text":"It provides various media features from camera capture to audio recording and video editing.","type":"text"}],"title":"Capture Pipeline Structure","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/01-AVFoundation-Introduction#Capture-Pipeline-Structure","kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/06-Metadata-Capture#Metadata-Output-Setup":{"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Metadata-Output-Setup","type":"section","title":"Metadata Output Setup","abstract":[{"text":"Scan barcodes and QR codes with AVCaptureMetadataOutput.","type":"text"},{"text":" ","type":"text"},{"text":"Recognize and process metadata in real-time.","type":"text"}],"url":"\/tutorials\/higavfoundation\/06-metadata-capture#Metadata-Output-Setup","kind":"section","role":"pseudoSymbol"},"doc://avfoundation.HIGAVFoundation/tutorials/Table-of-Contents/Building-Foundations":{"title":"Building Foundations","type":"topic","role":"article","url":"\/tutorials\/table-of-contents\/building-foundations","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/Building-Foundations","abstract":[],"kind":"article"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/10-Realtime-Filter#Filter-Selection-UI":{"title":"Filter Selection UI","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/10-realtime-filter#Filter-Selection-UI","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Filter-Selection-UI","abstract":[{"text":"Apply Core Image filters to real-time camera preview.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Implement frame-by-frame processing with AVCaptureVideoDataOutput."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/07-Audio-Recording#Check-Your-Understanding":{"type":"link","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"url":"\/tutorials\/higavfoundation\/07-audio-recording#Check-Your-Understanding","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#Check-Your-Understanding","title":"Check Your Understanding"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/07-Audio-Recording#AVAudioRecorder-Setup":{"url":"\/tutorials\/higavfoundation\/07-audio-recording#AVAudioRecorder-Setup","type":"section","abstract":[{"type":"text","text":"Record high-quality audio with AVAudioRecorder."},{"text":" ","type":"text"},{"text":"Implement recording level monitoring and file management.","type":"text"}],"title":"AVAudioRecorder Setup","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#AVAudioRecorder-Setup","kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/08-Video-Editing#Video-Merging":{"title":"Video Merging","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/08-video-editing#Video-Merging","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Video-Merging","abstract":[{"text":"Edit videos with AVMutableComposition.","type":"text"},{"text":" ","type":"text"},{"text":"Implement trimming, merging, and audio mixing.","type":"text"}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/05-Preview-Layer#Handling-Screen-Rotation":{"url":"\/tutorials\/higavfoundation\/05-preview-layer#Handling-Screen-Rotation","type":"section","abstract":[{"type":"text","text":"Display the camera preview on screen with AVCaptureVideoPreviewLayer."},{"type":"text","text":" "},{"type":"text","text":"Implement real-time preview by connecting SwiftUI and UIKit."}],"title":"Handling Screen Rotation","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Handling-Screen-Rotation","kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/08-Video-Editing#Export":{"title":"Export","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/08-video-editing#Export","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/08-Video-Editing#Export","abstract":[{"text":"Edit videos with AVMutableComposition.","type":"text"},{"text":" ","type":"text"},{"text":"Implement trimming, merging, and audio mixing.","type":"text"}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/02-AVCaptureSession-Setup#Starting-and-Stopping-Session":{"title":"Starting and Stopping Session","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/02-avcapturesession-setup#Starting-and-Stopping-Session","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup#Starting-and-Stopping-Session","abstract":[{"type":"text","text":"AVCaptureSession is the core of the capture pipeline."},{"type":"text","text":" "},{"type":"text","text":"It manages real-time capture by connecting camera input and various outputs."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/07-Audio-Recording#Recording-File-Management":{"title":"Recording File Management","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/07-audio-recording#Recording-File-Management","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#Recording-File-Management","abstract":[{"text":"Record high-quality audio with AVAudioRecorder.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Implement recording level monitoring and file management."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/06-Metadata-Capture":{"title":"Metadata Capture (Barcodes)","estimatedTime":"20min","type":"topic","role":"project","url":"\/tutorials\/higavfoundation\/06-metadata-capture","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture","abstract":[{"type":"text","text":"Scan barcodes and QR codes with AVCaptureMetadataOutput."},{"type":"text","text":" "},{"text":"Recognize and process metadata in real-time.","type":"text"}],"kind":"project"},"04-stop-recording.swift":{"fileName":"CameraManager.swift","syntax":"swift","fileType":"swift","highlights":[{"line":13},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":37},{"line":38},{"line":39},{"line":40},{"line":41}],"content":["import AVFoundation","import SwiftUI","","@MainActor","class CameraManager: NSObject, ObservableObject {","    let captureSession = AVCaptureSession()","    private let sessionQueue = DispatchQueue(label: \"camera.session.queue\")","    ","    let movieOutput = AVCaptureMovieFileOutput()","    ","    @Published var isRecording = false","    ","    \/\/ MARK: - Recording Controls","    ","    func startRecording() {","        guard !isRecording else { return }","        ","        sessionQueue.async { [self] in","            let outputURL = createTemporaryFileURL()","            movieOutput.startRecording(to: outputURL, recordingDelegate: self)","        }","    }","    ","    func stopRecording() {","        guard isRecording else { return }","        ","        sessionQueue.async { [self] in","            \/\/ stopRecording 호출 시 델리게이트의 didFinishRecording이 호출됨","            movieOutput.stopRecording()","        }","    }","    ","    \/\/\/ 녹화 토글 (시작\/중지)","    func toggleRecording() {","        if isRecording {","            stopRecording()","        } else {","            startRecording()","        }","    }","    ","    private func createTemporaryFileURL() -> URL {","        let tempDir = FileManager.default.temporaryDirectory","        let fileName = \"video_\\(Date().timeIntervalSince1970).mov\"","        return tempDir.appendingPathComponent(fileName)","    }","}","","extension CameraManager: AVCaptureFileOutputRecordingDelegate {","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, didStartRecordingTo fileURL: URL, from connections: [AVCaptureConnection]) {}","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, didFinishRecordingTo outputFileURL: URL, from connections: [AVCaptureConnection], error: Error?) {}","}"],"type":"file","identifier":"04-stop-recording.swift"},"04-record-button.swift":{"fileName":"CameraView.swift","syntax":"swift","fileType":"swift","highlights":[],"content":["import SwiftUI","","struct RecordButton: View {","    let isRecording: Bool","    let action: () -> Void","    ","    var body: some View {","        Button(action: action) {","            ZStack {","                \/\/ 외곽 원","                Circle()","                    .stroke(Color.white, lineWidth: 4)","                    .frame(width: 70, height: 70)","                ","                \/\/ 내부 (녹화 중: 빨간 사각형, 대기: 빨간 원)","                if isRecording {","                    \/\/ 녹화 중 - 정지 버튼 (사각형)","                    RoundedRectangle(cornerRadius: 4)","                        .fill(Color.red)","                        .frame(width: 28, height: 28)","                } else {","                    \/\/ 대기 - 녹화 버튼 (원)","                    Circle()","                        .fill(Color.red)","                        .frame(width: 54, height: 54)","                }","            }","        }","        .animation(.easeInOut(duration: 0.2), value: isRecording)","    }","}","","\/\/ MARK: - Preview","","#Preview {","    ZStack {","        Color.black","        ","        VStack(spacing: 40) {","            RecordButton(isRecording: false) {}","            RecordButton(isRecording: true) {}","        }","    }","}"],"type":"file","identifier":"04-record-button.swift"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/05-Preview-Layer":{"url":"\/tutorials\/higavfoundation\/05-preview-layer","estimatedTime":"20min","type":"topic","abstract":[{"text":"Display the camera preview on screen with AVCaptureVideoPreviewLayer.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Implement real-time preview by connecting SwiftUI and UIKit."}],"title":"Preview Layer (AVCaptureVideoPreviewLayer)","role":"project","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer","kind":"project"},"doc://avfoundation.HIGAVFoundation/tutorials/Table-of-Contents":{"title":"Create Your Own Camera App","type":"topic","role":"overview","url":"\/tutorials\/table-of-contents","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents","abstract":[{"type":"text","text":"Build a polished camera app with SwiftUI that supports"},{"type":"text","text":" "},{"type":"text","text":"photo capture, video recording, barcode scanning, and real-time filters"},{"type":"text","text":" "},{"type":"text","text":"using AVFoundation’s powerful media capture capabilities."}],"kind":"overview"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/01-AVFoundation-Introduction#Check-Your-Understanding":{"url":"\/tutorials\/higavfoundation\/01-avfoundation-introduction#Check-Your-Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"type":"link","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/01-AVFoundation-Introduction#Check-Your-Understanding","title":"Check Your Understanding"},"04-recording-timer.swift":{"fileName":"CameraManager.swift","syntax":"swift","fileType":"swift","highlights":[{"line":13},{"line":14},{"line":16},{"line":18},{"line":19},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":32},{"line":33},{"line":34},{"line":35},{"line":38},{"line":39},{"line":40},{"line":41},{"line":42},{"line":44},{"line":45},{"line":46},{"line":47},{"line":48},{"line":49},{"line":50},{"line":51},{"line":55},{"line":56},{"line":57},{"line":58},{"line":59},{"line":60},{"line":61},{"line":62},{"line":63},{"line":64},{"line":65}],"content":["import AVFoundation","import SwiftUI","import Combine","","@MainActor","class CameraManager: NSObject, ObservableObject {","    let captureSession = AVCaptureSession()","    let movieOutput = AVCaptureMovieFileOutput()","    ","    @Published var isRecording = false","    @Published var recordingDuration: TimeInterval = 0","    ","    private var recordingTimer: Timer?","    private var recordingStartTime: Date?","    ","    \/\/ MARK: - Recording Timer","    ","    private func startRecordingTimer() {","        recordingStartTime = Date()","        recordingDuration = 0","        ","        \/\/ 0.1초마다 업데이트","        recordingTimer = Timer.scheduledTimer(withTimeInterval: 0.1, repeats: true) { [weak self] _ in","            Task { @MainActor in","                guard let self = self,","                      let startTime = self.recordingStartTime else { return }","                self.recordingDuration = Date().timeIntervalSince(startTime)","            }","        }","    }","    ","    private func stopRecordingTimer() {","        recordingTimer?.invalidate()","        recordingTimer = nil","        recordingStartTime = nil","    }","    ","    \/\/\/ 녹화 시간을 포맷팅 (MM:SS)","    var formattedDuration: String {","        let minutes = Int(recordingDuration) \/ 60","        let seconds = Int(recordingDuration) % 60","        return String(format: \"%02d:%02d\", minutes, seconds)","    }","    ","    \/\/\/ 녹화 시간을 포맷팅 (MM:SS.ms)","    var formattedDurationWithMillis: String {","        let minutes = Int(recordingDuration) \/ 60","        let seconds = Int(recordingDuration) % 60","        let millis = Int((recordingDuration.truncatingRemainder(dividingBy: 1)) * 10)","        return String(format: \"%02d:%02d.%01d\", minutes, seconds, millis)","    }","}","","extension CameraManager: AVCaptureFileOutputRecordingDelegate {","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, didStartRecordingTo fileURL: URL, from connections: [AVCaptureConnection]) {","        Task { @MainActor in","            startRecordingTimer()","        }","    }","    ","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, didFinishRecordingTo outputFileURL: URL, from connections: [AVCaptureConnection], error: Error?) {","        Task { @MainActor in","            stopRecordingTimer()","        }","    }","}"],"type":"file","identifier":"04-recording-timer.swift"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/03-Photo-Capture#Check-Your-Understanding":{"titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#Check-Your-Understanding","title":"Check Your Understanding","type":"link","url":"\/tutorials\/higavfoundation\/03-photo-capture#Check-Your-Understanding"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/03-Photo-Capture#Saving-Photos":{"title":"Saving Photos","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/03-photo-capture#Saving-Photos","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/03-Photo-Capture#Saving-Photos","abstract":[{"type":"text","text":"Capture high-quality photos using AVCapturePhotoOutput."},{"type":"text","text":" "},{"text":"Implement various capture options like flash, HDR, and Live Photo.","type":"text"}],"kind":"section"},"04-timer-display.swift":{"fileName":"CameraView.swift","syntax":"swift","fileType":"swift","highlights":[{"line":3},{"line":4},{"line":8},{"line":9},{"line":10},{"line":12},{"line":13},{"line":14},{"line":16},{"line":17},{"line":18},{"line":19},{"line":21},{"line":22},{"line":23},{"line":24},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":35},{"line":36},{"line":37},{"line":38},{"line":39},{"line":40},{"line":41},{"line":42},{"line":43},{"line":44},{"line":45},{"line":46},{"line":47},{"line":48},{"line":49},{"line":50},{"line":57},{"line":58},{"line":59}],"content":["import SwiftUI","","struct RecordingTimerView: View {","    let duration: TimeInterval","    let isRecording: Bool","    ","    var body: some View {","        if isRecording {","            HStack(spacing: 8) {","                \/\/ 녹화 인디케이터 (깜빡이는 빨간 점)","                Circle()","                    .fill(Color.red)","                    .frame(width: 10, height: 10)","                    .modifier(BlinkingModifier())","                ","                \/\/ 녹화 시간","                Text(formattedDuration)","                    .font(.system(.headline, design: .monospaced))","                    .foregroundColor(.white)","            }","            .padding(.horizontal, 16)","            .padding(.vertical, 8)","            .background(Color.black.opacity(0.6))","            .clipShape(Capsule())","        }","    }","    ","    private var formattedDuration: String {","        let minutes = Int(duration) \/ 60","        let seconds = Int(duration) % 60","        return String(format: \"%02d:%02d\", minutes, seconds)","    }","}","","\/\/ MARK: - Blinking Modifier","","struct BlinkingModifier: ViewModifier {","    @State private var isVisible = true","    ","    func body(content: Content) -> some View {","        content","            .opacity(isVisible ? 1 : 0)","            .onAppear {","                withAnimation(.easeInOut(duration: 0.5).repeatForever()) {","                    isVisible.toggle()","                }","            }","    }","}","","\/\/ MARK: - Preview","","#Preview {","    ZStack {","        Color.black","        ","        VStack {","            RecordingTimerView(duration: 125, isRecording: true)","            RecordingTimerView(duration: 0, isRecording: false)","        }","    }","}"],"type":"file","identifier":"04-timer-display.swift"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/02-AVCaptureSession-Setup":{"title":"AVCaptureSession Setup","estimatedTime":"20min","type":"topic","role":"project","url":"\/tutorials\/higavfoundation\/02-avcapturesession-setup","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup","abstract":[{"type":"text","text":"AVCaptureSession is the core of the capture pipeline."},{"type":"text","text":" "},{"text":"It manages real-time capture by connecting camera input and various outputs.","type":"text"}],"kind":"project"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/02-AVCaptureSession-Setup#Check-Your-Understanding":{"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/02-AVCaptureSession-Setup#Check-Your-Understanding","url":"\/tutorials\/higavfoundation\/02-avcapturesession-setup#Check-Your-Understanding","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"type":"link"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/09-Audio-Session#AVAudioSession-Basics":{"title":"AVAudioSession Basics","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/09-audio-session#AVAudioSession-Basics","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#AVAudioSession-Basics","abstract":[{"text":"Manage your app’s audio behavior with AVAudioSession.","type":"text"},{"text":" ","type":"text"},{"text":"Implement categories, modes, and interruption handling.","type":"text"}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/01-AVFoundation-Introduction":{"title":"Introduction to AVFoundation & Architecture","estimatedTime":"15min","type":"topic","role":"project","url":"\/tutorials\/higavfoundation\/01-avfoundation-introduction","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/01-AVFoundation-Introduction","abstract":[{"type":"text","text":"AVFoundation is the core framework for media work on Apple platforms."},{"type":"text","text":" "},{"type":"text","text":"It provides various media features from camera capture to audio recording and video editing."}],"kind":"project"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/10-Realtime-Filter#Video-Data-Output-Setup":{"title":"Video Data Output Setup","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/10-realtime-filter#Video-Data-Output-Setup","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Video-Data-Output-Setup","abstract":[{"type":"text","text":"Apply Core Image filters to real-time camera preview."},{"type":"text","text":" "},{"type":"text","text":"Implement frame-by-frame processing with AVCaptureVideoDataOutput."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/10-Realtime-Filter#Check-Your-Understanding":{"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Check-Your-Understanding","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"type":"link","url":"\/tutorials\/higavfoundation\/10-realtime-filter#Check-Your-Understanding"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/05-Preview-Layer#Understanding-PreviewLayer":{"url":"\/tutorials\/higavfoundation\/05-preview-layer#Understanding-PreviewLayer","type":"section","abstract":[{"type":"text","text":"Display the camera preview on screen with AVCaptureVideoPreviewLayer."},{"type":"text","text":" "},{"type":"text","text":"Implement real-time preview by connecting SwiftUI and UIKit."}],"title":"Understanding PreviewLayer","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/05-Preview-Layer#Understanding-PreviewLayer","kind":"section"},"04-recording-delegate.swift":{"fileName":"CameraManager.swift","syntax":"swift","fileType":"swift","highlights":[],"type":"file","content":["import AVFoundation","import SwiftUI","","@MainActor","class CameraManager: NSObject, ObservableObject {","    let captureSession = AVCaptureSession()","    private let sessionQueue = DispatchQueue(label: \"camera.session.queue\")","    ","    let movieOutput = AVCaptureMovieFileOutput()","    ","    @Published var isRecording = false","}","","\/\/ MARK: - AVCaptureFileOutputRecordingDelegate","","extension CameraManager: AVCaptureFileOutputRecordingDelegate {","    ","    \/\/\/ 녹화 시작됨","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, ","                     didStartRecordingTo fileURL: URL, ","                     from connections: [AVCaptureConnection]) {","        print(\"🎬 녹화 시작: \\(fileURL.lastPathComponent)\")","        ","        Task { @MainActor in","            isRecording = true","        }","    }","    ","    \/\/\/ 녹화 완료됨","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, ","                     didFinishRecordingTo outputFileURL: URL, ","                     from connections: [AVCaptureConnection], ","                     error: Error?) {","        if let error = error {","            print(\"❌ 녹화 실패: \\(error.localizedDescription)\")","        } else {","            print(\"✅ 녹화 완료: \\(outputFileURL.lastPathComponent)\")","            \/\/ 사진 라이브러리에 저장 (다음 단계에서 구현)","        }","        ","        Task { @MainActor in","            isRecording = false","        }","    }","}"],"identifier":"04-recording-delegate.swift"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/04-Video-Recording#Starting-and-Stopping-Recording":{"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording#Starting-and-Stopping-Recording","type":"section","title":"Starting and Stopping Recording","abstract":[{"type":"text","text":"Record video using AVCaptureMovieFileOutput."},{"type":"text","text":" "},{"type":"text","text":"Implement start\/stop recording, timer, and file saving."}],"url":"\/tutorials\/higavfoundation\/04-video-recording#Starting-and-Stopping-Recording","kind":"section","role":"pseudoSymbol"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/09-Audio-Session#Categories-and-Options":{"title":"Categories and Options","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/09-audio-session#Categories-and-Options","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#Categories-and-Options","abstract":[{"type":"text","text":"Manage your app’s audio behavior with AVAudioSession."},{"type":"text","text":" "},{"type":"text","text":"Implement categories, modes, and interruption handling."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/07-Audio-Recording#Recording-Control":{"title":"Recording Control","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/07-audio-recording#Recording-Control","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#Recording-Control","abstract":[{"type":"text","text":"Record high-quality audio with AVAudioRecorder."},{"type":"text","text":" "},{"text":"Implement recording level monitoring and file management.","type":"text"}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/Table-of-Contents/Photos-and-Videos":{"url":"\/tutorials\/table-of-contents\/photos-and-videos","type":"topic","abstract":[],"title":"Photos and Videos","role":"article","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/Photos-and-Videos","kind":"article"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/06-Metadata-Capture#Check-Your-Understanding":{"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Check-Your-Understanding","title":"Check Your Understanding","url":"\/tutorials\/higavfoundation\/06-metadata-capture#Check-Your-Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"type":"link"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/09-Audio-Session#Route-Change-Handling":{"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#Route-Change-Handling","type":"section","title":"Route Change Handling","url":"\/tutorials\/higavfoundation\/09-audio-session#Route-Change-Handling","abstract":[{"text":"Manage your app’s audio behavior with AVAudioSession.","type":"text"},{"text":" ","type":"text"},{"text":"Implement categories, modes, and interruption handling.","type":"text"}],"kind":"section","role":"pseudoSymbol"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/10-Realtime-Filter#Applying-CIFilter":{"url":"\/tutorials\/higavfoundation\/10-realtime-filter#Applying-CIFilter","type":"section","abstract":[{"text":"Apply Core Image filters to real-time camera preview.","type":"text"},{"text":" ","type":"text"},{"text":"Implement frame-by-frame processing with AVCaptureVideoDataOutput.","type":"text"}],"title":"Applying CIFilter","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/10-Realtime-Filter#Applying-CIFilter","kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/09-Audio-Session#Interruption-Handling":{"title":"Interruption Handling","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/09-audio-session#Interruption-Handling","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/09-Audio-Session#Interruption-Handling","abstract":[{"type":"text","text":"Manage your app’s audio behavior with AVAudioSession."},{"text":" ","type":"text"},{"type":"text","text":"Implement categories, modes, and interruption handling."}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/07-Audio-Recording":{"title":"Audio Recording (AVAudioRecorder)","estimatedTime":"20min","type":"topic","role":"project","url":"\/tutorials\/higavfoundation\/07-audio-recording","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording","abstract":[{"text":"Record high-quality audio with AVAudioRecorder.","type":"text"},{"text":" ","type":"text"},{"text":"Implement recording level monitoring and file management.","type":"text"}],"kind":"project"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/04-Video-Recording":{"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording","type":"topic","estimatedTime":"25min","title":"Video Recording","abstract":[{"text":"Record video using AVCaptureMovieFileOutput.","type":"text"},{"type":"text","text":" "},{"text":"Implement start\/stop recording, timer, and file saving.","type":"text"}],"url":"\/tutorials\/higavfoundation\/04-video-recording","kind":"project","role":"project"},"doc://avfoundation.HIGAVFoundation/tutorials/Table-of-Contents/Advanced-Capture":{"url":"\/tutorials\/table-of-contents\/advanced-capture","type":"topic","abstract":[],"title":"Advanced Capture","role":"article","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/Advanced-Capture","kind":"article"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/07-Audio-Recording#Level-Monitoring":{"title":"Level Monitoring","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/07-audio-recording#Level-Monitoring","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/07-Audio-Recording#Level-Monitoring","abstract":[{"text":"Record high-quality audio with AVAudioRecorder.","type":"text"},{"type":"text","text":" "},{"text":"Implement recording level monitoring and file management.","type":"text"}],"kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/04-Video-Recording#Recording-UI-Implementation":{"url":"\/tutorials\/higavfoundation\/04-video-recording#Recording-UI-Implementation","type":"section","abstract":[{"text":"Record video using AVCaptureMovieFileOutput.","type":"text"},{"type":"text","text":" "},{"text":"Implement start\/stop recording, timer, and file saving.","type":"text"}],"title":"Recording UI Implementation","role":"pseudoSymbol","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/04-Video-Recording#Recording-UI-Implementation","kind":"section"},"doc://avfoundation.HIGAVFoundation/tutorials/HIGAVFoundation/06-Metadata-Capture#Complete-Barcode-Scanner":{"title":"Complete Barcode Scanner","type":"section","role":"pseudoSymbol","url":"\/tutorials\/higavfoundation\/06-metadata-capture#Complete-Barcode-Scanner","identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/HIGAVFoundation\/06-Metadata-Capture#Complete-Barcode-Scanner","abstract":[{"text":"Scan barcodes and QR codes with AVCaptureMetadataOutput.","type":"text"},{"text":" ","type":"text"},{"text":"Recognize and process metadata in real-time.","type":"text"}],"kind":"section"},"04-start-recording.swift":{"highlights":[{"line":13},{"line":14},{"line":15},{"line":16},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":34},{"line":35},{"line":36},{"line":37},{"line":38},{"line":41},{"line":42},{"line":43},{"line":44},{"line":45}],"content":["import AVFoundation","import SwiftUI","","@MainActor","class CameraManager: NSObject, ObservableObject {","    let captureSession = AVCaptureSession()","    private let sessionQueue = DispatchQueue(label: \"camera.session.queue\")","    ","    let movieOutput = AVCaptureMovieFileOutput()","    ","    @Published var isRecording = false","    ","    \/\/ MARK: - Start Recording","    ","    func startRecording() {","        guard !isRecording else { return }","        ","        sessionQueue.async { [self] in","            \/\/ 녹화 연결 확인","            guard let connection = movieOutput.connection(with: .video),","                  connection.isActive else {","                print(\"비디오 연결이 활성화되지 않았습니다.\")","                return","            }","            ","            \/\/ 임시 파일 URL 생성","            let outputURL = createTemporaryFileURL()","            ","            \/\/ 녹화 시작","            movieOutput.startRecording(to: outputURL, recordingDelegate: self)","        }","    }","    ","    \/\/\/ 고유한 임시 파일 URL 생성","    private func createTemporaryFileURL() -> URL {","        let tempDir = FileManager.default.temporaryDirectory","        let fileName = \"video_\\(Date().timeIntervalSince1970).mov\"","        return tempDir.appendingPathComponent(fileName)","    }","}","","extension CameraManager: AVCaptureFileOutputRecordingDelegate {","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, didStartRecordingTo fileURL: URL, from connections: [AVCaptureConnection]) {}","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, didFinishRecordingTo outputFileURL: URL, from connections: [AVCaptureConnection], error: Error?) {}","}"],"type":"file","syntax":"swift","identifier":"04-start-recording.swift","fileType":"swift","fileName":"CameraManager.swift"},"doc://avfoundation.HIGAVFoundation/tutorials/Table-of-Contents/Editing-and-Finishing":{"identifier":"doc:\/\/avfoundation.HIGAVFoundation\/tutorials\/Table-of-Contents\/Editing-and-Finishing","type":"topic","title":"Editing and Finishing","abstract":[],"url":"\/tutorials\/table-of-contents\/editing-and-finishing","kind":"article","role":"article"},"04-finish-recording.swift":{"highlights":[{"line":2},{"line":5},{"line":7},{"line":8},{"line":9},{"line":10},{"line":11},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":33},{"line":34},{"line":35},{"line":38},{"line":39},{"line":40},{"line":41},{"line":42},{"line":43},{"line":44},{"line":45},{"line":46},{"line":47},{"line":48},{"line":49},{"line":50},{"line":51},{"line":52},{"line":53},{"line":54},{"line":55},{"line":56},{"line":57}],"content":["import AVFoundation","import Photos","import SwiftUI","","extension CameraManager: AVCaptureFileOutputRecordingDelegate {","    ","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, ","                     didStartRecordingTo fileURL: URL, ","                     from connections: [AVCaptureConnection]) {","        Task { @MainActor in","            isRecording = true","        }","    }","    ","    nonisolated func fileOutput(_ output: AVCaptureFileOutput, ","                     didFinishRecordingTo outputFileURL: URL, ","                     from connections: [AVCaptureConnection], ","                     error: Error?) {","        Task { @MainActor in","            isRecording = false","        }","        ","        \/\/ 에러 확인","        if let error = error {","            print(\"녹화 중 오류 발생: \\(error.localizedDescription)\")","            ","            \/\/ 일부 에러는 파일이 정상 저장된 경우도 있음","            let nsError = error as NSError","            if nsError.userInfo[AVErrorRecordingSuccessfullyFinishedKey] as? Bool != true {","                return","            }","        }","        ","        \/\/ 사진 라이브러리에 저장","        saveVideoToLibrary(outputFileURL)","    }","    ","    private func saveVideoToLibrary(_ url: URL) {","        Task {","            do {","                let status = await PHPhotoLibrary.requestAuthorization(for: .addOnly)","                guard status == .authorized || status == .limited else {","                    print(\"사진 라이브러리 권한이 없습니다.\")","                    return","                }","                ","                try await PHPhotoLibrary.shared().performChanges {","                    PHAssetChangeRequest.creationRequestForAssetFromVideo(atFileURL: url)","                }","                ","                print(\"✅ 비디오가 앨범에 저장되었습니다.\")","                ","                \/\/ 임시 파일 삭제","                try? FileManager.default.removeItem(at: url)","            } catch {","                print(\"비디오 저장 실패: \\(error)\")","            }","        }","    }","}"],"syntax":"swift","type":"file","identifier":"04-finish-recording.swift","fileName":"CameraManager.swift","fileType":"swift"}}}