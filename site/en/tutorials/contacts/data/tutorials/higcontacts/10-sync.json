{"metadata":{"role":"project","categoryPathComponent":"Table-of-Contents","category":"Building a Contact Management App with Contacts","title":"Contact Synchronization"},"kind":"project","sections":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Learn how to track contact changes","type":"text"},{"text":" ","type":"text"},{"text":"and synchronize them with your app.","type":"text"}]}],"title":"Contact Synchronization","kind":"hero","chapter":"Contact Synchronization","estimatedTimeInMinutes":15},{"tasks":[{"stepsSection":[{"media":null,"code":"10-01-notification.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Subscribe to the CNContactStoreDidChange notification."}],"type":"paragraph"}],"caption":[]},{"media":null,"code":"10-02-history.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Fetch the change history."}],"type":"paragraph"}],"caption":[]},{"media":null,"code":"10-03-token.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Store and manage the History Token."}],"type":"paragraph"}],"caption":[]}],"anchor":"Detecting-Changes","contentSection":[{"mediaPosition":"trailing","content":[{"inlineContent":[{"type":"text","text":"Detect and process changes"},{"type":"text","text":" "},{"type":"text","text":"in the contacts database."}],"type":"paragraph"}],"kind":"contentAndMedia"}],"title":"Detecting Changes"},{"stepsSection":[{"media":null,"code":"10-04-event-type.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Distinguish change event types."}],"type":"paragraph"}],"caption":[]},{"media":null,"code":"10-05-added.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Process added contacts."}],"type":"paragraph"}],"caption":[]},{"media":null,"code":"10-06-updated.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Process modified contacts."}],"type":"paragraph"}],"caption":[]},{"media":null,"code":"10-07-deleted.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Process deleted contacts."}],"type":"paragraph"}],"caption":[]}],"anchor":"Processing-Change-Types","contentSection":[{"mediaPosition":"trailing","content":[{"inlineContent":[{"type":"text","text":"Process added, modified, and deleted contacts"},{"type":"text","text":" "},{"type":"text","text":"separately."}],"type":"paragraph"}],"kind":"contentAndMedia"}],"title":"Processing Change Types"},{"stepsSection":[{"media":null,"code":"10-08-background.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Set up background tasks."}],"type":"paragraph"}],"caption":[]},{"media":null,"code":"10-09-conflict.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Implement a conflict resolution strategy."}],"type":"paragraph"}],"caption":[]},{"media":null,"code":"10-10-batch.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Perform batch updates."}],"type":"paragraph"}],"caption":[]},{"media":null,"code":"10-11-complete.swift","runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Complete the full sync manager."}],"type":"paragraph"}],"caption":[]}],"anchor":"Background-Synchronization","contentSection":[{"mediaPosition":"trailing","content":[{"inlineContent":[{"type":"text","text":"Learn how to perform contact synchronization"},{"type":"text","text":" "},{"type":"text","text":"in the background."}],"type":"paragraph"}],"kind":"contentAndMedia"}],"title":"Background Synchronization"}],"kind":"tasks"},{"anchor":"Check-Your-Understanding","kind":"assessments","assessments":[{"type":"multiple-choice","choices":[{"isCorrect":true,"content":[{"inlineContent":[{"type":"text","text":"History Token"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"type":"text","text":"With a History Token, you can fetch only"},{"type":"text","text":" "},{"type":"text","text":"changes since the last sync."}],"type":"paragraph"}]},{"isCorrect":false,"content":[{"inlineContent":[{"type":"text","text":"Timestamp"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"type":"text","text":"The Contacts framework doesn’t provide"},{"type":"text","text":" "},{"type":"text","text":"timestamp-based tracking."}],"type":"paragraph"}]},{"isCorrect":false,"content":[{"inlineContent":[{"type":"text","text":"Version number"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"type":"text","text":"History Tokens are used, not version numbers."}],"type":"paragraph"}]}],"title":[{"type":"paragraph","inlineContent":[{"text":"What is used to track contact changes?","type":"text"}]}],"content":[]},{"type":"multiple-choice","choices":[{"isCorrect":true,"content":[{"inlineContent":[{"type":"codeVoice","code":"CNContactStoreDidChange"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"type":"text","text":"This notification detects contact changes."}],"type":"paragraph"}]},{"isCorrect":false,"content":[{"inlineContent":[{"type":"codeVoice","code":"CNContactsChanged"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"type":"text","text":"This notification name does not exist."}],"type":"paragraph"}]},{"isCorrect":false,"content":[{"inlineContent":[{"type":"codeVoice","code":"ContactsDatabaseUpdated"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"type":"text","text":"This notification name does not exist."}],"type":"paragraph"}]}],"title":[{"type":"paragraph","inlineContent":[{"text":"What is the notification for contacts database changes?","type":"text"}]}],"content":[]}]}],"variants":[{"paths":["\/tutorials\/higcontacts\/10-sync"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync"},"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents","modules":[{"projects":[{"sections":[{"kind":"task","reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction#What-is-the-Contacts-Framework"},{"kind":"task","reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction#Infoplist-Permission-Setup"},{"kind":"task","reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction#Implementing-Permission-Requests"},{"kind":"assessment","reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction#Check-Your-Understanding"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Introduction-to-Contacts-&-Permissions"},{"projects":[{"sections":[{"kind":"task","reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore#Creating-CNContactStore"},{"kind":"task","reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore#Detecting-Database-Changes"},{"kind":"task","reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore#Integration-with-SwiftUI"},{"kind":"assessment","reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore#Check-Your-Understanding"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Setting-Up-CNContactStore"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Searching-Contacts","projects":[{"sections":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search#CNContactFetchRequest-Basics","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search#Filtering-with-Predicates","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search#Sorting-and-Advanced-Search","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search#Check-Your-Understanding","kind":"assessment"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search"}]},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Contact-Details","projects":[{"sections":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail#Accessing-Basic-Information","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail#Accessing-Additional-Information","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail#Implementing-the-Detail-Screen","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail#Check-Your-Understanding","kind":"assessment"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail"}]},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Creating-Contacts","projects":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create","sections":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create#Creating-CNMutableContact","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create#Setting-Additional-Information","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create#Saving-Contacts","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create#Check-Your-Understanding","kind":"assessment"}]}]},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Editing-&-Deleting-Contacts","projects":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit","sections":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit#Editing-Contacts","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit#Editing-Phone-NumbersEmails","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit#Deleting-Contacts","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit#Check-Your-Understanding","kind":"assessment"}]}]},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Contact-Groups","projects":[{"sections":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups#Fetching-Groups","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups#Creating-and-Deleting-Groups","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups#Managing-Group-Membership","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups#Check-Your-Understanding","kind":"assessment"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups"}]},{"projects":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker","sections":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker#ContactsUI-Framework","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker#Contact-Selection-Options","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker#Handling-Selection-Results","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker#Check-Your-Understanding","kind":"assessment"}]}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/CNContactPickerViewController"},{"projects":[{"sections":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard#Exporting-vCards","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard#Importing-vCards","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard#File-Sharing-Integration","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard#Check-Your-Understanding","kind":"assessment"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/vCard-Import\/Export"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Contact-Synchronization","projects":[{"sections":[{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync#Detecting-Changes","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync#Processing-Change-Types","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync#Background-Synchronization","kind":"task"},{"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync#Check-Your-Understanding","kind":"assessment"}],"reference":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync"}]}],"paths":[["doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents","doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/$volume","doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Contact-Synchronization"]]},"references":{"doc://contacts.HIGContacts/tutorials/HIGContacts/06-Edit#Editing-Contacts":{"url":"\/tutorials\/higcontacts\/06-edit#Editing-Contacts","kind":"section","title":"Editing Contacts","abstract":[{"type":"text","text":"Learn how to edit existing contacts"},{"type":"text","text":" "},{"type":"text","text":"and delete them."}],"role":"pseudoSymbol","type":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit#Editing-Contacts"},"10-04-event-type.swift":{"identifier":"10-04-event-type.swift","syntax":"swift","content":["import Contacts","","class SyncManager {","    let store = CNContactStore()","    ","    @available(iOS 18.0, *)","    func processEvents(_ events: [CNChangeHistoryEvent]) {","        for event in events {","            switch event {","            case let addEvent as CNChangeHistoryAddContactEvent:","                \/\/ 연락처 추가됨","                let contact = addEvent.contact","                handleAddedContact(contact)","                ","            case let updateEvent as CNChangeHistoryUpdateContactEvent:","                \/\/ 연락처 수정됨","                let contact = updateEvent.contact","                handleUpdatedContact(contact)","                ","            case let deleteEvent as CNChangeHistoryDeleteContactEvent:","                \/\/ 연락처 삭제됨","                let identifier = deleteEvent.contactIdentifier","                handleDeletedContact(identifier: identifier)","                ","            case let addGroupEvent as CNChangeHistoryAddGroupEvent:","                \/\/ 그룹 추가됨","                let group = addGroupEvent.group","                print(\"그룹 추가: \\(group.name)\")","                ","            case let deleteGroupEvent as CNChangeHistoryDeleteGroupEvent:","                \/\/ 그룹 삭제됨","                let identifier = deleteGroupEvent.groupIdentifier","                print(\"그룹 삭제: \\(identifier)\")","                ","            default:","                break","            }","        }","    }","    ","    private func handleAddedContact(_ contact: CNContact) {}","    private func handleUpdatedContact(_ contact: CNContact) {}","    private func handleDeletedContact(identifier: String) {}","}"],"fileName":"SyncManager.swift","highlights":[],"fileType":"swift","type":"file"},"doc://contacts.HIGContacts/tutorials/HIGContacts/03-Search#Filtering-with-Predicates":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search#Filtering-with-Predicates","kind":"section","title":"Filtering with Predicates","abstract":[{"type":"text","text":"Learn how to search contacts using various conditions"},{"type":"text","text":" "},{"type":"text","text":"and how to use Predicates."}],"role":"pseudoSymbol","type":"section","url":"\/tutorials\/higcontacts\/03-search#Filtering-with-Predicates"},"doc://contacts.HIGContacts/tutorials/HIGContacts/08-Picker#Handling-Selection-Results":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker#Handling-Selection-Results","kind":"section","title":"Handling Selection Results","abstract":[{"type":"text","text":"Use the system contact picker UI to let"},{"type":"text","text":" "},{"type":"text","text":"users select contacts."}],"role":"pseudoSymbol","type":"section","url":"\/tutorials\/higcontacts\/08-picker#Handling-Selection-Results"},"doc://contacts.HIGContacts/tutorials/HIGContacts/04-Detail":{"kind":"project","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail","role":"project","title":"Contact Details","abstract":[{"type":"text","text":"Learn how to access various properties of CNContact"},{"type":"text","text":" "},{"type":"text","text":"and display contact details."}],"estimatedTime":"12min","url":"\/tutorials\/higcontacts\/04-detail","type":"topic"},"doc://contacts.HIGContacts/tutorials/HIGContacts/07-Groups#Managing-Group-Membership":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups#Managing-Group-Membership","kind":"section","title":"Managing Group Membership","abstract":[{"type":"text","text":"Learn how to create and manage contact groups,"},{"type":"text","text":" "},{"type":"text","text":"and add\/remove contacts from groups."}],"role":"pseudoSymbol","type":"section","url":"\/tutorials\/higcontacts\/07-groups#Managing-Group-Membership"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/vCard-Import/Export":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/vCard-Import\/Export","kind":"article","title":"vCard Import\/Export","abstract":[],"role":"article","type":"topic","url":"\/tutorials\/table-of-contents\/vcard-import\/export"},"doc://contacts.HIGContacts/tutorials/HIGContacts/10-Sync":{"type":"topic","estimatedTime":"15min","kind":"project","title":"Contact Synchronization","abstract":[{"type":"text","text":"Learn how to track contact changes"},{"type":"text","text":" "},{"text":"and synchronize them with your app.","type":"text"}],"role":"project","url":"\/tutorials\/higcontacts\/10-sync","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync"},"doc://contacts.HIGContacts/tutorials/HIGContacts/05-Create#Creating-CNMutableContact":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create#Creating-CNMutableContact","kind":"section","title":"Creating CNMutableContact","abstract":[{"type":"text","text":"Learn how to create new contacts"},{"type":"text","text":" "},{"type":"text","text":"and save them."}],"role":"pseudoSymbol","type":"section","url":"\/tutorials\/higcontacts\/05-create#Creating-CNMutableContact"},"doc://contacts.HIGContacts/tutorials/HIGContacts/09-vCard#Check-Your-Understanding":{"type":"link","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard#Check-Your-Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"url":"\/tutorials\/higcontacts\/09-vcard#Check-Your-Understanding","title":"Check Your Understanding"},"doc://contacts.HIGContacts/tutorials/HIGContacts/09-vCard#Exporting-vCards":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard#Exporting-vCards","role":"pseudoSymbol","title":"Exporting vCards","abstract":[{"text":"Learn how to import and export contacts","type":"text"},{"type":"text","text":" "},{"type":"text","text":"in vCard format."}],"url":"\/tutorials\/higcontacts\/09-vcard#Exporting-vCards","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/08-Picker#Contact-Selection-Options":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker#Contact-Selection-Options","role":"pseudoSymbol","title":"Contact Selection Options","abstract":[{"type":"text","text":"Use the system contact picker UI to let"},{"type":"text","text":" "},{"type":"text","text":"users select contacts."}],"url":"\/tutorials\/higcontacts\/08-picker#Contact-Selection-Options","type":"section"},"10-01-notification.swift":{"fileType":"swift","syntax":"swift","content":["import Contacts","import Combine","","class SyncManager {","    let store = CNContactStore()","    ","    private var cancellables = Set<AnyCancellable>()","    ","    init() {","        \/\/ 연락처 변경 알림 구독","        NotificationCenter.default","            .publisher(for: .CNContactStoreDidChange)","            .sink { [weak self] notification in","                self?.handleContactsChanged(notification)","            }","            .store(in: &cancellables)","    }","    ","    private func handleContactsChanged(_ notification: Notification) {","        print(\"연락처 데이터베이스가 변경되었습니다\")","        ","        \/\/ 변경사항 처리","        Task {","            await processChanges()","        }","    }","    ","    private func processChanges() async {","        \/\/ 변경사항 처리 로직","    }","}"],"fileName":"SyncManager.swift","highlights":[],"type":"file","identifier":"10-01-notification.swift"},"10-05-added.swift":{"fileType":"swift","syntax":"swift","content":["import Contacts","","class SyncManager {","    let store = CNContactStore()","    ","    \/\/ 로컬 데이터베이스 또는 서버에 동기화","    var onContactAdded: ((CNContact) -> Void)?","    ","    func handleAddedContact(_ contact: CNContact) {","        let fullName = CNContactFormatter.string(from: contact, style: .fullName) ?? \"\"","        print(\"새 연락처 추가됨: \\(fullName)\")","        ","        \/\/ 로컬 캐시 업데이트","        addToLocalCache(contact)","        ","        \/\/ 서버에 동기화 (필요시)","        syncToServer(contact: contact, action: .add)","        ","        \/\/ 콜백 호출","        onContactAdded?(contact)","    }","    ","    private func addToLocalCache(_ contact: CNContact) {","        \/\/ 로컬 캐시에 추가","    }","    ","    private func syncToServer(contact: CNContact, action: SyncAction) {","        \/\/ 서버 동기화 로직","    }","}","","enum SyncAction {","    case add","    case update","    case delete","}"],"fileName":"SyncManager.swift","highlights":[{"line":6},{"line":7},{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36}],"type":"file","identifier":"10-05-added.swift"},"doc://contacts.HIGContacts/tutorials/HIGContacts/04-Detail#Check-Your-Understanding":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail#Check-Your-Understanding","type":"link","url":"\/tutorials\/higcontacts\/04-detail#Check-Your-Understanding","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}]},"doc://contacts.HIGContacts/tutorials/HIGContacts/01-Introduction#What-is-the-Contacts-Framework":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction#What-is-the-Contacts-Framework","role":"pseudoSymbol","title":"What is the Contacts Framework?","abstract":[{"type":"text","text":"Learn the core concepts of the Contacts framework and"},{"type":"text","text":" "},{"type":"text","text":"how to set up permissions for accessing contacts."}],"url":"\/tutorials\/higcontacts\/01-introduction#What-is-the-Contacts-Framework","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/04-Detail#Implementing-the-Detail-Screen":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail#Implementing-the-Detail-Screen","role":"pseudoSymbol","title":"Implementing the Detail Screen","abstract":[{"type":"text","text":"Learn how to access various properties of CNContact"},{"type":"text","text":" "},{"type":"text","text":"and display contact details."}],"url":"\/tutorials\/higcontacts\/04-detail#Implementing-the-Detail-Screen","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/05-Create#Setting-Additional-Information":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create#Setting-Additional-Information","kind":"section","title":"Setting Additional Information","abstract":[{"text":"Learn how to create new contacts","type":"text"},{"text":" ","type":"text"},{"text":"and save them.","type":"text"}],"role":"pseudoSymbol","type":"section","url":"\/tutorials\/higcontacts\/05-create#Setting-Additional-Information"},"10-11-complete.swift":{"type":"file","syntax":"swift","content":["import Contacts","import Combine","import Observation","","@Observable","class SyncManager {","    let store = CNContactStore()","    ","    var isSyncing = false","    var lastSyncDate: Date?","    var pendingChanges = 0","    ","    private var cancellables = Set<AnyCancellable>()","    private let tokenKey = \"ContactsHistoryToken\"","    ","    init() {","        setupNotifications()","    }","    ","    private func setupNotifications() {","        NotificationCenter.default","            .publisher(for: .CNContactStoreDidChange)","            .debounce(for: .seconds(1), scheduler: RunLoop.main)","            .sink { [weak self] _ in","                Task { @MainActor in","                    await self?.sync()","                }","            }","            .store(in: &cancellables)","    }","    ","    @MainActor","    func sync() async {","        guard !isSyncing else { return }","        isSyncing = true","        defer { isSyncing = false }","        ","        do {","            if #available(iOS 18.0, *) {","                try await syncWithHistory()","            } else {","                try await fullSync()","            }","            ","            lastSyncDate = Date()","        } catch {","            print(\"동기화 실패: \\(error)\")","        }","    }","    ","    @available(iOS 18.0, *)","    private func syncWithHistory() async throws {","        let token = UserDefaults.standard.data(forKey: tokenKey)","        ","        let request = CNChangeHistoryFetchRequest()","        request.startingToken = token","        request.additionalContactKeyDescriptors = [","            CNContactFormatter.descriptorForRequiredKeys(for: .fullName),","            CNContactPhoneNumbersKey as CNKeyDescriptor","        ]","        ","        let enumerator = try store.enumeratorForChangeHistory(matching: request)","        ","        while let event = enumerator.nextObject() as? CNChangeHistoryEvent {","            await processEvent(event)","        }","        ","        \/\/ 새 토큰 저장","        if let newToken = enumerator.currentHistoryToken {","            UserDefaults.standard.set(newToken, forKey: tokenKey)","        }","    }","    ","    private func fullSync() async throws {","        \/\/ iOS 18 미만: 전체 동기화","    }","    ","    @available(iOS 18.0, *)","    private func processEvent(_ event: CNChangeHistoryEvent) async {","        switch event {","        case let add as CNChangeHistoryAddContactEvent:","            pendingChanges += 1","            \/\/ 서버에 추가 동기화","            ","        case let update as CNChangeHistoryUpdateContactEvent:","            pendingChanges += 1","            \/\/ 서버에 업데이트 동기화","            ","        case let delete as CNChangeHistoryDeleteContactEvent:","            pendingChanges += 1","            \/\/ 서버에서 삭제","            ","        default:","            break","        }","    }","}"],"fileName":"SyncManager.swift","highlights":[{"line":2},{"line":3},{"line":5},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":38},{"line":39},{"line":40},{"line":42},{"line":44},{"line":45},{"line":46},{"line":47},{"line":51},{"line":52},{"line":53},{"line":55},{"line":56},{"line":57},{"line":58},{"line":59},{"line":60},{"line":61},{"line":62},{"line":63},{"line":64},{"line":65},{"line":67},{"line":68},{"line":69},{"line":70},{"line":71},{"line":73},{"line":74},{"line":75},{"line":76},{"line":77},{"line":78},{"line":79},{"line":80},{"line":81},{"line":82},{"line":83},{"line":84},{"line":85},{"line":86},{"line":87},{"line":88},{"line":89},{"line":90},{"line":91},{"line":92},{"line":93},{"line":94}],"fileType":"swift","identifier":"10-11-complete.swift"},"doc://contacts.HIGContacts/tutorials/HIGContacts/08-Picker#Check-Your-Understanding":{"url":"\/tutorials\/higcontacts\/08-picker#Check-Your-Understanding","type":"link","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"title":"Check Your Understanding","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker#Check-Your-Understanding"},"doc://contacts.HIGContacts/tutorials/HIGContacts/10-Sync#Check-Your-Understanding":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync#Check-Your-Understanding","type":"link","url":"\/tutorials\/higcontacts\/10-sync#Check-Your-Understanding","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}]},"doc://contacts.HIGContacts/tutorials/HIGContacts/09-vCard#File-Sharing-Integration":{"url":"\/tutorials\/higcontacts\/09-vcard#File-Sharing-Integration","kind":"section","title":"File Sharing Integration","abstract":[{"type":"text","text":"Learn how to import and export contacts"},{"type":"text","text":" "},{"type":"text","text":"in vCard format."}],"role":"pseudoSymbol","type":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard#File-Sharing-Integration"},"doc://contacts.HIGContacts/tutorials/HIGContacts/02-ContactStore#Creating-CNContactStore":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore#Creating-CNContactStore","role":"pseudoSymbol","title":"Creating CNContactStore","abstract":[{"type":"text","text":"Learn how to properly set up and manage"},{"type":"text","text":" "},{"type":"text","text":"a CNContactStore for use throughout your app."}],"url":"\/tutorials\/higcontacts\/02-contactstore#Creating-CNContactStore","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/03-Search#Sorting-and-Advanced-Search":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search#Sorting-and-Advanced-Search","kind":"section","title":"Sorting and Advanced Search","abstract":[{"type":"text","text":"Learn how to search contacts using various conditions"},{"type":"text","text":" "},{"text":"and how to use Predicates.","type":"text"}],"role":"pseudoSymbol","url":"\/tutorials\/higcontacts\/03-search#Sorting-and-Advanced-Search","type":"section"},"10-07-deleted.swift":{"type":"file","syntax":"swift","content":["import Contacts","","class SyncManager {","    let store = CNContactStore()","    ","    var onContactDeleted: ((String) -> Void)?","    ","    func handleDeletedContact(identifier: String) {","        print(\"연락처 삭제됨: \\(identifier)\")","        ","        \/\/ 로컬 캐시에서 제거","        removeFromLocalCache(identifier: identifier)","        ","        \/\/ 서버에 동기화","        syncDeleteToServer(identifier: identifier)","        ","        \/\/ 콜백 호출","        onContactDeleted?(identifier)","    }","    ","    private func removeFromLocalCache(identifier: String) {","        \/\/ identifier로 로컬 캐시에서 제거","    }","    ","    private func syncDeleteToServer(identifier: String) {","        \/\/ 서버에 삭제 알림","    }","}"],"fileName":"SyncManager.swift","highlights":[{"line":6},{"line":8},{"line":9},{"line":11},{"line":12},{"line":15},{"line":18},{"line":21},{"line":22},{"line":25},{"line":26}],"fileType":"swift","identifier":"10-07-deleted.swift"},"doc://contacts.HIGContacts/tutorials/HIGContacts/10-Sync#Processing-Change-Types":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync#Processing-Change-Types","role":"pseudoSymbol","abstract":[{"text":"Learn how to track contact changes","type":"text"},{"text":" ","type":"text"},{"text":"and synchronize them with your app.","type":"text"}],"title":"Processing Change Types","url":"\/tutorials\/higcontacts\/10-sync#Processing-Change-Types","type":"section"},"10-08-background.swift":{"type":"file","syntax":"swift","content":["import Contacts","import BackgroundTasks","","class SyncManager {","    let store = CNContactStore()","    ","    static let backgroundTaskIdentifier = \"com.example.contacts.sync\"","    ","    \/\/ 백그라운드 작업 등록","    func registerBackgroundTask() {","        BGTaskScheduler.shared.register(","            forTaskWithIdentifier: Self.backgroundTaskIdentifier,","            using: nil","        ) { task in","            self.handleBackgroundSync(task: task as! BGAppRefreshTask)","        }","    }","    ","    \/\/ 백그라운드 동기화 예약","    func scheduleBackgroundSync() {","        let request = BGAppRefreshTaskRequest(","            identifier: Self.backgroundTaskIdentifier","        )","        request.earliestBeginDate = Date(timeIntervalSinceNow: 15 * 60) \/\/ 15분 후","        ","        do {","            try BGTaskScheduler.shared.submit(request)","        } catch {","            print(\"백그라운드 작업 예약 실패: \\(error)\")","        }","    }","    ","    \/\/ 백그라운드 동기화 수행","    private func handleBackgroundSync(task: BGAppRefreshTask) {","        \/\/ 작업 만료 핸들러","        task.expirationHandler = {","            \/\/ 정리 작업","        }","        ","        Task {","            do {","                await performSync()","                task.setTaskCompleted(success: true)","            } catch {","                task.setTaskCompleted(success: false)","            }","            ","            \/\/ 다음 동기화 예약","            scheduleBackgroundSync()","        }","    }","    ","    private func performSync() async {","        \/\/ 동기화 수행","    }","}"],"fileName":"SyncManager.swift","highlights":[],"fileType":"swift","identifier":"10-08-background.swift"},"doc://contacts.HIGContacts/tutorials/HIGContacts/06-Edit#Editing-Phone-NumbersEmails":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit#Editing-Phone-NumbersEmails","role":"pseudoSymbol","title":"Editing Phone Numbers\/Emails","abstract":[{"type":"text","text":"Learn how to edit existing contacts"},{"type":"text","text":" "},{"type":"text","text":"and delete them."}],"url":"\/tutorials\/higcontacts\/06-edit#Editing-Phone-NumbersEmails","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/08-Picker":{"kind":"project","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker","role":"project","title":"CNContactPickerViewController","abstract":[{"text":"Use the system contact picker UI to let","type":"text"},{"text":" ","type":"text"},{"text":"users select contacts.","type":"text"}],"estimatedTime":"12min","url":"\/tutorials\/higcontacts\/08-picker","type":"topic"},"doc://contacts.HIGContacts/tutorials/HIGContacts/10-Sync#Detecting-Changes":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync#Detecting-Changes","role":"pseudoSymbol","abstract":[{"type":"text","text":"Learn how to track contact changes"},{"type":"text","text":" "},{"type":"text","text":"and synchronize them with your app."}],"title":"Detecting Changes","url":"\/tutorials\/higcontacts\/10-sync#Detecting-Changes","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/07-Groups#Check-Your-Understanding":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups#Check-Your-Understanding","type":"link","url":"\/tutorials\/higcontacts\/07-groups#Check-Your-Understanding","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}]},"10-09-conflict.swift":{"type":"file","syntax":"swift","content":["import Contacts","","class SyncManager {","    let store = CNContactStore()","    ","    enum ConflictResolution {","        case useLocal","        case useRemote","        case merge","        case askUser","    }","    ","    var conflictResolutionStrategy: ConflictResolution = .merge","    ","    func resolveConflict(","        localContact: CNContact,","        remoteContact: CNContact","    ) -> CNMutableContact {","        guard let merged = localContact.mutableCopy() as? CNMutableContact else {","            fatalError(\"변환 실패\")","        }","        ","        switch conflictResolutionStrategy {","        case .useLocal:","            return merged","            ","        case .useRemote:","            return remoteContact.mutableCopy() as! CNMutableContact","            ","        case .merge:","            \/\/ 양쪽 데이터 병합","            \/\/ 예: 전화번호 합치기","            var phones = Set(localContact.phoneNumbers.map { $0.value.stringValue })","            for phone in remoteContact.phoneNumbers {","                if !phones.contains(phone.value.stringValue) {","                    var newPhones = merged.phoneNumbers","                    newPhones.append(phone)","                    merged.phoneNumbers = newPhones","                }","            }","            return merged","            ","        case .askUser:","            \/\/ UI로 사용자에게 선택 요청","            return merged","        }","    }","}"],"fileName":"SyncManager.swift","highlights":[{"line":6},{"line":7},{"line":8},{"line":9},{"line":10},{"line":13},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":37},{"line":38},{"line":39},{"line":41},{"line":43},{"line":44},{"line":45}],"fileType":"swift","identifier":"10-09-conflict.swift"},"doc://contacts.HIGContacts/tutorials/HIGContacts/05-Create#Check-Your-Understanding":{"titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"type":"link","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create#Check-Your-Understanding","title":"Check Your Understanding","url":"\/tutorials\/higcontacts\/05-create#Check-Your-Understanding"},"10-06-updated.swift":{"identifier":"10-06-updated.swift","syntax":"swift","content":["import Contacts","","class SyncManager {","    let store = CNContactStore()","    ","    var onContactUpdated: ((CNContact) -> Void)?","    ","    func handleUpdatedContact(_ contact: CNContact) {","        let fullName = CNContactFormatter.string(from: contact, style: .fullName) ?? \"\"","        print(\"연락처 수정됨: \\(fullName)\")","        ","        \/\/ 어떤 필드가 변경되었는지 확인하려면","        \/\/ 이전 상태와 비교 필요","        ","        \/\/ 로컬 캐시 업데이트","        updateLocalCache(contact)","        ","        \/\/ 서버에 동기화","        syncToServer(contact: contact, action: .update)","        ","        \/\/ 콜백 호출","        onContactUpdated?(contact)","    }","    ","    private func updateLocalCache(_ contact: CNContact) {","        \/\/ identifier로 기존 항목 찾아서 업데이트","        let identifier = contact.identifier","        \/\/ ...","    }","    ","    private func syncToServer(contact: CNContact, action: SyncAction) {","        \/\/ 서버 동기화 로직","    }","}"],"fileName":"SyncManager.swift","highlights":[{"line":6},{"line":8},{"line":10},{"line":12},{"line":13},{"line":14},{"line":16},{"line":18},{"line":19},{"line":22},{"line":25},{"line":26},{"line":27},{"line":28}],"fileType":"swift","type":"file"},"doc://contacts.HIGContacts/tutorials/HIGContacts/08-Picker#ContactsUI-Framework":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/08-Picker#ContactsUI-Framework","role":"pseudoSymbol","title":"ContactsUI Framework","abstract":[{"type":"text","text":"Use the system contact picker UI to let"},{"type":"text","text":" "},{"type":"text","text":"users select contacts."}],"url":"\/tutorials\/higcontacts\/08-picker#ContactsUI-Framework","type":"section"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents":{"kind":"overview","role":"overview","type":"topic","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents","title":"Building a Contact Management App with Contacts","url":"\/tutorials\/table-of-contents","abstract":[{"text":"Access iOS contact data to build","type":"text"},{"text":" ","type":"text"},{"text":"a complete contact management app.","type":"text"}]},"doc://contacts.HIGContacts/tutorials/HIGContacts/09-vCard":{"url":"\/tutorials\/higcontacts\/09-vcard","estimatedTime":"12min","kind":"project","title":"vCard Import\/Export","abstract":[{"type":"text","text":"Learn how to import and export contacts"},{"type":"text","text":" "},{"text":"in vCard format.","type":"text"}],"role":"project","type":"topic","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard"},"doc://contacts.HIGContacts/tutorials/HIGContacts/05-Create":{"type":"topic","estimatedTime":"12min","kind":"project","title":"Creating Contacts","abstract":[{"text":"Learn how to create new contacts","type":"text"},{"text":" ","type":"text"},{"text":"and save them.","type":"text"}],"role":"project","url":"\/tutorials\/higcontacts\/05-create","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create"},"doc://contacts.HIGContacts/tutorials/HIGContacts/01-Introduction#Check-Your-Understanding":{"type":"link","title":"Check Your Understanding","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction#Check-Your-Understanding","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"url":"\/tutorials\/higcontacts\/01-introduction#Check-Your-Understanding"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/Searching-Contacts":{"kind":"article","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Searching-Contacts","role":"article","abstract":[],"title":"Searching Contacts","url":"\/tutorials\/table-of-contents\/searching-contacts","type":"topic"},"doc://contacts.HIGContacts/tutorials/HIGContacts/02-ContactStore#Detecting-Database-Changes":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore#Detecting-Database-Changes","role":"pseudoSymbol","title":"Detecting Database Changes","abstract":[{"type":"text","text":"Learn how to properly set up and manage"},{"type":"text","text":" "},{"type":"text","text":"a CNContactStore for use throughout your app."}],"url":"\/tutorials\/higcontacts\/02-contactstore#Detecting-Database-Changes","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/10-Sync#Background-Synchronization":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/10-Sync#Background-Synchronization","role":"pseudoSymbol","title":"Background Synchronization","abstract":[{"text":"Learn how to track contact changes","type":"text"},{"text":" ","type":"text"},{"text":"and synchronize them with your app.","type":"text"}],"url":"\/tutorials\/higcontacts\/10-sync#Background-Synchronization","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/01-Introduction":{"kind":"project","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction","role":"project","title":"Introduction to Contacts & Permissions","abstract":[{"type":"text","text":"Learn the core concepts of the Contacts framework and"},{"text":" ","type":"text"},{"text":"how to set up permissions for accessing contacts.","type":"text"}],"estimatedTime":"10min","url":"\/tutorials\/higcontacts\/01-introduction","type":"topic"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/Contact-Details":{"kind":"article","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Contact-Details","role":"article","title":"Contact Details","abstract":[],"url":"\/tutorials\/table-of-contents\/contact-details","type":"topic"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/Editing-&-Deleting-Contacts":{"kind":"article","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Editing-&-Deleting-Contacts","role":"article","abstract":[],"title":"Editing & Deleting Contacts","url":"\/tutorials\/table-of-contents\/editing-&-deleting-contacts","type":"topic"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/CNContactPickerViewController":{"type":"topic","kind":"article","title":"CNContactPickerViewController","abstract":[],"role":"article","url":"\/tutorials\/table-of-contents\/cncontactpickerviewcontroller","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/CNContactPickerViewController"},"doc://contacts.HIGContacts/tutorials/HIGContacts/06-Edit#Check-Your-Understanding":{"type":"link","title":"Check Your Understanding","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit#Check-Your-Understanding","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"url":"\/tutorials\/higcontacts\/06-edit#Check-Your-Understanding"},"doc://contacts.HIGContacts/tutorials/HIGContacts/03-Search#Check-Your-Understanding":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search#Check-Your-Understanding","type":"link","url":"\/tutorials\/higcontacts\/03-search#Check-Your-Understanding","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}]},"doc://contacts.HIGContacts/tutorials/HIGContacts/03-Search#CNContactFetchRequest-Basics":{"url":"\/tutorials\/higcontacts\/03-search#CNContactFetchRequest-Basics","kind":"section","title":"CNContactFetchRequest Basics","abstract":[{"type":"text","text":"Learn how to search contacts using various conditions"},{"type":"text","text":" "},{"type":"text","text":"and how to use Predicates."}],"role":"pseudoSymbol","type":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search#CNContactFetchRequest-Basics"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/Contact-Synchronization":{"kind":"article","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Contact-Synchronization","role":"article","title":"Contact Synchronization","abstract":[],"url":"\/tutorials\/table-of-contents\/contact-synchronization","type":"topic"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/Setting-Up-CNContactStore":{"kind":"article","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Setting-Up-CNContactStore","role":"article","abstract":[],"title":"Setting Up CNContactStore","url":"\/tutorials\/table-of-contents\/setting-up-cncontactstore","type":"topic"},"doc://contacts.HIGContacts/tutorials/HIGContacts/01-Introduction#Infoplist-Permission-Setup":{"url":"\/tutorials\/higcontacts\/01-introduction#Infoplist-Permission-Setup","kind":"section","title":"Info.plist Permission Setup","abstract":[{"type":"text","text":"Learn the core concepts of the Contacts framework and"},{"text":" ","type":"text"},{"text":"how to set up permissions for accessing contacts.","type":"text"}],"role":"pseudoSymbol","type":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction#Infoplist-Permission-Setup"},"doc://contacts.HIGContacts/tutorials/HIGContacts/05-Create#Saving-Contacts":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/05-Create#Saving-Contacts","kind":"section","title":"Saving Contacts","abstract":[{"type":"text","text":"Learn how to create new contacts"},{"type":"text","text":" "},{"type":"text","text":"and save them."}],"role":"pseudoSymbol","url":"\/tutorials\/higcontacts\/05-create#Saving-Contacts","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/07-Groups#Creating-and-Deleting-Groups":{"url":"\/tutorials\/higcontacts\/07-groups#Creating-and-Deleting-Groups","kind":"section","title":"Creating and Deleting Groups","abstract":[{"text":"Learn how to create and manage contact groups,","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"and add\/remove contacts from groups."}],"role":"pseudoSymbol","type":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups#Creating-and-Deleting-Groups"},"doc://contacts.HIGContacts/tutorials/HIGContacts/04-Detail#Accessing-Additional-Information":{"url":"\/tutorials\/higcontacts\/04-detail#Accessing-Additional-Information","kind":"section","title":"Accessing Additional Information","abstract":[{"type":"text","text":"Learn how to access various properties of CNContact"},{"type":"text","text":" "},{"text":"and display contact details.","type":"text"}],"role":"pseudoSymbol","type":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail#Accessing-Additional-Information"},"doc://contacts.HIGContacts/tutorials/HIGContacts/01-Introduction#Implementing-Permission-Requests":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/01-Introduction#Implementing-Permission-Requests","kind":"section","title":"Implementing Permission Requests","abstract":[{"type":"text","text":"Learn the core concepts of the Contacts framework and"},{"type":"text","text":" "},{"type":"text","text":"how to set up permissions for accessing contacts."}],"role":"pseudoSymbol","url":"\/tutorials\/higcontacts\/01-introduction#Implementing-Permission-Requests","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/02-ContactStore":{"type":"topic","estimatedTime":"12min","kind":"project","title":"Setting Up CNContactStore","abstract":[{"text":"Learn how to properly set up and manage","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"a CNContactStore for use throughout your app."}],"role":"project","url":"\/tutorials\/higcontacts\/02-contactstore","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/Introduction-to-Contacts-&-Permissions":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Introduction-to-Contacts-&-Permissions","kind":"article","title":"Introduction to Contacts & Permissions","abstract":[],"role":"article","type":"topic","url":"\/tutorials\/table-of-contents\/introduction-to-contacts-&-permissions"},"doc://contacts.HIGContacts/tutorials/HIGContacts/03-Search":{"kind":"project","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/03-Search","role":"project","title":"Searching Contacts (Predicate)","abstract":[{"type":"text","text":"Learn how to search contacts using various conditions"},{"type":"text","text":" "},{"text":"and how to use Predicates.","type":"text"}],"estimatedTime":"15min","url":"\/tutorials\/higcontacts\/03-search","type":"topic"},"10-03-token.swift":{"fileType":"swift","content":["import Contacts","import Foundation","","class SyncManager {","    let store = CNContactStore()","    ","    private let tokenKey = \"ContactsHistoryToken\"","    ","    \/\/ History Token 저장","    func saveToken(_ token: Data) {","        UserDefaults.standard.set(token, forKey: tokenKey)","    }","    ","    \/\/ History Token 로드","    func loadToken() -> Data? {","        UserDefaults.standard.data(forKey: tokenKey)","    }","    ","    \/\/ 현재 토큰 가져오기 (iOS 18+)","    @available(iOS 18.0, *)","    func getCurrentToken() throws -> Data? {","        let request = CNChangeHistoryFetchRequest()","        let enumerator = try store.enumeratorForChangeHistory(matching: request)","        ","        \/\/ 끝까지 진행하여 현재 토큰 획득","        while enumerator.nextObject() != nil {}","        ","        return enumerator.currentHistoryToken","    }","}"],"syntax":"swift","fileName":"SyncManager.swift","highlights":[{"line":2},{"line":7},{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":21},{"line":25},{"line":26},{"line":28}],"type":"file","identifier":"10-03-token.swift"},"doc://contacts.HIGContacts/tutorials/HIGContacts/09-vCard#Importing-vCards":{"identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/09-vCard#Importing-vCards","kind":"section","title":"Importing vCards","abstract":[{"type":"text","text":"Learn how to import and export contacts"},{"type":"text","text":" "},{"type":"text","text":"in vCard format."}],"role":"pseudoSymbol","type":"section","url":"\/tutorials\/higcontacts\/09-vcard#Importing-vCards"},"doc://contacts.HIGContacts/tutorials/HIGContacts/02-ContactStore#Check-Your-Understanding":{"titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"type":"link","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore#Check-Your-Understanding","title":"Check Your Understanding","url":"\/tutorials\/higcontacts\/02-contactstore#Check-Your-Understanding"},"doc://contacts.HIGContacts/tutorials/HIGContacts/02-ContactStore#Integration-with-SwiftUI":{"url":"\/tutorials\/higcontacts\/02-contactstore#Integration-with-SwiftUI","kind":"section","title":"Integration with SwiftUI","abstract":[{"type":"text","text":"Learn how to properly set up and manage"},{"type":"text","text":" "},{"type":"text","text":"a CNContactStore for use throughout your app."}],"role":"pseudoSymbol","type":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/02-ContactStore#Integration-with-SwiftUI"},"doc://contacts.HIGContacts/tutorials/HIGContacts/06-Edit#Deleting-Contacts":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit#Deleting-Contacts","role":"pseudoSymbol","title":"Deleting Contacts","abstract":[{"type":"text","text":"Learn how to edit existing contacts"},{"type":"text","text":" "},{"type":"text","text":"and delete them."}],"url":"\/tutorials\/higcontacts\/06-edit#Deleting-Contacts","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/06-Edit":{"kind":"project","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/06-Edit","role":"project","abstract":[{"type":"text","text":"Learn how to edit existing contacts"},{"text":" ","type":"text"},{"type":"text","text":"and delete them."}],"title":"Editing & Deleting Contacts","estimatedTime":"12min","url":"\/tutorials\/higcontacts\/06-edit","type":"topic"},"doc://contacts.HIGContacts/tutorials/HIGContacts/04-Detail#Accessing-Basic-Information":{"kind":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/04-Detail#Accessing-Basic-Information","role":"pseudoSymbol","title":"Accessing Basic Information","abstract":[{"type":"text","text":"Learn how to access various properties of CNContact"},{"type":"text","text":" "},{"type":"text","text":"and display contact details."}],"url":"\/tutorials\/higcontacts\/04-detail#Accessing-Basic-Information","type":"section"},"doc://contacts.HIGContacts/tutorials/HIGContacts/07-Groups":{"kind":"project","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups","role":"project","abstract":[{"type":"text","text":"Learn how to create and manage contact groups,"},{"text":" ","type":"text"},{"text":"and add\/remove contacts from groups.","type":"text"}],"title":"Contact Groups","estimatedTime":"12min","url":"\/tutorials\/higcontacts\/07-groups","type":"topic"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/Contact-Groups":{"kind":"article","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Contact-Groups","role":"article","title":"Contact Groups","abstract":[],"url":"\/tutorials\/table-of-contents\/contact-groups","type":"topic"},"10-02-history.swift":{"identifier":"10-02-history.swift","syntax":"swift","content":["import Contacts","","class SyncManager {","    let store = CNContactStore()","    ","    \/\/ iOS 18+에서 사용 가능한 Change History API","    @available(iOS 18.0, *)","    func fetchChangeHistory(since token: Data?) async throws -> [CNChangeHistoryEvent] {","        let request = CNChangeHistoryFetchRequest()","        ","        \/\/ 이전 토큰이 있으면 해당 시점 이후 변경사항만","        if let token = token {","            request.startingToken = token","        }","        ","        \/\/ 필요한 키 지정","        request.additionalContactKeyDescriptors = [","            CNContactFormatter.descriptorForRequiredKeys(for: .fullName)","        ]","        ","        var events: [CNChangeHistoryEvent] = []","        ","        let enumerator = try store.enumeratorForChangeHistory(matching: request)","        ","        while let result = enumerator.nextObject() as? CNChangeHistoryEvent {","            events.append(result)","        }","        ","        \/\/ 현재 토큰 저장","        \/\/ enumerator.currentHistoryToken","        ","        return events","    }","}"],"fileName":"SyncManager.swift","highlights":[{"line":6},{"line":7},{"line":8},{"line":9},{"line":11},{"line":12},{"line":13},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32}],"fileType":"swift","type":"file"},"10-10-batch.swift":{"fileType":"swift","content":["import Contacts","","class SyncManager {","    let store = CNContactStore()","    ","    \/\/ 여러 연락처를 한 번에 저장 (배치 처리)","    func batchSave(contacts: [CNMutableContact]) throws {","        let saveRequest = CNSaveRequest()","        ","        for contact in contacts {","            if contact.identifier.isEmpty {","                \/\/ 새 연락처","                saveRequest.add(contact, toContainerWithIdentifier: nil)","            } else {","                \/\/ 기존 연락처 업데이트","                saveRequest.update(contact)","            }","        }","        ","        try store.execute(saveRequest)","    }","    ","    \/\/ 청크 단위로 처리 (대량 데이터)","    func batchSaveInChunks(","        contacts: [CNMutableContact],","        chunkSize: Int = 100","    ) throws {","        let chunks = contacts.chunked(into: chunkSize)","        ","        for (index, chunk) in chunks.enumerated() {","            try batchSave(contacts: chunk)","            print(\"청크 \\(index + 1)\/\\(chunks.count) 저장 완료\")","        }","    }","}","","extension Array {","    func chunked(into size: Int) -> [[Element]] {","        stride(from: 0, to: count, by: size).map {","            Array(self[$0..<Swift.min($0 + size, count)])","        }","    }","}"],"syntax":"swift","fileName":"SyncManager.swift","highlights":[{"line":6},{"line":7},{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":30},{"line":31},{"line":32},{"line":36},{"line":37},{"line":38},{"line":39},{"line":40},{"line":41},{"line":42},{"line":43}],"type":"file","identifier":"10-10-batch.swift"},"doc://contacts.HIGContacts/tutorials/Table-of-Contents/Creating-Contacts":{"kind":"article","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/Table-of-Contents\/Creating-Contacts","role":"article","abstract":[],"title":"Creating Contacts","url":"\/tutorials\/table-of-contents\/creating-contacts","type":"topic"},"doc://contacts.HIGContacts/tutorials/HIGContacts/07-Groups#Fetching-Groups":{"url":"\/tutorials\/higcontacts\/07-groups#Fetching-Groups","kind":"section","title":"Fetching Groups","abstract":[{"type":"text","text":"Learn how to create and manage contact groups,"},{"type":"text","text":" "},{"text":"and add\/remove contacts from groups.","type":"text"}],"role":"pseudoSymbol","type":"section","identifier":"doc:\/\/contacts.HIGContacts\/tutorials\/HIGContacts\/07-Groups#Fetching-Groups"}}}