{"kind":"project","schemaVersion":{"major":0,"patch":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents","doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/$volume","doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Multiple-Accessories"]],"modules":[{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Basics","projects":[{"sections":[{"kind":"task","reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/01-Basics#Getting-Started"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/01-Basics"}]},{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Core-Features","projects":[{"sections":[{"kind":"task","reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/02-Core#Implementation"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/02-Core"}]},{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Practical-Application","projects":[{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/03-Practice","sections":[{"kind":"task","reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/03-Practice#Completion"}]}]},{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Discovery-UI","projects":[{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/04-Discovery-UI","sections":[{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/04-Discovery-UI#Setting-Up-Discovery-Descriptor","kind":"task"},{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/04-Discovery-UI#Configuring-Picker-Display-Item","kind":"task"}]}]},{"projects":[{"sections":[{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/05-Pairing-Flow#Handling-Session-Events","kind":"task"},{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/05-Pairing-Flow#Pairing-State-Machine","kind":"task"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/05-Pairing-Flow"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Pairing-Flow"},{"projects":[{"sections":[{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/06-Connection-State#Real-time-Connection-Monitoring","kind":"task"},{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/06-Connection-State#Reconnection-Logic","kind":"task"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/06-Connection-State"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Connection-State-Management"},{"projects":[{"sections":[{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/07-Multiple-Accessories#Accessory-Collection-Management","kind":"task"},{"kind":"task","reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/07-Multiple-Accessories#Handling-Concurrent-Connections"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/07-Multiple-Accessories"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Multiple-Accessories"},{"projects":[{"sections":[{"kind":"task","reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/08-Firmware-Updates#Version-Check-and-Download"},{"kind":"task","reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/08-Firmware-Updates#OTA-Update-Transfer"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/08-Firmware-Updates"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Firmware-Updates"},{"projects":[{"sections":[{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/09-Error-Handling#Error-Type-Classification","kind":"task"},{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/09-Error-Handling#User-Friendly-Error-Messages","kind":"task"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/09-Error-Handling"}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Error-Handling"},{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Production-Checklist","projects":[{"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/10-Production-Checklist","sections":[{"kind":"task","reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/10-Production-Checklist#Permissions-and-Privacy"},{"kind":"task","reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/10-Production-Checklist#Testing-and-Verification"}]}]}],"reference":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents"},"variants":[{"paths":["\/tutorials\/higaccessorysetupkit\/07-multiple-accessories"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/07-Multiple-Accessories"},"metadata":{"title":"Managing Multiple Accessories","category":"Accessory Pairing","categoryPathComponent":"Table-of-Contents","role":"project"},"sections":[{"title":"Managing Multiple Accessories","chapter":"Multiple Accessories","kind":"hero","estimatedTimeInMinutes":30,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Learn how to manage multiple accessories simultaneously."},{"type":"text","text":" "},{"type":"text","text":"Implement accessory list management, grouping, and priority settings."}]}]},{"tasks":[{"title":"Accessory Collection Management","contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Design data structures for efficient management of multiple accessories."},{"type":"text","text":" "},{"type":"text","text":"Optimize add, remove, and query operations."}]}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"anchor":"Accessory-Collection-Management","stepsSection":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Implement a store to manage the accessory collection."}]}],"caption":[],"type":"step","media":null,"runtimePreview":null,"code":"07-accessory-store.swift"},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a SwiftUI view to display the accessory list."}]}],"caption":[],"type":"step","media":null,"runtimePreview":null,"code":"07-accessory-list.swift"}]},{"contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Solve concurrency issues that may occur when communicating"},{"text":" ","type":"text"},{"type":"text","text":"with multiple accessories simultaneously using Swift Concurrency."}]}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"anchor":"Handling-Concurrent-Connections","title":"Handling Concurrent Connections","stepsSection":[{"type":"step","code":"07-accessory-actor.swift","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use actors to safely manage concurrent access."}]}],"media":null,"caption":[]},{"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Send parallel commands to multiple accessories using TaskGroup."}]}],"code":"07-parallel-commands.swift","caption":[],"media":null}]}],"kind":"tasks"},{"featuredEyebrow":"Tutorial","kind":"callToAction","abstract":[{"text":"Implement secure firmware updates for accessories.","type":"text"},{"type":"text","text":" "},{"text":"Learn the process of version checking, downloading, transfer, and verification.","type":"text"}],"title":"Firmware Updates","action":{"isActive":true,"type":"reference","overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/08-Firmware-Updates","overridingTitle":"Get started"}}],"references":{"07-parallel-commands.swift":{"content":["import Foundation","","\/\/ 여러 액세서리에 병렬로 명령 전송","@MainActor","class ParallelCommandExecutor {","    private let connectionActor = AccessoryConnectionActor()","    ","    \/\/ TaskGroup을 사용한 병렬 명령 실행","    func sendCommandToAll(_ command: Data) async -> [UUID: Result<Data, Error>] {","        let accessoryIDs = await connectionActor.getAllConnectedIDs()","        ","        return await withTaskGroup(of: (UUID, Result<Data, Error>).self) { group in","            for id in accessoryIDs {","                group.addTask {","                    do {","                        let response = try await self.sendCommand(command, to: id)","                        return (id, .success(response))","                    } catch {","                        return (id, .failure(error))","                    }","                }","            }","            ","            var results: [UUID: Result<Data, Error>] = [:]","            for await (id, result) in group {","                results[id] = result","            }","            return results","        }","    }","    ","    \/\/ 개별 액세서리에 명령 전송","    private func sendCommand(_ command: Data, to accessoryID: UUID) async throws -> Data {","        guard let peripheral = await connectionActor.getPeripheral(for: accessoryID) else {","            throw AccessoryError.notConnected","        }","        ","        \/\/ 실제 BLE 특성에 쓰기","        return try await withCheckedThrowingContinuation { continuation in","            \/\/ CBPeripheral writeValue 호출","            \/\/ 응답은 delegate에서 continuation.resume으로 전달","        }","    }","    ","    \/\/ 모든 기기 상태 동시 조회","    func queryAllStatus() async -> [UUID: DeviceStatus] {","        let statusCommand = Data([0x01, 0x00]) \/\/ 상태 조회 명령","        let results = await sendCommandToAll(statusCommand)","        ","        var statuses: [UUID: DeviceStatus] = [:]","        for (id, result) in results {","            if case .success(let data) = result {","                statuses[id] = DeviceStatus(from: data)","            }","        }","        return statuses","    }","}","","enum AccessoryError: Error {","    case notConnected","    case timeout","    case invalidResponse","}","","struct DeviceStatus {","    let batteryLevel: Int","    let isActive: Bool","    ","    init(from data: Data) {","        batteryLevel = Int(data[0])","        isActive = data[1] == 1","    }","}"],"type":"file","highlights":[],"syntax":"swift","fileName":"ParallelCommands.swift","fileType":"swift","identifier":"07-parallel-commands.swift"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/06-Connection-State#Real-time-Connection-Monitoring":{"role":"pseudoSymbol","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/06-Connection-State#Real-time-Connection-Monitoring","url":"\/tutorials\/higaccessorysetupkit\/06-connection-state#Real-time-Connection-Monitoring","kind":"section","type":"section","abstract":[{"type":"text","text":"Track and manage the connection state of paired accessories in real-time."},{"type":"text","text":" "},{"type":"text","text":"Implement disconnection, reconnection, and background handling."}],"title":"Real-time Connection Monitoring"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Error-Handling":{"kind":"article","title":"Error Handling","url":"\/tutorials\/table-of-contents\/error-handling","type":"topic","role":"article","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Error-Handling","abstract":[]},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/10-Production-Checklist":{"url":"\/tutorials\/higaccessorysetupkit\/10-production-checklist","abstract":[{"type":"text","text":"Verify items that need to be checked before app release."},{"text":" ","type":"text"},{"type":"text","text":"Review permissions, privacy, performance, and App Store requirements."}],"type":"topic","kind":"project","title":"Production Checklist","role":"project","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/10-Production-Checklist","estimatedTime":"20min"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/10-Production-Checklist#Testing-and-Verification":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/10-Production-Checklist#Testing-and-Verification","type":"section","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/10-production-checklist#Testing-and-Verification","abstract":[{"text":"Verify items that need to be checked before app release.","type":"text"},{"text":" ","type":"text"},{"text":"Review permissions, privacy, performance, and App Store requirements.","type":"text"}],"role":"pseudoSymbol","title":"Testing and Verification"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Firmware-Updates":{"role":"article","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Firmware-Updates","url":"\/tutorials\/table-of-contents\/firmware-updates","kind":"article","type":"topic","title":"Firmware Updates","abstract":[]},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents":{"role":"overview","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents","url":"\/tutorials\/table-of-contents","kind":"overview","type":"topic","abstract":[{"type":"text","text":"Learn how to securely connect Bluetooth and Wi-Fi accessories"},{"type":"text","text":" "},{"type":"text","text":"using AccessorySetupKit with the system standard UI."}],"title":"Accessory Pairing"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/04-Discovery-UI#Setting-Up-Discovery-Descriptor":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/04-Discovery-UI#Setting-Up-Discovery-Descriptor","type":"section","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/04-discovery-ui#Setting-Up-Discovery-Descriptor","abstract":[{"type":"text","text":"Implement a user-friendly accessory discovery screen using"},{"type":"text","text":" "},{"type":"text","text":"ASDiscoveryDescriptor and ASPickerDisplayItem."}],"role":"pseudoSymbol","title":"Setting Up Discovery Descriptor"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/10-Production-Checklist#Permissions-and-Privacy":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/10-Production-Checklist#Permissions-and-Privacy","type":"section","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/10-production-checklist#Permissions-and-Privacy","abstract":[{"text":"Verify items that need to be checked before app release.","type":"text"},{"text":" ","type":"text"},{"text":"Review permissions, privacy, performance, and App Store requirements.","type":"text"}],"role":"pseudoSymbol","title":"Permissions and Privacy"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Discovery-UI":{"url":"\/tutorials\/table-of-contents\/discovery-ui","abstract":[],"type":"topic","kind":"article","title":"Discovery UI","role":"article","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Discovery-UI"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/07-Multiple-Accessories#Handling-Concurrent-Connections":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/07-Multiple-Accessories#Handling-Concurrent-Connections","type":"section","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/07-multiple-accessories#Handling-Concurrent-Connections","abstract":[{"text":"Learn how to manage multiple accessories simultaneously.","type":"text"},{"text":" ","type":"text"},{"text":"Implement accessory list management, grouping, and priority settings.","type":"text"}],"role":"pseudoSymbol","title":"Handling Concurrent Connections"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/08-Firmware-Updates":{"role":"project","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/08-Firmware-Updates","url":"\/tutorials\/higaccessorysetupkit\/08-firmware-updates","kind":"project","estimatedTime":"35min","type":"topic","abstract":[{"text":"Implement secure firmware updates for accessories.","type":"text"},{"text":" ","type":"text"},{"text":"Learn the process of version checking, downloading, transfer, and verification.","type":"text"}],"title":"Firmware Updates"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/03-Practice":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/03-Practice","type":"topic","role":"project","kind":"project","url":"\/tutorials\/higaccessorysetupkit\/03-practice","abstract":[{"type":"text","text":"Apply to a real app."}],"estimatedTime":"20min","title":"Practical Application"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/04-Discovery-UI":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/04-Discovery-UI","type":"topic","role":"project","kind":"project","url":"\/tutorials\/higaccessorysetupkit\/04-discovery-ui","abstract":[{"text":"Implement a user-friendly accessory discovery screen using","type":"text"},{"text":" ","type":"text"},{"text":"ASDiscoveryDescriptor and ASPickerDisplayItem.","type":"text"}],"estimatedTime":"25min","title":"Implementing Discovery UI"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/09-Error-Handling#User-Friendly-Error-Messages":{"url":"\/tutorials\/higaccessorysetupkit\/09-error-handling#User-Friendly-Error-Messages","abstract":[{"text":"Properly handle various errors that can occur in AccessorySetupKit","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"and guide users appropriately."}],"type":"section","kind":"section","title":"User-Friendly Error Messages","role":"pseudoSymbol","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/09-Error-Handling#User-Friendly-Error-Messages"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/06-Connection-State":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/06-Connection-State","type":"topic","role":"project","kind":"project","url":"\/tutorials\/higaccessorysetupkit\/06-connection-state","abstract":[{"type":"text","text":"Track and manage the connection state of paired accessories in real-time."},{"type":"text","text":" "},{"text":"Implement disconnection, reconnection, and background handling.","type":"text"}],"estimatedTime":"25min","title":"Connection State Management"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Production-Checklist":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Production-Checklist","type":"topic","kind":"article","url":"\/tutorials\/table-of-contents\/production-checklist","abstract":[],"role":"article","title":"Production Checklist"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Basics":{"url":"\/tutorials\/table-of-contents\/basics","abstract":[],"type":"topic","kind":"article","title":"Basics","role":"article","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Basics"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Connection-State-Management":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Connection-State-Management","type":"topic","kind":"article","url":"\/tutorials\/table-of-contents\/connection-state-management","abstract":[],"role":"article","title":"Connection State Management"},"07-accessory-store.swift":{"fileName":"AccessoryStore.swift","syntax":"swift","highlights":[],"identifier":"07-accessory-store.swift","type":"file","content":["import AccessorySetupKit","import Foundation","","@Observable","class AccessoryStore {","    private(set) var accessories: [StoredAccessory] = []","    private let defaults = UserDefaults.standard","    private let storageKey = \"storedAccessories\"","    ","    struct StoredAccessory: Identifiable, Codable {","        let id: UUID","        var displayName: String","        var bluetoothIdentifier: UUID?","        var addedDate: Date","        var lastConnected: Date?","        var customName: String?","        ","        var name: String {","            customName ?? displayName","        }","    }","    ","    init() {","        loadAccessories()","    }","    ","    func add(_ accessory: ASAccessory) {","        let stored = StoredAccessory(","            id: UUID(),","            displayName: accessory.displayName,","            bluetoothIdentifier: accessory.bluetoothIdentifier,","            addedDate: Date()","        )","        accessories.append(stored)","        saveAccessories()","    }","    ","    func remove(id: UUID) {","        accessories.removeAll { $0.id == id }","        saveAccessories()","    }","    ","    func rename(id: UUID, to name: String) {","        guard let index = accessories.firstIndex(where: { $0.id == id }) else { return }","        accessories[index].customName = name","        saveAccessories()","    }","    ","    func updateLastConnected(id: UUID) {","        guard let index = accessories.firstIndex(where: { $0.id == id }) else { return }","        accessories[index].lastConnected = Date()","        saveAccessories()","    }","    ","    private func saveAccessories() {","        if let data = try? JSONEncoder().encode(accessories) {","            defaults.set(data, forKey: storageKey)","        }","    }","    ","    private func loadAccessories() {","        guard let data = defaults.data(forKey: storageKey),","              let stored = try? JSONDecoder().decode([StoredAccessory].self, from: data) else { return }","        accessories = stored","    }","}"],"fileType":"swift"},"07-accessory-list.swift":{"fileType":"swift","identifier":"07-accessory-list.swift","content":["import SwiftUI","","struct AccessoryListView: View {","    @State private var store = AccessoryStore()","    @State private var connectionMonitor = ConnectionMonitor()","    @State private var showingAddSheet = false","    ","    var body: some View {","        NavigationStack {","            List {","                ForEach(store.accessories) { accessory in","                    AccessoryRow(","                        accessory: accessory,","                        isConnected: connectionMonitor.isConnected(accessory.bluetoothIdentifier)","                    )","                }","                .onDelete(perform: deleteAccessories)","            }","            .navigationTitle(\"내 기기\")","            .toolbar {","                ToolbarItem(placement: .primaryAction) {","                    Button {","                        showingAddSheet = true","                    } label: {","                        Image(systemName: \"plus\")","                    }","                }","                ","                ToolbarItem(placement: .topBarLeading) {","                    EditButton()","                }","            }","            .sheet(isPresented: $showingAddSheet) {","                AddAccessoryView(store: store)","            }","        }","    }","    ","    private func deleteAccessories(at offsets: IndexSet) {","        for index in offsets {","            store.remove(id: store.accessories[index].id)","        }","    }","}","","struct AccessoryRow: View {","    let accessory: AccessoryStore.StoredAccessory","    let isConnected: Bool","    ","    var body: some View {","        HStack {","            Image(systemName: \"sensor.fill\")","                .foregroundStyle(isConnected ? .green : .secondary)","            ","            VStack(alignment: .leading) {","                Text(accessory.name)","                    .font(.headline)","                ","                if let lastConnected = accessory.lastConnected {","                    Text(\"마지막 연결: \\(lastConnected.formatted(.relative(presentation: .named)))\")","                        .font(.caption)","                        .foregroundStyle(.secondary)","                }","            }","            ","            Spacer()","            ","            if isConnected {","                Image(systemName: \"checkmark.circle.fill\")","                    .foregroundStyle(.green)","            }","        }","    }","}"],"type":"file","fileName":"AccessoryList.swift","highlights":[],"syntax":"swift"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Core-Features":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Core-Features","type":"topic","kind":"article","url":"\/tutorials\/table-of-contents\/core-features","abstract":[],"role":"article","title":"Core Features"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/08-Firmware-Updates#OTA-Update-Transfer":{"url":"\/tutorials\/higaccessorysetupkit\/08-firmware-updates#OTA-Update-Transfer","abstract":[{"text":"Implement secure firmware updates for accessories.","type":"text"},{"text":" ","type":"text"},{"text":"Learn the process of version checking, downloading, transfer, and verification.","type":"text"}],"type":"section","kind":"section","title":"OTA Update Transfer","role":"pseudoSymbol","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/08-Firmware-Updates#OTA-Update-Transfer"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/04-Discovery-UI#Configuring-Picker-Display-Item":{"kind":"section","title":"Configuring Picker Display Item","url":"\/tutorials\/higaccessorysetupkit\/04-discovery-ui#Configuring-Picker-Display-Item","type":"section","role":"pseudoSymbol","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/04-Discovery-UI#Configuring-Picker-Display-Item","abstract":[{"type":"text","text":"Implement a user-friendly accessory discovery screen using"},{"type":"text","text":" "},{"type":"text","text":"ASDiscoveryDescriptor and ASPickerDisplayItem."}]},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/05-Pairing-Flow":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/05-Pairing-Flow","type":"topic","role":"project","kind":"project","url":"\/tutorials\/higaccessorysetupkit\/05-pairing-flow","abstract":[{"type":"text","text":"Implement the complete flow from accessory discovery to pairing completion."},{"type":"text","text":" "},{"type":"text","text":"Learn state management using ASAccessorySession events."}],"estimatedTime":"30min","title":"Implementing Pairing Flow"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Multiple-Accessories":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Multiple-Accessories","type":"topic","kind":"article","url":"\/tutorials\/table-of-contents\/multiple-accessories","abstract":[],"role":"article","title":"Multiple Accessories"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/02-Core#Implementation":{"role":"pseudoSymbol","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/02-Core#Implementation","url":"\/tutorials\/higaccessorysetupkit\/02-core#Implementation","kind":"section","type":"section","abstract":[{"type":"text","text":"Learn the main APIs."}],"title":"Implementation"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/06-Connection-State#Reconnection-Logic":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/06-Connection-State#Reconnection-Logic","type":"section","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/06-connection-state#Reconnection-Logic","abstract":[{"type":"text","text":"Track and manage the connection state of paired accessories in real-time."},{"type":"text","text":" "},{"type":"text","text":"Implement disconnection, reconnection, and background handling."}],"role":"pseudoSymbol","title":"Reconnection Logic"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/07-Multiple-Accessories#Accessory-Collection-Management":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/07-Multiple-Accessories#Accessory-Collection-Management","type":"section","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/07-multiple-accessories#Accessory-Collection-Management","abstract":[{"type":"text","text":"Learn how to manage multiple accessories simultaneously."},{"text":" ","type":"text"},{"text":"Implement accessory list management, grouping, and priority settings.","type":"text"}],"role":"pseudoSymbol","title":"Accessory Collection Management"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/05-Pairing-Flow#Handling-Session-Events":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/05-Pairing-Flow#Handling-Session-Events","type":"section","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/05-pairing-flow#Handling-Session-Events","abstract":[{"type":"text","text":"Implement the complete flow from accessory discovery to pairing completion."},{"type":"text","text":" "},{"type":"text","text":"Learn state management using ASAccessorySession events."}],"role":"pseudoSymbol","title":"Handling Session Events"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Practical-Application":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Practical-Application","type":"topic","role":"article","kind":"article","url":"\/tutorials\/table-of-contents\/practical-application","abstract":[],"title":"Practical Application"},"07-accessory-actor.swift":{"fileType":"swift","identifier":"07-accessory-actor.swift","content":["import CoreBluetooth","import os.log","","\/\/ Actor를 사용한 동시성 안전한 액세서리 관리","actor AccessoryConnectionActor {","    private var connections: [UUID: CBPeripheral] = [:]","    private let logger = Logger(subsystem: \"com.app\", category: \"AccessoryActor\")","    ","    func connect(_ peripheral: CBPeripheral, for accessoryID: UUID) {","        connections[accessoryID] = peripheral","        logger.info(\"연결 등록: \\(accessoryID)\")","    }","    ","    func disconnect(accessoryID: UUID) -> CBPeripheral? {","        logger.info(\"연결 해제: \\(accessoryID)\")","        return connections.removeValue(forKey: accessoryID)","    }","    ","    func getPeripheral(for accessoryID: UUID) -> CBPeripheral? {","        connections[accessoryID]","    }","    ","    func getAllConnectedIDs() -> [UUID] {","        Array(connections.keys)","    }","    ","    func isConnected(_ accessoryID: UUID) -> Bool {","        connections[accessoryID] != nil","    }","    ","    \/\/ 모든 연결 상태 확인","    func connectionStatus() -> [(UUID, CBPeripheralState)] {","        connections.map { ($0.key, $0.value.state) }","    }","}","","\/\/ 사용 예시","@MainActor","class AccessoryCoordinator {","    private let connectionActor = AccessoryConnectionActor()","    ","    func connectAccessory(_ accessory: AccessoryStore.StoredAccessory,","                          peripheral: CBPeripheral) async {","        await connectionActor.connect(peripheral, for: accessory.id)","    }","    ","    func disconnectAccessory(_ accessory: AccessoryStore.StoredAccessory) async {","        if let peripheral = await connectionActor.disconnect(accessoryID: accessory.id) {","            \/\/ 연결 해제 처리","            centralManager.cancelPeripheralConnection(peripheral)","        }","    }","}"],"type":"file","fileName":"AccessoryActor.swift","highlights":[],"syntax":"swift"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/01-Basics#Getting-Started":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/01-Basics#Getting-Started","type":"section","role":"pseudoSymbol","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/01-basics#Getting-Started","abstract":[{"text":"Connect with AccessorySetupKit.","type":"text"}],"title":"Getting Started"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/Table-of-Contents/Pairing-Flow":{"kind":"article","title":"Pairing Flow","url":"\/tutorials\/table-of-contents\/pairing-flow","type":"topic","role":"article","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/Table-of-Contents\/Pairing-Flow","abstract":[]},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/05-Pairing-Flow#Pairing-State-Machine":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/05-Pairing-Flow#Pairing-State-Machine","type":"section","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/05-pairing-flow#Pairing-State-Machine","abstract":[{"type":"text","text":"Implement the complete flow from accessory discovery to pairing completion."},{"type":"text","text":" "},{"type":"text","text":"Learn state management using ASAccessorySession events."}],"role":"pseudoSymbol","title":"Pairing State Machine"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/01-Basics":{"url":"\/tutorials\/higaccessorysetupkit\/01-basics","abstract":[{"text":"Connect with AccessorySetupKit.","type":"text"}],"type":"topic","kind":"project","title":"AccessorySetupKit Basics","role":"project","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/01-Basics","estimatedTime":"15min"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/03-Practice#Completion":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/03-Practice#Completion","type":"section","kind":"section","url":"\/tutorials\/higaccessorysetupkit\/03-practice#Completion","abstract":[{"text":"Apply to a real app.","type":"text"}],"role":"pseudoSymbol","title":"Completion"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/02-Core":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/02-Core","type":"topic","role":"project","kind":"project","url":"\/tutorials\/higaccessorysetupkit\/02-core","abstract":[{"text":"Learn the main APIs.","type":"text"}],"estimatedTime":"20min","title":"Core Features"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/09-Error-Handling":{"url":"\/tutorials\/higaccessorysetupkit\/09-error-handling","abstract":[{"type":"text","text":"Properly handle various errors that can occur in AccessorySetupKit"},{"type":"text","text":" "},{"type":"text","text":"and guide users appropriately."}],"type":"topic","kind":"project","title":"Error Handling","role":"project","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/09-Error-Handling","estimatedTime":"25min"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/09-Error-Handling#Error-Type-Classification":{"role":"pseudoSymbol","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/09-Error-Handling#Error-Type-Classification","url":"\/tutorials\/higaccessorysetupkit\/09-error-handling#Error-Type-Classification","kind":"section","type":"section","abstract":[{"type":"text","text":"Properly handle various errors that can occur in AccessorySetupKit"},{"type":"text","text":" "},{"type":"text","text":"and guide users appropriately."}],"title":"Error Type Classification"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/08-Firmware-Updates#Version-Check-and-Download":{"role":"pseudoSymbol","type":"section","abstract":[{"type":"text","text":"Implement secure firmware updates for accessories."},{"type":"text","text":" "},{"type":"text","text":"Learn the process of version checking, downloading, transfer, and verification."}],"url":"\/tutorials\/higaccessorysetupkit\/08-firmware-updates#Version-Check-and-Download","title":"Version Check and Download","kind":"section","identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/08-Firmware-Updates#Version-Check-and-Download"},"doc://accessorysetupkit.HIGAccessorySetupKit/tutorials/HIGAccessorySetupKit/07-Multiple-Accessories":{"identifier":"doc:\/\/accessorysetupkit.HIGAccessorySetupKit\/tutorials\/HIGAccessorySetupKit\/07-Multiple-Accessories","type":"topic","role":"project","kind":"project","url":"\/tutorials\/higaccessorysetupkit\/07-multiple-accessories","abstract":[{"text":"Learn how to manage multiple accessories simultaneously.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Implement accessory list management, grouping, and priority settings."}],"estimatedTime":"30min","title":"Managing Multiple Accessories"}}}