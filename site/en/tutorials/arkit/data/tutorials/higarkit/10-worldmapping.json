{"identifier":{"url":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/10-WorldMapping","interfaceLanguage":"swift"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/tutorials\/higarkit\/10-worldmapping"]}],"hierarchy":{"modules":[{"projects":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/01-ARKit-Basics","sections":[{"kind":"task","reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/01-ARKit-Basics#Setting-Up-ARView"}]}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/ARKit-Basics"},{"projects":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/02-Plane-Detection","sections":[{"kind":"task","reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/02-Plane-Detection#Plane-Detection-Setup"}]}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/Plane-Detection"},{"projects":[{"sections":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/03-Model-Placement#Model-Loading-and-Placement","kind":"task"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/03-Model-Placement"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/3D-Model-Placement"},{"projects":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/04-Gestures","sections":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/04-Gestures#Gesture-Handling","kind":"task"}]}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/Gesture-Interaction"},{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/Lighting-and-Shadows","projects":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/05-Lighting","sections":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/05-Lighting#Environment-Light-Estimation","kind":"task"},{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/05-Lighting#Check-Your-Understanding","kind":"assessment"}]}]},{"projects":[{"sections":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/06-ImageTracking#Image-Tracking-Setup","kind":"task"},{"kind":"task","reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/06-ImageTracking#Dynamic-Image-Content"},{"kind":"assessment","reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/06-ImageTracking#Check-Your-Understanding"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/06-ImageTracking"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/Image-Tracking"},{"projects":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/07-ObjectDetection","sections":[{"kind":"task","reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/07-ObjectDetection#Object-Scanning"},{"kind":"task","reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/07-ObjectDetection#Object-Recognition-and-Tracking"},{"kind":"assessment","reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/07-ObjectDetection#Check-Your-Understanding"}]}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/3D-Object-Detection"},{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/Face-Tracking","projects":[{"sections":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/08-FaceTracking#Face-Mesh-Tracking","kind":"task"},{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/08-FaceTracking#Expression-Recognition","kind":"task"},{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/08-FaceTracking#Check-Your-Understanding","kind":"assessment"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/08-FaceTracking"}]},{"projects":[{"sections":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/09-BodyTracking#Body-Tracking-Setup","kind":"task"},{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/09-BodyTracking#Character-Animation","kind":"task"},{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/09-BodyTracking#Check-Your-Understanding","kind":"assessment"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/09-BodyTracking"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/Body-Tracking"},{"projects":[{"sections":[{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/10-WorldMapping#Saving-World-Map","kind":"task"},{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/10-WorldMapping#Restoring-World-Map","kind":"task"},{"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/10-WorldMapping#Check-Your-Understanding","kind":"assessment"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/10-WorldMapping"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/World-Map-Save-and-Load"}],"reference":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents","paths":[["doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents","doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking","doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/World-Map-Save-and-Load"]]},"metadata":{"role":"project","category":"Building an AR Furniture Placement App","title":"World Map Save and Load","categoryPathComponent":"Table-of-Contents"},"schemaVersion":{"minor":3,"major":0,"patch":0},"sections":[{"kind":"hero","title":"World Map Save and Load","content":[{"inlineContent":[{"text":"Save and restore AR session spatial mapping data to provide persistent AR experiences.","type":"text"}],"type":"paragraph"}],"chapter":"World Map Save and Load","estimatedTimeInMinutes":25},{"kind":"tasks","tasks":[{"anchor":"Saving-World-Map","title":"Saving World Map","contentSection":[{"mediaPosition":"trailing","kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"ARWorldMap contains detected feature points, anchors, and environment information, allowing you to restore an AR session later at the same location."}]}]}],"stepsSection":[{"caption":[],"media":null,"code":"10-worldmapping.swift","runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Check the world map status of the current session."}]}]},{"caption":[],"media":null,"code":"10-worldmapping-02.swift","runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Get the world map asynchronously from ARSession."}]}]},{"caption":[],"media":null,"code":"10-worldmapping-03.swift","runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Archive and save ARWorldMap to a file."}]}]}]},{"anchor":"Restoring-World-Map","title":"Restoring World Map","contentSection":[{"mediaPosition":"trailing","kind":"contentAndMedia","content":[{"inlineContent":[{"type":"text","text":"Load a saved world map to reconstruct the space from a previous AR session."}],"type":"paragraph"}]}],"stepsSection":[{"runtimePreview":null,"media":null,"code":"10-worldmapping-04.swift","content":[{"inlineContent":[{"type":"text","text":"Unarchive ARWorldMap from the saved file."}],"type":"paragraph"}],"caption":[],"type":"step"},{"runtimePreview":null,"media":null,"code":"10-worldmapping-05.swift","content":[{"inlineContent":[{"type":"text","text":"Set initialWorldMap and start the session."}],"type":"paragraph"}],"caption":[],"type":"step"},{"runtimePreview":null,"media":null,"code":"10-worldmapping-06.swift","content":[{"inlineContent":[{"type":"text","text":"Monitor re-localization status."}],"type":"paragraph"}],"caption":[],"type":"step"}]}]},{"kind":"assessments","assessments":[{"content":[],"choices":[{"isCorrect":false,"justification":[{"inlineContent":[{"type":"text","text":"In this state, the world map cannot be retrieved."}],"type":"paragraph"}],"content":[{"inlineContent":[{"type":"codeVoice","code":".notAvailable"}],"type":"paragraph"}]},{"isCorrect":false,"justification":[{"type":"paragraph","inlineContent":[{"text":"Only limited data has been collected, so reliability is low.","type":"text"}]}],"content":[{"type":"paragraph","inlineContent":[{"code":".limited","type":"codeVoice"}]}]},{"isCorrect":true,"justification":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":".mapped"},{"text":" state indicates that sufficient spatial data has been collected and is suitable for saving. ","type":"text"},{"code":".extending","type":"codeVoice"},{"text":" is also usable.","type":"text"}]}],"content":[{"inlineContent":[{"type":"codeVoice","code":".mapped"}],"type":"paragraph"}]}],"type":"multiple-choice","title":[{"type":"paragraph","inlineContent":[{"text":"What ARFrame.WorldMappingStatus indicates that the world map is suitable for saving?","type":"text"}]}]}],"anchor":"Check-Your-Understanding"}],"kind":"project","references":{"doc://arkit.HIGARKit/tutorials/HIGARKit/09-BodyTracking#Body-Tracking-Setup":{"role":"pseudoSymbol","url":"\/tutorials\/higarkit\/09-bodytracking#Body-Tracking-Setup","abstract":[{"type":"text","text":"Track full-body poses to implement AR character animation and motion capture."}],"type":"section","title":"Body Tracking Setup","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/09-BodyTracking#Body-Tracking-Setup","kind":"section"},"10-worldmapping-04.swift":{"identifier":"10-worldmapping-04.swift","fileName":"WorldMapping.swift","content":["import ARKit","","\/\/ íŒŒì¼ì—ì„œ ì›”ë“œ ë§µ ë¡œë“œ","func loadWorldMap(from url: URL) throws -> ARWorldMap {","    let data = try Data(contentsOf: url)","    ","    guard let worldMap = try NSKeyedUnarchiver.unarchivedObject(","        ofClass: ARWorldMap.self,","        from: data","    ) else {","        throw NSError(","            domain: \"WorldMap\",","            code: -1,","            userInfo: [NSLocalizedDescriptionKey: \"ì›”ë“œ ë§µ ì–¸ì•„ì¹´ì´ë¸Œ ì‹¤íŒ¨\"]","        )","    }","    ","    print(\"ì›”ë“œ ë§µ ë¡œë“œë¨\")","    print(\"ì €ì¥ëœ ì•µì»¤: \\(worldMap.anchors.count)ê°œ\")","    ","    \/\/ ì €ì¥ëœ ì•µì»¤ë“¤ í™•ì¸","    for anchor in worldMap.anchors {","        if let name = anchor.name {","            print(\"  - \\(name): \\(type(of: anchor))\")","        }","    }","    ","    return worldMap","}","","\/\/ ì €ì¥ëœ ëª¨ë“  ì›”ë“œ ë§µ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°","func listSavedWorldMaps() -> [URL] {","    let documentsURL = FileManager.default.urls(","        for: .documentDirectory,","        in: .userDomainMask","    ).first!","    ","    let files = try? FileManager.default.contentsOfDirectory(","        at: documentsURL,","        includingPropertiesForKeys: nil","    )","    ","    return files?.filter { $0.pathExtension == \"arworldmap\" } ?? []","}"],"highlights":[],"type":"file","fileType":"swift","syntax":"swift"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Basics/3D-Model-Placement":{"role":"article","url":"\/tutorials\/table-of-contents\/basics\/3d-model-placement","abstract":[],"type":"topic","title":"3D Model Placement","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/3D-Model-Placement","kind":"article"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Basics/ARKit-Basics":{"abstract":[],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/ARKit-Basics","kind":"article","url":"\/tutorials\/table-of-contents\/basics\/arkit-basics","type":"topic","title":"ARKit Basics","role":"article"},"10-worldmapping-02.swift":{"identifier":"10-worldmapping-02.swift","fileName":"WorldMapping.swift","content":["import ARKit","","\/\/ í˜„ì¬ ì„¸ì…˜ì—ì„œ ì›”ë“œ ë§µ ê°€ì ¸ì˜¤ê¸°","func getCurrentWorldMap() async throws -> ARWorldMap {","    return try await withCheckedThrowingContinuation { continuation in","        arView.session.getCurrentWorldMap { worldMap, error in","            if let error = error {","                continuation.resume(throwing: error)","                return","            }","            ","            guard let worldMap = worldMap else {","                continuation.resume(throwing: NSError(","                    domain: \"WorldMap\",","                    code: -1,","                    userInfo: [NSLocalizedDescriptionKey: \"ì›”ë“œ ë§µì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\"]","                ))","                return","            }","            ","            print(\"ì›”ë“œ ë§µ íšë“ ì„±ê³µ\")","            print(\"ì•µì»¤ ìˆ˜: \\(worldMap.anchors.count)\")","            print(\"íŠ¹ì§•ì  ìˆ˜: \\(worldMap.rawFeaturePoints?.points.count ?? 0)\")","            ","            continuation.resume(returning: worldMap)","        }","    }","}"],"highlights":[{"line":3},{"line":4},{"line":5},{"line":6},{"line":7},{"line":8},{"line":9},{"line":10},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":21},{"line":22},{"line":23},{"line":25}],"type":"file","fileType":"swift","syntax":"swift"},"doc://arkit.HIGARKit/tutorials/HIGARKit/08-FaceTracking#Check-Your-Understanding":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/08-FaceTracking#Check-Your-Understanding","type":"link","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"url":"\/tutorials\/higarkit\/08-facetracking#Check-Your-Understanding"},"doc://arkit.HIGARKit/tutorials/HIGARKit/03-Model-Placement#Model-Loading-and-Placement":{"abstract":[{"text":"Place USDZ models in AR space.","type":"text"}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/03-Model-Placement#Model-Loading-and-Placement","kind":"section","url":"\/tutorials\/higarkit\/03-model-placement#Model-Loading-and-Placement","type":"section","title":"Model Loading and Placement","role":"pseudoSymbol"},"doc://arkit.HIGARKit/tutorials/HIGARKit/08-FaceTracking#Face-Mesh-Tracking":{"role":"pseudoSymbol","url":"\/tutorials\/higarkit\/08-facetracking#Face-Mesh-Tracking","abstract":[{"type":"text","text":"Track faces using the front camera and apply AR effects."}],"type":"section","title":"Face Mesh Tracking","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/08-FaceTracking#Face-Mesh-Tracking","kind":"section"},"doc://arkit.HIGARKit/tutorials/HIGARKit/05-Lighting":{"estimatedTime":"20min","abstract":[{"type":"text","text":"Implement light estimation and shadow effects for the AR environment."}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/05-Lighting","kind":"project","url":"\/tutorials\/higarkit\/05-lighting","type":"topic","title":"Lighting and Shadows","role":"project"},"doc://arkit.HIGARKit/tutorials/HIGARKit/07-ObjectDetection#Object-Recognition-and-Tracking":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/07-ObjectDetection#Object-Recognition-and-Tracking","title":"Object Recognition and Tracking","abstract":[{"text":"Scan and recognize real 3D objects to extend AR experiences.","type":"text"}],"type":"section","role":"pseudoSymbol","kind":"section","url":"\/tutorials\/higarkit\/07-objectdetection#Object-Recognition-and-Tracking"},"doc://arkit.HIGARKit/tutorials/HIGARKit/06-ImageTracking#Image-Tracking-Setup":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/06-ImageTracking#Image-Tracking-Setup","title":"Image Tracking Setup","abstract":[{"type":"text","text":"Recognize real-world images and display AR content on top of them."}],"type":"section","role":"pseudoSymbol","url":"\/tutorials\/higarkit\/06-imagetracking#Image-Tracking-Setup","kind":"section"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Basics/Gesture-Interaction":{"abstract":[],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/Gesture-Interaction","kind":"article","url":"\/tutorials\/table-of-contents\/basics\/gesture-interaction","type":"topic","title":"Gesture Interaction","role":"article"},"doc://arkit.HIGARKit/tutorials/HIGARKit/10-WorldMapping#Saving-World-Map":{"abstract":[{"text":"Save and restore AR session spatial mapping data to provide persistent AR experiences.","type":"text"}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/10-WorldMapping#Saving-World-Map","kind":"section","url":"\/tutorials\/higarkit\/10-worldmapping#Saving-World-Map","type":"section","title":"Saving World Map","role":"pseudoSymbol"},"doc://arkit.HIGARKit/tutorials/HIGARKit/02-Plane-Detection#Plane-Detection-Setup":{"abstract":[{"text":"Detect floors and walls.","type":"text"}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/02-Plane-Detection#Plane-Detection-Setup","kind":"section","url":"\/tutorials\/higarkit\/02-plane-detection#Plane-Detection-Setup","type":"section","title":"Plane Detection Setup","role":"pseudoSymbol"},"doc://arkit.HIGARKit/tutorials/HIGARKit/09-BodyTracking#Character-Animation":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/09-BodyTracking#Character-Animation","title":"Character Animation","abstract":[{"type":"text","text":"Track full-body poses to implement AR character animation and motion capture."}],"type":"section","role":"pseudoSymbol","url":"\/tutorials\/higarkit\/09-bodytracking#Character-Animation","kind":"section"},"doc://arkit.HIGARKit/tutorials/HIGARKit/06-ImageTracking#Check-Your-Understanding":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/06-ImageTracking#Check-Your-Understanding","type":"link","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"url":"\/tutorials\/higarkit\/06-imagetracking#Check-Your-Understanding"},"doc://arkit.HIGARKit/tutorials/HIGARKit/02-Plane-Detection":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/02-Plane-Detection","estimatedTime":"15min","title":"Plane Detection","abstract":[{"type":"text","text":"Detect floors and walls."}],"type":"topic","role":"project","url":"\/tutorials\/higarkit\/02-plane-detection","kind":"project"},"doc://arkit.HIGARKit/tutorials/HIGARKit/08-FaceTracking":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/08-FaceTracking","estimatedTime":"25min","title":"Face Tracking","abstract":[{"type":"text","text":"Track faces using the front camera and apply AR effects."}],"type":"topic","role":"project","kind":"project","url":"\/tutorials\/higarkit\/08-facetracking"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Advanced-Tracking/Face-Tracking":{"abstract":[],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/Face-Tracking","kind":"article","url":"\/tutorials\/table-of-contents\/advanced-tracking\/face-tracking","type":"topic","title":"Face Tracking","role":"article"},"doc://arkit.HIGARKit/tutorials/HIGARKit/09-BodyTracking":{"role":"project","url":"\/tutorials\/higarkit\/09-bodytracking","abstract":[{"text":"Track full-body poses to implement AR character animation and motion capture.","type":"text"}],"type":"topic","estimatedTime":"30min","title":"Body Tracking","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/09-BodyTracking","kind":"project"},"doc://arkit.HIGARKit/tutorials/HIGARKit/07-ObjectDetection":{"role":"project","url":"\/tutorials\/higarkit\/07-objectdetection","abstract":[{"type":"text","text":"Scan and recognize real 3D objects to extend AR experiences."}],"type":"topic","estimatedTime":"30min","title":"3D Object Detection","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/07-ObjectDetection","kind":"project"},"doc://arkit.HIGARKit/tutorials/HIGARKit/10-WorldMapping#Restoring-World-Map":{"abstract":[{"text":"Save and restore AR session spatial mapping data to provide persistent AR experiences.","type":"text"}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/10-WorldMapping#Restoring-World-Map","kind":"section","url":"\/tutorials\/higarkit\/10-worldmapping#Restoring-World-Map","type":"section","title":"Restoring World Map","role":"pseudoSymbol"},"10-worldmapping-05.swift":{"fileName":"WorldMapping.swift","fileType":"swift","syntax":"swift","identifier":"10-worldmapping-05.swift","highlights":[{"line":2},{"line":4},{"line":5},{"line":6},{"line":7},{"line":8},{"line":10},{"line":11},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":26},{"line":27},{"line":31},{"line":32},{"line":34},{"line":35},{"line":37},{"line":38},{"line":39},{"line":40},{"line":41},{"line":42},{"line":43}],"content":["import ARKit","import RealityKit","","\/\/ ì €ì¥ëœ ì›”ë“œ ë§µìœ¼ë¡œ ì„¸ì…˜ ì‹œì‘","func restoreSession(with worldMap: ARWorldMap) {","    let configuration = ARWorldTrackingConfiguration()","    configuration.planeDetection = [.horizontal, .vertical]","    configuration.initialWorldMap = worldMap \/\/ í•µì‹¬!","    ","    \/\/ ì´ì „ ì„¸ì…˜ì˜ ì•µì»¤ë“¤ì´ ìë™ìœ¼ë¡œ ë³µì›ë¨","    arView.session.run(configuration, options: [.resetTracking, .removeExistingAnchors])","    ","    print(\"ì›”ë“œ ë§µìœ¼ë¡œ ì„¸ì…˜ ì‹œì‘ë¨\")","}","","\/\/ ë¡œë“œ ë° ë³µì› ì „ì²´ í”„ë¡œì„¸ìŠ¤","func restoreFromFile(url: URL) {","    do {","        let worldMap = try loadWorldMap(from: url)","        restoreSession(with: worldMap)","        ","        \/\/ ë³µì›ëœ ì•µì»¤ë“¤ì˜ Entity ì¬ìƒì„±","        for anchor in worldMap.anchors {","            recreateEntity(for: anchor)","        }","    } catch {","        print(\"ë³µì› ì‹¤íŒ¨: \\(error)\")","    }","}","","func recreateEntity(for anchor: ARAnchor) {","    guard let name = anchor.name else { return }","    ","    \/\/ ì•µì»¤ ì´ë¦„ì— ë”°ë¼ ì ì ˆí•œ ëª¨ë¸ ë¡œë“œ","    let anchorEntity = AnchorEntity(anchor: anchor)","    ","    if name.contains(\"furniture\") {","        if let model = try? ModelEntity.loadModel(named: name) {","            anchorEntity.addChild(model)","        }","    }","    ","    arView.scene.addAnchor(anchorEntity)","}"],"type":"file"},"doc://arkit.HIGARKit/tutorials/HIGARKit/10-WorldMapping#Check-Your-Understanding":{"title":"Check Your Understanding","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/10-WorldMapping#Check-Your-Understanding","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"type":"link","url":"\/tutorials\/higarkit\/10-worldmapping#Check-Your-Understanding"},"doc://arkit.HIGARKit/tutorials/HIGARKit/07-ObjectDetection#Check-Your-Understanding":{"title":"Check Your Understanding","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/07-ObjectDetection#Check-Your-Understanding","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"type":"link","url":"\/tutorials\/higarkit\/07-objectdetection#Check-Your-Understanding"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Advanced-Tracking/World-Map-Save-and-Load":{"abstract":[],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/World-Map-Save-and-Load","kind":"article","url":"\/tutorials\/table-of-contents\/advanced-tracking\/world-map-save-and-load","type":"topic","title":"World Map Save and Load","role":"article"},"doc://arkit.HIGARKit/tutorials/HIGARKit/09-BodyTracking#Check-Your-Understanding":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/09-BodyTracking#Check-Your-Understanding","type":"link","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"url":"\/tutorials\/higarkit\/09-bodytracking#Check-Your-Understanding"},"doc://arkit.HIGARKit/tutorials/HIGARKit/03-Model-Placement":{"role":"project","url":"\/tutorials\/higarkit\/03-model-placement","abstract":[{"text":"Place USDZ models in AR space.","type":"text"}],"type":"topic","estimatedTime":"20min","title":"3D Model Placement","kind":"project","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/03-Model-Placement"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Basics/Plane-Detection":{"role":"article","url":"\/tutorials\/table-of-contents\/basics\/plane-detection","abstract":[],"type":"topic","title":"Plane Detection","kind":"article","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/Plane-Detection"},"doc://arkit.HIGARKit/tutorials/HIGARKit/10-WorldMapping":{"estimatedTime":"25min","abstract":[{"type":"text","text":"Save and restore AR session spatial mapping data to provide persistent AR experiences."}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/10-WorldMapping","kind":"project","url":"\/tutorials\/higarkit\/10-worldmapping","type":"topic","title":"World Map Save and Load","role":"project"},"doc://arkit.HIGARKit/tutorials/HIGARKit/01-ARKit-Basics":{"estimatedTime":"15min","abstract":[{"text":"Learn the basic concepts of ARKit and RealityKit.","type":"text"}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/01-ARKit-Basics","kind":"project","url":"\/tutorials\/higarkit\/01-arkit-basics","type":"topic","title":"ARKit Basics","role":"project"},"doc://arkit.HIGARKit/tutorials/HIGARKit/01-ARKit-Basics#Setting-Up-ARView":{"role":"pseudoSymbol","url":"\/tutorials\/higarkit\/01-arkit-basics#Setting-Up-ARView","abstract":[{"text":"Learn the basic concepts of ARKit and RealityKit.","type":"text"}],"type":"section","title":"Setting Up ARView","kind":"section","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/01-ARKit-Basics#Setting-Up-ARView"},"doc://arkit.HIGARKit/tutorials/HIGARKit/07-ObjectDetection#Object-Scanning":{"abstract":[{"text":"Scan and recognize real 3D objects to extend AR experiences.","type":"text"}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/07-ObjectDetection#Object-Scanning","kind":"section","url":"\/tutorials\/higarkit\/07-objectdetection#Object-Scanning","type":"section","title":"Object Scanning","role":"pseudoSymbol"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents","title":"Building a Furniture Placement App with ARKit","abstract":[{"type":"text","text":"Implement an app that lets you preview furniture placement in augmented reality."},{"type":"text","text":" "},{"type":"text","text":"Learn step by step from ARKit basics to advanced tracking."}],"type":"topic","role":"overview","url":"\/tutorials\/table-of-contents","kind":"overview"},"doc://arkit.HIGARKit/tutorials/HIGARKit/05-Lighting#Environment-Light-Estimation":{"role":"pseudoSymbol","url":"\/tutorials\/higarkit\/05-lighting#Environment-Light-Estimation","abstract":[{"type":"text","text":"Implement light estimation and shadow effects for the AR environment."}],"type":"section","title":"Environment Light Estimation","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/05-Lighting#Environment-Light-Estimation","kind":"section"},"doc://arkit.HIGARKit/tutorials/HIGARKit/04-Gestures":{"estimatedTime":"15min","abstract":[{"type":"text","text":"Implement tap, drag, and rotation gestures."}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/04-Gestures","kind":"project","url":"\/tutorials\/higarkit\/04-gestures","type":"topic","title":"Gesture Interaction","role":"project"},"doc://arkit.HIGARKit/tutorials/HIGARKit/06-ImageTracking":{"estimatedTime":"25min","abstract":[{"text":"Recognize real-world images and display AR content on top of them.","type":"text"}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/06-ImageTracking","kind":"project","url":"\/tutorials\/higarkit\/06-imagetracking","type":"topic","title":"Image Tracking","role":"project"},"doc://arkit.HIGARKit/tutorials/HIGARKit/04-Gestures#Gesture-Handling":{"abstract":[{"text":"Implement tap, drag, and rotation gestures.","type":"text"}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/04-Gestures#Gesture-Handling","kind":"section","url":"\/tutorials\/higarkit\/04-gestures#Gesture-Handling","type":"section","title":"Gesture Handling","role":"pseudoSymbol"},"10-worldmapping-06.swift":{"fileName":"WorldMapping.swift","fileType":"swift","syntax":"swift","identifier":"10-worldmapping-06.swift","highlights":[{"line":4},{"line":5},{"line":6},{"line":8},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":40},{"line":41},{"line":42},{"line":45},{"line":46},{"line":47}],"content":["import ARKit","import RealityKit","","class RelocalizationMonitor: NSObject, ARSessionDelegate {","    var arView: ARView!","    var onRelocalized: (() -> Void)?","    ","    private var isRelocalized = false","    ","    func session(_ session: ARSession, cameraDidChangeTrackingState camera: ARCamera) {","        switch camera.trackingState {","        case .notAvailable:","            print(\"íŠ¸ë˜í‚¹ ë¶ˆê°€\")","            ","        case .limited(let reason):","            switch reason {","            case .initializing:","                print(\"ì´ˆê¸°í™” ì¤‘...\")","            case .relocalizing:","                print(\"ì¬ë¡œì»¬ë¼ì´ì œì´ì…˜ ì¤‘... ì´ì „ ìœ„ì¹˜ë¥¼ ì°¾ê³  ìˆìŠµë‹ˆë‹¤\")","                showRelocalizationGuide()","            case .excessiveMotion:","                print(\"ì›€ì§ì„ì´ ë„ˆë¬´ ë¹ ë¦…ë‹ˆë‹¤\")","            case .insufficientFeatures:","                print(\"íŠ¹ì§•ì  ë¶€ì¡± - ë” ë°ì€ ê³³ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”\")","            @unknown default:","                break","            }","            ","        case .normal:","            if !isRelocalized {","                isRelocalized = true","                print(\"ì¬ë¡œì»¬ë¼ì´ì œì´ì…˜ ì„±ê³µ! âœ“\")","                hideRelocalizationGuide()","                onRelocalized?()","            }","        }","    }","    ","    private func showRelocalizationGuide() {","        \/\/ ì´ì „ì— ì €ì¥í•œ ìœ„ì¹˜ë¡œ ëŒì•„ê°€ë¼ëŠ” ì•ˆë‚´ í‘œì‹œ","        print(\"ğŸ’¡ ì›”ë“œ ë§µì„ ì €ì¥í–ˆë˜ ìœ„ì¹˜ë¡œ ì´ë™í•˜ì„¸ìš”\")","    }","    ","    private func hideRelocalizationGuide() {","        print(\"âœ… ì´ì „ AR ì„¸ì…˜ì´ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤\")","    }","}"],"type":"file"},"doc://arkit.HIGARKit/tutorials/HIGARKit/06-ImageTracking#Dynamic-Image-Content":{"role":"pseudoSymbol","url":"\/tutorials\/higarkit\/06-imagetracking#Dynamic-Image-Content","abstract":[{"text":"Recognize real-world images and display AR content on top of them.","type":"text"}],"type":"section","title":"Dynamic Image Content","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/06-ImageTracking#Dynamic-Image-Content","kind":"section"},"10-worldmapping-03.swift":{"fileName":"WorldMapping.swift","fileType":"swift","syntax":"swift","identifier":"10-worldmapping-03.swift","highlights":[{"line":3},{"line":4},{"line":5},{"line":6},{"line":7},{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34}],"content":["import ARKit","","\/\/ ì›”ë“œ ë§µì„ íŒŒì¼ë¡œ ì €ì¥","func saveWorldMap(_ worldMap: ARWorldMap) throws -> URL {","    let documentsURL = FileManager.default.urls(","        for: .documentDirectory,","        in: .userDomainMask","    ).first!","    ","    let timestamp = Int(Date().timeIntervalSince1970)","    let fileURL = documentsURL.appendingPathComponent(\"worldmap_\\(timestamp).arworldmap\")","    ","    \/\/ NSKeyedArchiverë¡œ ì•„ì¹´ì´ë¸Œ","    let data = try NSKeyedArchiver.archivedData(","        withRootObject: worldMap,","        requiringSecureCoding: true","    )","    ","    try data.write(to: fileURL)","    ","    print(\"ì›”ë“œ ë§µ ì €ì¥ë¨: \\(fileURL.lastPathComponent)\")","    print(\"íŒŒì¼ í¬ê¸°: \\(ByteCountFormatter.string(fromByteCount: Int64(data.count), countStyle: .file))\")","    ","    return fileURL","}","","\/\/ ì „ì²´ ì €ì¥ í”„ë¡œì„¸ìŠ¤","func saveCurrentSession() async {","    do {","        let worldMap = try await getCurrentWorldMap()","        let savedURL = try saveWorldMap(worldMap)","        print(\"ì €ì¥ ì™„ë£Œ: \\(savedURL)\")","    } catch {","        print(\"ì €ì¥ ì‹¤íŒ¨: \\(error.localizedDescription)\")","    }","}"],"type":"file"},"doc://arkit.HIGARKit/tutorials/HIGARKit/08-FaceTracking#Expression-Recognition":{"abstract":[{"type":"text","text":"Track faces using the front camera and apply AR effects."}],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/08-FaceTracking#Expression-Recognition","kind":"section","url":"\/tutorials\/higarkit\/08-facetracking#Expression-Recognition","type":"section","title":"Expression Recognition","role":"pseudoSymbol"},"doc://arkit.HIGARKit/tutorials/HIGARKit/05-Lighting#Check-Your-Understanding":{"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/HIGARKit\/05-Lighting#Check-Your-Understanding","type":"link","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"url":"\/tutorials\/higarkit\/05-lighting#Check-Your-Understanding"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Advanced-Tracking/Image-Tracking":{"role":"article","url":"\/tutorials\/table-of-contents\/advanced-tracking\/image-tracking","abstract":[],"type":"topic","title":"Image Tracking","kind":"article","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/Image-Tracking"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Basics/Lighting-and-Shadows":{"abstract":[],"identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Basics\/Lighting-and-Shadows","kind":"article","url":"\/tutorials\/table-of-contents\/basics\/lighting-and-shadows","type":"topic","title":"Lighting and Shadows","role":"article"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Advanced-Tracking/Body-Tracking":{"role":"article","url":"\/tutorials\/table-of-contents\/advanced-tracking\/body-tracking","abstract":[],"type":"topic","title":"Body Tracking","kind":"article","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/Body-Tracking"},"doc://arkit.HIGARKit/tutorials/Table-of-Contents/Advanced-Tracking/3D-Object-Detection":{"role":"article","url":"\/tutorials\/table-of-contents\/advanced-tracking\/3d-object-detection","abstract":[],"type":"topic","title":"3D Object Detection","identifier":"doc:\/\/arkit.HIGARKit\/tutorials\/Table-of-Contents\/Advanced-Tracking\/3D-Object-Detection","kind":"article"},"10-worldmapping.swift":{"fileName":"WorldMapping.swift","fileType":"swift","syntax":"swift","identifier":"10-worldmapping.swift","highlights":[],"content":["import ARKit","import RealityKit","","\/\/ ì›”ë“œ ë§µí•‘ ìƒíƒœ ëª¨ë‹ˆí„°ë§","class WorldMappingMonitor: NSObject, ARSessionDelegate {","    var arView: ARView!","    var statusLabel: UILabel?","    ","    func session(_ session: ARSession, didUpdate frame: ARFrame) {","        \/\/ ì›”ë“œ ë§µí•‘ ìƒíƒœ í™•ì¸","        let mappingStatus = frame.worldMappingStatus","        ","        switch mappingStatus {","        case .notAvailable:","            statusLabel?.text = \"ì›”ë“œ ë§µ ì‚¬ìš© ë¶ˆê°€\"","            statusLabel?.textColor = .red","            ","        case .limited:","            statusLabel?.text = \"ì›”ë“œ ë§µ ì œí•œì  - ë” ë‘˜ëŸ¬ë³´ì„¸ìš”\"","            statusLabel?.textColor = .orange","            ","        case .extending:","            statusLabel?.text = \"ì›”ë“œ ë§µ í™•ì¥ ì¤‘\"","            statusLabel?.textColor = .yellow","            ","        case .mapped:","            statusLabel?.text = \"ì›”ë“œ ë§µ ì™„ë£Œ âœ“ ì €ì¥ ê°€ëŠ¥\"","            statusLabel?.textColor = .green","            ","        @unknown default:","            break","        }","    }","    ","    var canSaveWorldMap: Bool {","        guard let frame = arView.session.currentFrame else { return false }","        return frame.worldMappingStatus == .mapped || frame.worldMappingStatus == .extending","    }","}"],"type":"file"}}}