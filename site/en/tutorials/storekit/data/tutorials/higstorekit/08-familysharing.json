{"metadata":{"category":"Building a Subscription App","title":"Supporting Family Sharing","categoryPathComponent":"Table-of-Contents","role":"project"},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing"},"sections":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Enable up to 6 family members to use the app"},{"type":"text","text":" "},{"type":"text","text":"with a single subscription through Family Sharing."}]}],"estimatedTimeInMinutes":20,"kind":"hero","title":"Supporting Family Sharing","chapter":"Ring 8: Family Sharing"},{"tasks":[{"title":"Understanding Family Sharing","stepsSection":[{"type":"step","content":[{"inlineContent":[{"text":"Implement logic to check family sharing status.","type":"text"}],"type":"paragraph"}],"code":"08-family-share-manager.swift","caption":[],"runtimePreview":null,"media":null}],"anchor":"Understanding-Family-Sharing","contentSection":[{"kind":"contentAndMedia","content":[{"inlineContent":[{"text":"Family Sharing is enabled in App Store Connect,","type":"text"},{"text":" ","type":"text"},{"text":"and StoreKit 2 distinguishes it through the Transaction’s ownershipType.","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":".purchased","type":"codeVoice"},{"text":": User who made the purchase directly","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":".familyShared","type":"codeVoice"},{"text":": User accessing through family sharing","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"HIG Guidelines:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Provide the same experience to family sharing users"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Clearly distinguish features that only the purchaser can manage"}],"type":"paragraph"}]}]}],"mediaPosition":"trailing"}]},{"title":"UI Branching by Ownership Type","stepsSection":[{"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Implement an EntitlementManager that checks ownership type.","type":"text"}]}],"code":"08-entitlement-manager.swift","caption":[],"runtimePreview":null,"media":null},{"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Add an information view for family sharing users.","type":"text"}]}],"code":"08-family-info-view.swift","caption":[],"runtimePreview":null,"media":null}],"anchor":"UI-Branching-by-Ownership-Type","contentSection":[{"content":[{"inlineContent":[{"text":"Provide different UI to purchasers and family sharing users.","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Purchaser: Show subscription management, cancellation options","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Family Sharing: Guide to purchaser, limited management options","type":"text"}]}]}]}],"mediaPosition":"trailing","kind":"contentAndMedia"}]},{"title":"Handling Family Sharing Cancellation","stepsSection":[{"code":"08-family-revoked.swift","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Display appropriate guidance when family sharing is cancelled."}]}],"type":"step","caption":[],"media":null}],"anchor":"Handling-Family-Sharing-Cancellation","contentSection":[{"content":[{"inlineContent":[{"text":"When family sharing is revoked, access permissions are also removed.","type":"text"},{"text":" ","type":"text"},{"text":"Detect revocation from the Transaction.updates stream and handle accordingly.","type":"text"}],"type":"paragraph"}],"mediaPosition":"trailing","kind":"contentAndMedia"}]}],"kind":"tasks"},{"kind":"assessments","assessments":[{"type":"multiple-choice","content":[],"choices":[{"isCorrect":false,"content":[{"type":"paragraph","inlineContent":[{"text":".purchased","type":"text"}]}],"justification":[{"type":"paragraph","inlineContent":[{"text":".purchased indicates a user who made the purchase directly.","type":"text"}]}]},{"isCorrect":true,"content":[{"type":"paragraph","inlineContent":[{"text":".familyShared","type":"text"}]}],"justification":[{"type":"paragraph","inlineContent":[{"text":"Users accessing through family sharing have the .familyShared type.","type":"text"}]}]},{"isCorrect":false,"content":[{"type":"paragraph","inlineContent":[{"text":".shared","type":"text"}]}],"justification":[{"type":"paragraph","inlineContent":[{"text":"In StoreKit 2, .familyShared is the correct value.","type":"text"}]}]}],"title":[{"inlineContent":[{"type":"text","text":"What is the Transaction.ownershipType value for a family sharing user?"}],"type":"paragraph"}]},{"type":"multiple-choice","content":[],"choices":[{"isCorrect":false,"content":[{"inlineContent":[{"text":"Yes, they can do it anytime from their device.","type":"text"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"text":"Family sharing users don’t have subscription management permissions.","type":"text"}],"type":"paragraph"}]},{"isCorrect":true,"content":[{"inlineContent":[{"text":"No, only the original purchaser can manage it.","type":"text"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"text":"Subscription management (cancellation, changes) is only available to the original purchaser.","type":"text"},{"text":" ","type":"text"},{"text":"This should be clearly communicated to family sharing users.","type":"text"}],"type":"paragraph"}]},{"isCorrect":false,"content":[{"inlineContent":[{"text":"They must request directly from Apple.","type":"text"}],"type":"paragraph"}],"justification":[{"inlineContent":[{"type":"text","text":"The original purchaser manages it directly from the Settings app."}],"type":"paragraph"}]}],"title":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Can a family sharing user cancel the subscription?"}]}]}],"anchor":"Check-Your-Understanding"},{"action":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore","type":"reference","isActive":true,"overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"overridingTitle":"Get started"},"kind":"callToAction","abstract":[{"type":"text","text":"Validate subscription status from the server side"},{"type":"text","text":" "},{"type":"text","text":"and handle real-time events with App Store Server Notifications."}],"featuredEyebrow":"Tutorial","title":"App Store Server API"}],"kind":"project","schemaVersion":{"major":0,"patch":0,"minor":3},"variants":[{"paths":["\/tutorials\/higstorekit\/08-familysharing"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"modules":[{"projects":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/01-Understanding-StoreKit","sections":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/01-Understanding-StoreKit#What-is-StoreKit-2","kind":"task"}]}],"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-1:-Understanding-StoreKit-2"},{"projects":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/02-Loading-Products","sections":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/02-Loading-Products#Loading-Products","kind":"task"}]}],"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-2:-Loading-Products"},{"projects":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/03-Purchase-Flow","sections":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/03-Purchase-Flow#Purchase-Handling","kind":"task"}]}],"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-3:-Purchase-Flow"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-4:-Subscription-Management","projects":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/04-Subscription-Status","sections":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/04-Subscription-Status#Checking-Subscription-Status","kind":"task"}]}]},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-5:-Paywall-UI","projects":[{"sections":[{"kind":"task","reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/05-Paywall-UI#Paywall-Design"}],"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/05-Paywall-UI"}]},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-7:-Advanced-Subscription-Management","projects":[{"sections":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions#Subscription-Groups-and-Levels","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions#Subscription-Upgrades-Downgrades","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions#Subscription-Renewal-Status","kind":"task"},{"kind":"assessment","reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions#Check-Your-Understanding"}],"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions"}]},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-8:-Family-Sharing","projects":[{"sections":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing#Understanding-Family-Sharing","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing#UI-Branching-by-Ownership-Type","kind":"task"},{"kind":"task","reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing#Handling-Family-Sharing-Cancellation"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing#Check-Your-Understanding","kind":"assessment"}],"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing"}]},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-9:-App-Store-Server-API","projects":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore","sections":[{"kind":"task","reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore#Server-API-Overview"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore#Server-Notifications-V2","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore#JWS-Verification","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore#Check-Your-Understanding","kind":"assessment"}]}]},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-10:-Subscription-Discount-Offers","projects":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers","sections":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Introductory-Offers","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Promotional-Offers","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Offer-Codes","kind":"task"},{"kind":"task","reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Offer-Strategy-HIG-Guidelines"},{"kind":"assessment","reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Check-Your-Understanding"}]}]},{"projects":[{"sections":[{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#StoreKit-Configuration-File","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#Writing-Unit-Tests","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#Sandbox-Testing","kind":"task"},{"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#Error-Scenario-Testing","kind":"task"},{"kind":"assessment","reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#Check-Your-Understanding"}],"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing"}],"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-11:-StoreKit-Testing"}],"reference":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents","paths":[["doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents","doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/$volume","doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-8:-Family-Sharing"]]},"references":{"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/09-AppStore":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore","title":"App Store Server API","kind":"project","abstract":[{"type":"text","text":"Validate subscription status from the server side"},{"type":"text","text":" "},{"text":"and handle real-time events with App Store Server Notifications.","type":"text"}],"role":"project","url":"\/tutorials\/higstorekit\/09-appstore","estimatedTime":"30min","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/07-Subscriptions#Subscription-Renewal-Status":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions#Subscription-Renewal-Status","title":"Subscription Renewal Status","kind":"section","abstract":[{"text":"Implement all subscription management features needed for a real service,","type":"text"},{"type":"text","text":" "},{"type":"text","text":"including subscription renewal, upgrades\/downgrades, cancellation, and restoration."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/07-subscriptions#Subscription-Renewal-Status","type":"section"},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-8:-Family-Sharing":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-8:-Family-Sharing","title":"Ring 8: Family Sharing","kind":"article","abstract":[],"role":"article","url":"\/tutorials\/table-of-contents\/ring-8:-family-sharing","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents","title":"Building a Subscription App with StoreKit 2","kind":"overview","abstract":[{"type":"text","text":"Implement a subscription payment system using"},{"type":"text","text":" "},{"text":"StoreKit 2’s modern async\/await APIs.","type":"text"}],"role":"overview","url":"\/tutorials\/table-of-contents","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/08-FamilySharing#UI-Branching-by-Ownership-Type":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing#UI-Branching-by-Ownership-Type","title":"UI Branching by Ownership Type","kind":"section","abstract":[{"text":"Enable up to 6 family members to use the app","type":"text"},{"type":"text","text":" "},{"type":"text","text":"with a single subscription through Family Sharing."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/08-familysharing#UI-Branching-by-Ownership-Type","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/08-FamilySharing#Understanding-Family-Sharing":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing#Understanding-Family-Sharing","title":"Understanding Family Sharing","kind":"section","abstract":[{"text":"Enable up to 6 family members to use the app","type":"text"},{"type":"text","text":" "},{"text":"with a single subscription through Family Sharing.","type":"text"}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/08-familysharing#Understanding-Family-Sharing","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/09-AppStore#JWS-Verification":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore#JWS-Verification","title":"JWS Verification","kind":"section","abstract":[{"type":"text","text":"Validate subscription status from the server side"},{"text":" ","type":"text"},{"type":"text","text":"and handle real-time events with App Store Server Notifications."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/09-appstore#JWS-Verification","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/07-Subscriptions":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions","title":"Advanced Subscription Management","kind":"project","abstract":[{"type":"text","text":"Implement all subscription management features needed for a real service,"},{"type":"text","text":" "},{"text":"including subscription renewal, upgrades\/downgrades, cancellation, and restoration.","type":"text"}],"role":"project","url":"\/tutorials\/higstorekit\/07-subscriptions","estimatedTime":"25min","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/10-Subscription-Offers#Check-Your-Understanding":{"type":"link","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Check-Your-Understanding","title":"Check Your Understanding","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"url":"\/tutorials\/higstorekit\/10-subscription-offers#Check-Your-Understanding"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/11-Testing#Writing-Unit-Tests":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#Writing-Unit-Tests","title":"Writing Unit Tests","kind":"section","abstract":[{"type":"text","text":"Thoroughly test in-app purchase functionality using"},{"type":"text","text":" "},{"type":"text","text":"Xcode’s StoreKit Testing and Sandbox environment."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/11-testing#Writing-Unit-Tests","type":"section"},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-3:-Purchase-Flow":{"type":"topic","kind":"article","title":"Ring 3: Purchase Flow","role":"article","url":"\/tutorials\/table-of-contents\/ring-3:-purchase-flow","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-3:-Purchase-Flow","abstract":[]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/08-FamilySharing#Handling-Family-Sharing-Cancellation":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing#Handling-Family-Sharing-Cancellation","title":"Handling Family Sharing Cancellation","kind":"section","abstract":[{"text":"Enable up to 6 family members to use the app","type":"text"},{"type":"text","text":" "},{"type":"text","text":"with a single subscription through Family Sharing."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/08-familysharing#Handling-Family-Sharing-Cancellation","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/08-FamilySharing":{"type":"topic","kind":"project","title":"Supporting Family Sharing","role":"project","estimatedTime":"20min","url":"\/tutorials\/higstorekit\/08-familysharing","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing","abstract":[{"type":"text","text":"Enable up to 6 family members to use the app"},{"type":"text","text":" "},{"type":"text","text":"with a single subscription through Family Sharing."}]},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-9:-App-Store-Server-API":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-9:-App-Store-Server-API","title":"Ring 9: App Store Server API","kind":"article","abstract":[],"role":"article","url":"\/tutorials\/table-of-contents\/ring-9:-app-store-server-api","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/11-Testing#Sandbox-Testing":{"type":"section","kind":"section","title":"Sandbox Testing","role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/11-testing#Sandbox-Testing","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#Sandbox-Testing","abstract":[{"type":"text","text":"Thoroughly test in-app purchase functionality using"},{"type":"text","text":" "},{"type":"text","text":"Xcode’s StoreKit Testing and Sandbox environment."}]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/07-Subscriptions#Subscription-Upgrades-Downgrades":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions#Subscription-Upgrades-Downgrades","title":"Subscription Upgrades & Downgrades","kind":"section","abstract":[{"type":"text","text":"Implement all subscription management features needed for a real service,"},{"type":"text","text":" "},{"type":"text","text":"including subscription renewal, upgrades\/downgrades, cancellation, and restoration."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/07-subscriptions#Subscription-Upgrades-Downgrades","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/05-Paywall-UI":{"type":"topic","kind":"project","title":"HIG-Compliant Paywall UI","role":"project","estimatedTime":"20min","url":"\/tutorials\/higstorekit\/05-paywall-ui","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/05-Paywall-UI","abstract":[{"type":"text","text":"Design a paywall screen that follows Apple HIG guidelines."}]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/07-Subscriptions#Subscription-Groups-and-Levels":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions#Subscription-Groups-and-Levels","title":"Subscription Groups and Levels","kind":"section","abstract":[{"type":"text","text":"Implement all subscription management features needed for a real service,"},{"text":" ","type":"text"},{"text":"including subscription renewal, upgrades\/downgrades, cancellation, and restoration.","type":"text"}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/07-subscriptions#Subscription-Groups-and-Levels","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/10-Subscription-Offers#Offer-Codes":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Offer-Codes","title":"Offer Codes","kind":"section","abstract":[{"type":"text","text":"Implement new user acquisition and churn prevention strategies"},{"type":"text","text":" "},{"text":"using Introductory Offers, Promotional Offers, and Offer Codes.","type":"text"}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/10-subscription-offers#Offer-Codes","type":"section"},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-7:-Advanced-Subscription-Management":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-7:-Advanced-Subscription-Management","title":"Ring 7: Advanced Subscription Management","kind":"article","abstract":[],"role":"article","url":"\/tutorials\/table-of-contents\/ring-7:-advanced-subscription-management","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/09-AppStore#Server-Notifications-V2":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore#Server-Notifications-V2","title":"Server Notifications V2","kind":"section","abstract":[{"type":"text","text":"Validate subscription status from the server side"},{"type":"text","text":" "},{"text":"and handle real-time events with App Store Server Notifications.","type":"text"}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/09-appstore#Server-Notifications-V2","type":"section"},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-2:-Loading-Products":{"type":"topic","kind":"article","title":"Ring 2: Loading Products","role":"article","url":"\/tutorials\/table-of-contents\/ring-2:-loading-products","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-2:-Loading-Products","abstract":[]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/01-Understanding-StoreKit":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/01-Understanding-StoreKit","title":"Understanding StoreKit 2","kind":"project","abstract":[{"text":"Learn the core concepts of StoreKit 2 and HIG in-app purchase guidelines.","type":"text"}],"role":"project","url":"\/tutorials\/higstorekit\/01-understanding-storekit","estimatedTime":"10min","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/02-Loading-Products#Loading-Products":{"type":"section","kind":"section","title":"Loading Products","role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/02-loading-products#Loading-Products","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/02-Loading-Products#Loading-Products","abstract":[{"type":"text","text":"Load product information configured in App Store Connect."}]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/09-AppStore#Server-API-Overview":{"type":"section","kind":"section","title":"Server API Overview","role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/09-appstore#Server-API-Overview","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore#Server-API-Overview","abstract":[{"type":"text","text":"Validate subscription status from the server side"},{"type":"text","text":" "},{"type":"text","text":"and handle real-time events with App Store Server Notifications."}]},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-5:-Paywall-UI":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-5:-Paywall-UI","title":"Ring 5: Paywall UI","kind":"article","abstract":[],"role":"article","url":"\/tutorials\/table-of-contents\/ring-5:-paywall-ui","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/10-Subscription-Offers#Promotional-Offers":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Promotional-Offers","title":"Promotional Offers","kind":"section","abstract":[{"type":"text","text":"Implement new user acquisition and churn prevention strategies"},{"type":"text","text":" "},{"type":"text","text":"using Introductory Offers, Promotional Offers, and Offer Codes."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/10-subscription-offers#Promotional-Offers","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/04-Subscription-Status":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/04-Subscription-Status","title":"Managing Subscription Status","kind":"project","abstract":[{"type":"text","text":"Check subscription status and handle renewals."}],"role":"project","url":"\/tutorials\/higstorekit\/04-subscription-status","estimatedTime":"15min","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-10:-Subscription-Discount-Offers":{"type":"topic","kind":"article","title":"Ring 10: Subscription Discount Offers","role":"article","url":"\/tutorials\/table-of-contents\/ring-10:-subscription-discount-offers","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-10:-Subscription-Discount-Offers","abstract":[]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/02-Loading-Products":{"type":"topic","kind":"project","title":"Loading Products","role":"project","estimatedTime":"15min","url":"\/tutorials\/higstorekit\/02-loading-products","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/02-Loading-Products","abstract":[{"text":"Load product information configured in App Store Connect.","type":"text"}]},"08-family-info-view.swift":{"fileName":"FamilyShareInfoView.swift","fileType":"swift","identifier":"08-family-info-view.swift","content":["import SwiftUI","import StoreKit","","\/\/\/ 가족 공유 사용자를 위한 정보 뷰","struct FamilyShareInfoView: View {","    @EnvironmentObject var familyManager: FamilyShareManager","    @EnvironmentObject var entitlementManager: EntitlementManager","    ","    var body: some View {","        VStack(spacing: 20) {","            \/\/ 가족 공유 배지","            Image(systemName: \"person.3.fill\")","                .font(.system(size: 60))","                .foregroundStyle(.blue)","            ","            Text(\"가족 공유 멤버\")","                .font(.title2.bold())","            ","            Text(\"가족 구성원의 구독을 통해 프리미엄 기능을 사용하고 있습니다.\")","                .font(.subheadline)","                .foregroundStyle(.secondary)","                .multilineTextAlignment(.center)","            ","            Divider()","            ","            \/\/ 사용 가능한 기능","            VStack(alignment: .leading, spacing: 12) {","                Label(\"모든 프리미엄 콘텐츠\", systemImage: \"checkmark.circle.fill\")","                Label(\"광고 제거\", systemImage: \"checkmark.circle.fill\")","                Label(\"오프라인 저장\", systemImage: \"checkmark.circle.fill\")","            }","            .foregroundStyle(.green)","            ","            Divider()","            ","            \/\/ 제한 사항 안내","            VStack(alignment: .leading, spacing: 8) {","                Text(\"알아두세요\")","                    .font(.headline)","                ","                Text(\"• 구독 관리는 원래 구매자만 가능합니다\")","                Text(\"• 가족 그룹에서 나가면 접근이 종료됩니다\")","                Text(\"• 구독 취소 시 모든 가족 구성원 접근이 종료됩니다\")","            }","            .font(.caption)","            .foregroundStyle(.secondary)","            ","            Spacer()","            ","            \/\/ 직접 구독 유도 (선택)","            Button {","                \/\/ 직접 구독 화면으로 이동","            } label: {","                Text(\"나만의 구독 시작하기\")","            }","            .buttonStyle(.bordered)","        }","        .padding()","    }","}"],"syntax":"swift","highlights":[],"type":"file"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/04-Subscription-Status#Checking-Subscription-Status":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/04-Subscription-Status#Checking-Subscription-Status","title":"Checking Subscription Status","kind":"section","abstract":[{"text":"Check subscription status and handle renewals.","type":"text"}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/04-subscription-status#Checking-Subscription-Status","type":"section"},"08-entitlement-manager.swift":{"fileName":"EntitlementManager.swift","fileType":"swift","identifier":"08-entitlement-manager.swift","content":["import StoreKit","","\/\/\/ 사용자 권한을 관리하는 매니저","@MainActor","class EntitlementManager: ObservableObject {","    ","    @Published var hasActiveSubscription = false","    @Published var ownershipType: Transaction.OwnershipType?","    @Published var premiumFeatures: Set<String> = []","    ","    \/\/\/ 현재 권한 로드","    func loadEntitlements() async {","        var activeSubscription: Transaction?","        ","        for await result in Transaction.currentEntitlements {","            guard case .verified(let transaction) = result else { continue }","            ","            switch transaction.productType {","            case .autoRenewable:","                activeSubscription = transaction","                self.ownershipType = transaction.ownershipType","                ","            case .nonConsumable:","                \/\/ 비소모성 상품은 기능 잠금 해제","                premiumFeatures.insert(transaction.productID)","                ","            default:","                break","            }","        }","        ","        self.hasActiveSubscription = activeSubscription != nil","    }","    ","    \/\/\/ 소유권 타입에 따른 권한 레벨","    var accessLevel: AccessLevel {","        guard hasActiveSubscription else { return .free }","        ","        switch ownershipType {","        case .purchased:","            return .fullAccess","        case .familyShared:","            return .familyAccess","        default:","            return .free","        }","    }","    ","    enum AccessLevel {","        case free","        case familyAccess    \/\/ 가족 공유 - 일부 기능 제한 가능","        case fullAccess      \/\/ 직접 구매 - 모든 기능","        ","        var canManageSubscription: Bool {","            self == .fullAccess","        }","        ","        var description: String {","            switch self {","            case .free: return \"무료\"","            case .familyAccess: return \"가족 공유\"","            case .fullAccess: return \"프리미엄\"","            }","        }","    }","}"],"syntax":"swift","highlights":[],"type":"file"},"08-family-revoked.swift":{"type":"file","fileName":"FamilyShareRevokedView.swift","content":["import SwiftUI","","\/\/\/ 가족 공유 취소 시 안내 뷰","struct FamilyShareRevokedView: View {","    @Environment(\\.dismiss) private var dismiss","    var onSubscribe: () -> Void","    ","    var body: some View {","        VStack(spacing: 24) {","            \/\/ 아이콘","            Image(systemName: \"person.crop.circle.badge.xmark\")","                .font(.system(size: 80))","                .foregroundStyle(.orange)","            ","            \/\/ 제목","            Text(\"가족 공유가 종료되었습니다\")","                .font(.title2.bold())","            ","            \/\/ 설명","            Text(\"더 이상 가족 구독을 통해 프리미엄 기능을 사용할 수 없습니다. 직접 구독하시면 모든 기능을 계속 이용할 수 있습니다.\")","                .font(.body)","                .foregroundStyle(.secondary)","                .multilineTextAlignment(.center)","            ","            Spacer()","            ","            \/\/ 액션 버튼들","            VStack(spacing: 12) {","                Button {","                    onSubscribe()","                    dismiss()","                } label: {","                    Text(\"지금 구독하기\")","                        .frame(maxWidth: .infinity)","                }","                .buttonStyle(.borderedProminent)","                ","                Button {","                    dismiss()","                } label: {","                    Text(\"나중에\")","                        .frame(maxWidth: .infinity)","                }","                .buttonStyle(.bordered)","            }","            ","            \/\/ 무료 기능 안내","            Text(\"무료 기능은 계속 사용할 수 있습니다\")","                .font(.caption)","                .foregroundStyle(.secondary)","        }","        .padding()","        .interactiveDismissDisabled()","    }","}","","\/\/ MARK: - Preview","#Preview {","    FamilyShareRevokedView {","        print(\"Subscribe tapped\")","    }","}"],"fileType":"swift","syntax":"swift","identifier":"08-family-revoked.swift","highlights":[]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/11-Testing#StoreKit-Configuration-File":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#StoreKit-Configuration-File","title":"StoreKit Configuration File","kind":"section","abstract":[{"type":"text","text":"Thoroughly test in-app purchase functionality using"},{"text":" ","type":"text"},{"type":"text","text":"Xcode’s StoreKit Testing and Sandbox environment."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/11-testing#StoreKit-Configuration-File","type":"section"},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-11:-StoreKit-Testing":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-11:-StoreKit-Testing","title":"Ring 11: StoreKit Testing","kind":"article","abstract":[],"role":"article","url":"\/tutorials\/table-of-contents\/ring-11:-storekit-testing","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/10-Subscription-Offers#Introductory-Offers":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Introductory-Offers","title":"Introductory Offers","kind":"section","abstract":[{"type":"text","text":"Implement new user acquisition and churn prevention strategies"},{"text":" ","type":"text"},{"type":"text","text":"using Introductory Offers, Promotional Offers, and Offer Codes."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/10-subscription-offers#Introductory-Offers","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/11-Testing#Error-Scenario-Testing":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#Error-Scenario-Testing","title":"Error Scenario Testing","kind":"section","abstract":[{"text":"Thoroughly test in-app purchase functionality using","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"Xcode’s StoreKit Testing and Sandbox environment."}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/11-testing#Error-Scenario-Testing","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/01-Understanding-StoreKit#What-is-StoreKit-2":{"type":"section","kind":"section","title":"What is StoreKit 2?","role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/01-understanding-storekit#What-is-StoreKit-2","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/01-Understanding-StoreKit#What-is-StoreKit-2","abstract":[{"type":"text","text":"Learn the core concepts of StoreKit 2 and HIG in-app purchase guidelines."}]},"08-family-share-manager.swift":{"fileName":"FamilyShareManager.swift","fileType":"swift","identifier":"08-family-share-manager.swift","content":["import StoreKit","","\/\/\/ 가족 공유 상태를 관리하는 매니저","@MainActor","class FamilyShareManager: ObservableObject {","    ","    @Published var isFamilyShareEnabled = false","    @Published var ownershipType: Transaction.OwnershipType?","    ","    \/\/\/ 현재 사용자가 구매자인지 확인","    var isPurchaser: Bool {","        ownershipType == .purchased","    }","    ","    \/\/\/ 현재 사용자가 가족 공유 수혜자인지 확인","    var isFamilyMember: Bool {","        ownershipType == .familyShared","    }","    ","    \/\/\/ 구독의 소유권 타입 확인","    func checkOwnershipType() async {","        for await result in Transaction.currentEntitlements {","            guard case .verified(let transaction) = result,","                  transaction.productType == .autoRenewable else {","                continue","            }","            ","            self.ownershipType = transaction.ownershipType","            self.isFamilyShareEnabled = true","            return","        }","        ","        \/\/ 유효한 구독 없음","        self.ownershipType = nil","        self.isFamilyShareEnabled = false","    }","    ","    \/\/\/ 가족 공유 해제 감지를 위한 트랜잭션 모니터링","    func startMonitoring() {","        Task {","            for await result in Transaction.updates {","                guard case .verified(let transaction) = result else { continue }","                ","                \/\/ revocationDate가 있으면 가족 공유 해제됨","                if transaction.revocationDate != nil {","                    await handleRevocation(transaction)","                } else {","                    await checkOwnershipType()","                }","            }","        }","    }","    ","    private func handleRevocation(_ transaction: Transaction) async {","        self.ownershipType = nil","        self.isFamilyShareEnabled = false","        \/\/ UI에서 적절한 안내 표시","    }","}"],"syntax":"swift","highlights":[],"type":"file"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/05-Paywall-UI#Paywall-Design":{"type":"section","kind":"section","title":"Paywall Design","role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/05-paywall-ui#Paywall-Design","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/05-Paywall-UI#Paywall-Design","abstract":[{"type":"text","text":"Design a paywall screen that follows Apple HIG guidelines."}]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/11-Testing#Check-Your-Understanding":{"type":"link","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing#Check-Your-Understanding","url":"\/tutorials\/higstorekit\/11-testing#Check-Your-Understanding","title":"Check Your Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/07-Subscriptions#Check-Your-Understanding":{"type":"link","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/07-Subscriptions#Check-Your-Understanding","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"title":"Check Your Understanding","url":"\/tutorials\/higstorekit\/07-subscriptions#Check-Your-Understanding"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/09-AppStore#Check-Your-Understanding":{"type":"link","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/09-AppStore#Check-Your-Understanding","titleInlineContent":[{"type":"text","text":"Check Your Understanding"}],"title":"Check Your Understanding","url":"\/tutorials\/higstorekit\/09-appstore#Check-Your-Understanding"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/10-Subscription-Offers":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers","title":"Subscription Discount Offers","kind":"project","abstract":[{"text":"Implement new user acquisition and churn prevention strategies","type":"text"},{"type":"text","text":" "},{"text":"using Introductory Offers, Promotional Offers, and Offer Codes.","type":"text"}],"role":"project","url":"\/tutorials\/higstorekit\/10-subscription-offers","estimatedTime":"30min","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/10-Subscription-Offers#Offer-Strategy-HIG-Guidelines":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/10-Subscription-Offers#Offer-Strategy-HIG-Guidelines","title":"Offer Strategy & HIG Guidelines","kind":"section","abstract":[{"type":"text","text":"Implement new user acquisition and churn prevention strategies"},{"text":" ","type":"text"},{"text":"using Introductory Offers, Promotional Offers, and Offer Codes.","type":"text"}],"role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/10-subscription-offers#Offer-Strategy-HIG-Guidelines","type":"section"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/03-Purchase-Flow#Purchase-Handling":{"type":"section","kind":"section","title":"Purchase Handling","role":"pseudoSymbol","url":"\/tutorials\/higstorekit\/03-purchase-flow#Purchase-Handling","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/03-Purchase-Flow#Purchase-Handling","abstract":[{"type":"text","text":"Implement the complete flow for users to purchase products."}]},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-1:-Understanding-StoreKit-2":{"identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-1:-Understanding-StoreKit-2","title":"Ring 1: Understanding StoreKit 2","kind":"article","abstract":[],"role":"article","url":"\/tutorials\/table-of-contents\/ring-1:-understanding-storekit-2","type":"topic"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/03-Purchase-Flow":{"type":"topic","kind":"project","title":"Implementing Purchase Flow","role":"project","estimatedTime":"15min","url":"\/tutorials\/higstorekit\/03-purchase-flow","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/03-Purchase-Flow","abstract":[{"type":"text","text":"Implement the complete flow for users to purchase products."}]},"doc://storekit.HIGStoreKit/tutorials/Table-of-Contents/Ring-4:-Subscription-Management":{"type":"topic","kind":"article","title":"Ring 4: Subscription Management","role":"article","url":"\/tutorials\/table-of-contents\/ring-4:-subscription-management","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/Table-of-Contents\/Ring-4:-Subscription-Management","abstract":[]},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/08-FamilySharing#Check-Your-Understanding":{"type":"link","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/08-FamilySharing#Check-Your-Understanding","titleInlineContent":[{"text":"Check Your Understanding","type":"text"}],"title":"Check Your Understanding","url":"\/tutorials\/higstorekit\/08-familysharing#Check-Your-Understanding"},"doc://storekit.HIGStoreKit/tutorials/HIGStoreKit/11-Testing":{"type":"topic","kind":"project","title":"StoreKit Testing","role":"project","estimatedTime":"25min","url":"\/tutorials\/higstorekit\/11-testing","identifier":"doc:\/\/storekit.HIGStoreKit\/tutorials\/HIGStoreKit\/11-Testing","abstract":[{"text":"Thoroughly test in-app purchase functionality using","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"Xcode’s StoreKit Testing and Sandbox environment."}]}}}