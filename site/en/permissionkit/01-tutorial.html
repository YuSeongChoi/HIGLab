<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>ğŸ›¡ï¸ PermissionKit â€” HIG Lab</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
<style>
:root{--bg:#fafafa;--text:#1d1d1f;--text-2:#6e6e73;--accent:#0071e3;--code-bg:#1e1e2e;--border:#d2d2d7}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.8}
.top-bar{position:sticky;top:0;z-index:100;background:rgba(250,250,250,0.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.top-bar-inner{max-width:800px;margin:0 auto;padding:12px 24px;display:flex;justify-content:space-between}
.top-logo{font-size:16px;font-weight:700;text-decoration:none;color:var(--text)}.top-logo span{color:var(--accent)}
article{max-width:800px;margin:0 auto;padding:48px 24px 120px}
h1{font-size:clamp(28px,5vw,40px);font-weight:900;margin-bottom:16px;letter-spacing:-1px}
h2{font-size:24px;font-weight:800;margin:48px 0 16px}p{margin-bottom:16px}
.subtitle{font-size:18px;color:var(--text-2);margin-bottom:32px}
.code-block{background:var(--code-bg);border-radius:12px;margin:20px 0;overflow:hidden}
.code-header{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.1);font-size:12px;color:#6e6e73;font-weight:600}
pre.code-body{margin:0;padding:16px;font-family:'JetBrains Mono',monospace;font-size:13px;color:#cdd6f4;white-space:pre;overflow-x:auto}
.kw{color:#cba6f7}.type{color:#89b4fa}.str{color:#a6e3a1}.comment{color:#6c7086}
.badge{display:inline-block;padding:4px 12px;border-radius:16px;font-size:13px;font-weight:600;margin:0 4px 8px 0}
.badge.ios{background:#0071e3;color:#fff}.badge.new{background:#34c759;color:#fff}
ul{margin:16px 0 16px 24px}li{margin:8px 0}
.info-box{background:#f5f5f7;border-left:4px solid var(--accent);padding:16px;margin:24px 0;border-radius:8px}
</style></head>
<body>
<div class="top-bar"><div class="top-bar-inner"><a href="../index.html" class="top-logo">HIG <span>Lab</span></a><a href="../../permissionkit/01-tutorial.html" class="lang-toggle" style="font-size:12px;font-weight:600;color:#0071e3;text-decoration:none;padding:4px 10px;border:1.5px solid #0071e3;border-radius:12px;">ğŸ‡°ğŸ‡· KO</a></div></div>
<article>
<h1>ğŸ›¡ï¸ PermissionKit</h1>
<!-- higlab-metadata -->
<div style="display:flex;gap:16px;align-items:center;margin:12px 0 24px;padding:12px 16px;background:var(--tag-bg,#f5f5f7);border-radius:10px;font-size:13px;color:var(--text-2,#6e6e73);flex-wrap:wrap;">
  <span>â­ Difficulty: â­â­</span>
  <span>â±ï¸ Est. Time: 1h</span>
  <span>ğŸ“‚ iOS 26</span>
</div>
<p class="subtitle">Build privacy-respecting apps with unified permission management</p>

<div><span class="badge ios">iOS 18+</span><span class="badge new">ğŸ†• 2024</span></div>

<h2>âœ¨ PermissionKit is?</h2>
<p>PermissionKit is a unified permission management framework introduced in iOS 18. It manages various system permissions â€” camera, microphone, location, notifications, contacts â€” through a single consistent API. It tracks permission status in real-time, provides deep links to Settings when denied, and displays contextual explanations before requesting permissions to improve UX. A modern, privacy-first permission management solution.</p>

<div class="info-box">
<strong>ğŸ’¡ Key Features:</strong> Unified Permission API Â· Real-Time Status Tracking Â· Settings Deep Link Â· Contextual UI Â· Partial Permissions Â· Provisional Access Â· Permission Groups Â· SwiftUI Integration
</div>

<h2>ğŸ¯ 1. Basic Setup</h2>
<p>Set up PermissionKit and add permission descriptions to Info.plist.</p>

<div class="code-block">
<div class="code-header">Info.plist â€” Add Permission Descriptions</div>
<pre class="code-body"><span class="comment">&lt;!-- ì¹´ë©”ë¼ --&gt;</span>
<span class="kw">&lt;key&gt;</span>NSCameraUsageDescription<span class="kw">&lt;/key&gt;</span>
<span class="kw">&lt;string&gt;</span>ì‚¬ì§„ì„ ì´¬ì˜í•˜ê³  í”„ë¡œí•„ ì´ë¯¸ì§€ë¥¼ ì„¤ì •í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.<span class="kw">&lt;/string&gt;</span>

<span class="comment">&lt;!-- ì‚¬ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬ --&gt;</span>
<span class="kw">&lt;key&gt;</span>NSPhotoLibraryUsageDescription<span class="kw">&lt;/key&gt;</span>
<span class="kw">&lt;string&gt;</span>ì‚¬ì§„ì„ ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.<span class="kw">&lt;/string&gt;</span>

<span class="comment">&lt;!-- ìœ„ì¹˜ (ì‚¬ìš© ì¤‘) --&gt;</span>
<span class="kw">&lt;key&gt;</span>NSLocationWhenInUseUsageDescription<span class="kw">&lt;/key&gt;</span>
<span class="kw">&lt;string&gt;</span>ì£¼ë³€ ì¥ì†Œë¥¼ ê²€ìƒ‰í•˜ê³  ë‚ ì”¨ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.<span class="kw">&lt;/string&gt;</span>

<span class="comment">&lt;!-- ìœ„ì¹˜ (í•­ìƒ) --&gt;</span>
<span class="kw">&lt;key&gt;</span>NSLocationAlwaysAndWhenInUseUsageDescription<span class="kw">&lt;/key&gt;</span>
<span class="kw">&lt;string&gt;</span>ìœ„ì¹˜ ê¸°ë°˜ ì•Œë¦¼ì„ ë³´ë‚´ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.<span class="kw">&lt;/string&gt;</span>

<span class="comment">&lt;!-- ë§ˆì´í¬ --&gt;</span>
<span class="kw">&lt;key&gt;</span>NSMicrophoneUsageDescription<span class="kw">&lt;/key&gt;</span>
<span class="kw">&lt;string&gt;</span>ìŒì„± ë©”ì‹œì§€ë¥¼ ë…¹ìŒí•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.<span class="kw">&lt;/string&gt;</span>

<span class="comment">&lt;!-- ì—°ë½ì²˜ --&gt;</span>
<span class="kw">&lt;key&gt;</span>NSContactsUsageDescription<span class="kw">&lt;/key&gt;</span>
<span class="kw">&lt;string&gt;</span>ì¹œêµ¬ë¥¼ ì°¾ê³  ì´ˆëŒ€í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.<span class="kw">&lt;/string&gt;</span>

<span class="comment">&lt;!-- ì•Œë¦¼ --&gt;</span>
<span class="kw">&lt;key&gt;</span>NSUserNotificationsUsageDescription<span class="kw">&lt;/key&gt;</span>
<span class="kw">&lt;string&gt;</span>ì¤‘ìš”í•œ ì—…ë°ì´íŠ¸ë¥¼ ì•Œë ¤ë“œë¦¬ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.<span class="kw">&lt;/string&gt;</span></pre>
</div>

<div class="code-block">
<div class="code-header">PermissionManager.swift â€” Permission Manager</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">AVFoundation</span>
<span class="kw">import</span> <span class="type">CoreLocation</span>
<span class="kw">import</span> <span class="type">UserNotifications</span>
<span class="kw">import</span> <span class="type">Contacts</span>
<span class="kw">import</span> <span class="type">Photos</span>

<span class="comment">// ê¶Œí•œ íƒ€ì…</span>
<span class="kw">enum</span> <span class="type">PermissionType</span>: <span class="type">String</span>, <span class="type">CaseIterable</span>, <span class="type">Identifiable</span> {
    <span class="kw">case</span> camera = <span class="str">"ì¹´ë©”ë¼"</span>
    <span class="kw">case</span> photoLibrary = <span class="str">"ì‚¬ì§„"</span>
    <span class="kw">case</span> location = <span class="str">"ìœ„ì¹˜"</span>
    <span class="kw">case</span> microphone = <span class="str">"ë§ˆì´í¬"</span>
    <span class="kw">case</span> contacts = <span class="str">"ì—°ë½ì²˜"</span>
    <span class="kw">case</span> notifications = <span class="str">"ì•Œë¦¼"</span>

    <span class="kw">var</span> id: <span class="type">String</span> { rawValue }

    <span class="kw">var</span> icon: <span class="type">String</span> {
        <span class="kw">switch</span> <span class="kw">self</span> {
        <span class="kw">case</span> .camera: <span class="kw">return</span> <span class="str">"camera.fill"</span>
        <span class="kw">case</span> .photoLibrary: <span class="kw">return</span> <span class="str">"photo.fill"</span>
        <span class="kw">case</span> .location: <span class="kw">return</span> <span class="str">"location.fill"</span>
        <span class="kw">case</span> .microphone: <span class="kw">return</span> <span class="str">"mic.fill"</span>
        <span class="kw">case</span> .contacts: <span class="kw">return</span> <span class="str">"person.2.fill"</span>
        <span class="kw">case</span> .notifications: <span class="kw">return</span> <span class="str">"bell.fill"</span>
        }
    }

    <span class="kw">var</span> description: <span class="type">String</span> {
        <span class="kw">switch</span> <span class="kw">self</span> {
        <span class="kw">case</span> .camera: <span class="kw">return</span> <span class="str">"ì‚¬ì§„ê³¼ ë¹„ë””ì˜¤ë¥¼ ì´¬ì˜í•˜ëŠ”ë° í•„ìš”í•©ë‹ˆë‹¤"</span>
        <span class="kw">case</span> .photoLibrary: <span class="kw">return</span> <span class="str">"ì‚¬ì§„ì„ ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¤ëŠ”ë° í•„ìš”í•©ë‹ˆë‹¤"</span>
        <span class="kw">case</span> .location: <span class="kw">return</span> <span class="str">"ì£¼ë³€ ì¥ì†Œë¥¼ ì°¾ëŠ”ë° í•„ìš”í•©ë‹ˆë‹¤"</span>
        <span class="kw">case</span> .microphone: <span class="kw">return</span> <span class="str">"ìŒì„±ì„ ë…¹ìŒí•˜ëŠ”ë° í•„ìš”í•©ë‹ˆë‹¤"</span>
        <span class="kw">case</span> .contacts: <span class="kw">return</span> <span class="str">"ì¹œêµ¬ë¥¼ ì°¾ëŠ”ë° í•„ìš”í•©ë‹ˆë‹¤"</span>
        <span class="kw">case</span> .notifications: <span class="kw">return</span> <span class="str">"ì¤‘ìš”í•œ ì•Œë¦¼ì„ ë°›ëŠ”ë° í•„ìš”í•©ë‹ˆë‹¤"</span>
        }
    }
}

<span class="comment">// ê¶Œí•œ ìƒíƒœ</span>
<span class="kw">enum</span> <span class="type">PermissionStatus</span> {
    <span class="kw">case</span> notDetermined
    <span class="kw">case</span> authorized
    <span class="kw">case</span> denied
    <span class="kw">case</span> restricted
    <span class="kw">case</span> limited <span class="comment">// ë¶€ë¶„ ê¶Œí•œ (ì‚¬ì§„ ë“±)</span>

    <span class="kw">var</span> color: <span class="type">Color</span> {
        <span class="kw">switch</span> <span class="kw">self</span> {
        <span class="kw">case</span> .notDetermined: <span class="kw">return</span> .gray
        <span class="kw">case</span> .authorized: <span class="kw">return</span> .green
        <span class="kw">case</span> .denied: <span class="kw">return</span> .red
        <span class="kw">case</span> .restricted: <span class="kw">return</span> .orange
        <span class="kw">case</span> .limited: <span class="kw">return</span> .yellow
        }
    }

    <span class="kw">var</span> text: <span class="type">String</span> {
        <span class="kw">switch</span> <span class="kw">self</span> {
        <span class="kw">case</span> .notDetermined: <span class="kw">return</span> <span class="str">"ë¯¸ì„¤ì •"</span>
        <span class="kw">case</span> .authorized: <span class="kw">return</span> <span class="str">"í—ˆìš©ë¨"</span>
        <span class="kw">case</span> .denied: <span class="kw">return</span> <span class="str">"ê±°ë¶€ë¨"</span>
        <span class="kw">case</span> .restricted: <span class="kw">return</span> <span class="str">"ì œí•œë¨"</span>
        <span class="kw">case</span> .limited: <span class="kw">return</span> <span class="str">"ì œí•œì  í—ˆìš©"</span>
        }
    }
}

<span class="comment">// í†µí•© ê¶Œí•œ ê´€ë¦¬ì</span>
<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">PermissionManager</span> {
    <span class="kw">var</span> permissions: [<span class="type">PermissionType</span>: <span class="type">PermissionStatus</span>] = [:]

    <span class="kw">init</span>() {
        <span class="comment">// ì´ˆê¸° ìƒíƒœ í™•ì¸</span>
        <span class="type">Task</span> {
            <span class="kw">await</span> checkAllPermissions()
        }
    }

    <span class="comment">// ëª¨ë“  ê¶Œí•œ ìƒíƒœ í™•ì¸</span>
    <span class="kw">func</span> checkAllPermissions() <span class="kw">async</span> {
        <span class="kw">for</span> type <span class="kw">in</span> <span class="type">PermissionType</span>.allCases {
            <span class="kw">let</span> status = <span class="kw">await</span> checkPermission(type)
            <span class="kw">await</span> <span class="type">MainActor</span>.run {
                permissions[type] = status
            }
        }
    }

    <span class="comment">// ê°œë³„ ê¶Œí•œ í™•ì¸</span>
    <span class="kw">func</span> checkPermission(<span class="kw">_</span> type: <span class="type">PermissionType</span>) <span class="kw">async</span> -> <span class="type">PermissionStatus</span> {
        <span class="kw">switch</span> type {
        <span class="kw">case</span> .camera:
            <span class="kw">return</span> checkCameraPermission()

        <span class="kw">case</span> .photoLibrary:
            <span class="kw">return</span> checkPhotoLibraryPermission()

        <span class="kw">case</span> .location:
            <span class="kw">return</span> checkLocationPermission()

        <span class="kw">case</span> .microphone:
            <span class="kw">return</span> checkMicrophonePermission()

        <span class="kw">case</span> .contacts:
            <span class="kw">return</span> <span class="kw">await</span> checkContactsPermission()

        <span class="kw">case</span> .notifications:
            <span class="kw">return</span> <span class="kw">await</span> checkNotificationPermission()
        }
    }

    <span class="comment">// ì¹´ë©”ë¼ ê¶Œí•œ</span>
    <span class="kw">func</span> checkCameraPermission() -> <span class="type">PermissionStatus</span> {
        <span class="kw">switch</span> <span class="type">AVCaptureDevice</span>.authorizationStatus(for: .video) {
        <span class="kw">case</span> .notDetermined: <span class="kw">return</span> .notDetermined
        <span class="kw">case</span> .authorized: <span class="kw">return</span> .authorized
        <span class="kw">case</span> .denied: <span class="kw">return</span> .denied
        <span class="kw">case</span> .restricted: <span class="kw">return</span> .restricted
        <span class="kw">@unknown</span> <span class="kw">default</span>: <span class="kw">return</span> .notDetermined
        }
    }

    <span class="comment">// ì‚¬ì§„ ê¶Œí•œ</span>
    <span class="kw">func</span> checkPhotoLibraryPermission() -> <span class="type">PermissionStatus</span> {
        <span class="kw">switch</span> <span class="type">PHPhotoLibrary</span>.authorizationStatus(for: .readWrite) {
        <span class="kw">case</span> .notDetermined: <span class="kw">return</span> .notDetermined
        <span class="kw">case</span> .authorized: <span class="kw">return</span> .authorized
        <span class="kw">case</span> .denied: <span class="kw">return</span> .denied
        <span class="kw">case</span> .restricted: <span class="kw">return</span> .restricted
        <span class="kw">case</span> .limited: <span class="kw">return</span> .limited
        <span class="kw">@unknown</span> <span class="kw">default</span>: <span class="kw">return</span> .notDetermined
        }
    }

    <span class="comment">// ìœ„ì¹˜ ê¶Œí•œ</span>
    <span class="kw">func</span> checkLocationPermission() -> <span class="type">PermissionStatus</span> {
        <span class="kw">let</span> status = <span class="type">CLLocationManager</span>().authorizationStatus

        <span class="kw">switch</span> status {
        <span class="kw">case</span> .notDetermined: <span class="kw">return</span> .notDetermined
        <span class="kw">case</span> .authorizedAlways, .authorizedWhenInUse: <span class="kw">return</span> .authorized
        <span class="kw">case</span> .denied: <span class="kw">return</span> .denied
        <span class="kw">case</span> .restricted: <span class="kw">return</span> .restricted
        <span class="kw">@unknown</span> <span class="kw">default</span>: <span class="kw">return</span> .notDetermined
        }
    }

    <span class="comment">// ë§ˆì´í¬ ê¶Œí•œ</span>
    <span class="kw">func</span> checkMicrophonePermission() -> <span class="type">PermissionStatus</span> {
        <span class="kw">switch</span> <span class="type">AVAudioSession</span>.sharedInstance().recordPermission {
        <span class="kw">case</span> .undetermined: <span class="kw">return</span> .notDetermined
        <span class="kw">case</span> .granted: <span class="kw">return</span> .authorized
        <span class="kw">case</span> .denied: <span class="kw">return</span> .denied
        <span class="kw">@unknown</span> <span class="kw">default</span>: <span class="kw">return</span> .notDetermined
        }
    }

    <span class="comment">// ì—°ë½ì²˜ ê¶Œí•œ</span>
    <span class="kw">func</span> checkContactsPermission() <span class="kw">async</span> -> <span class="type">PermissionStatus</span> {
        <span class="kw">switch</span> <span class="type">CNContactStore</span>.authorizationStatus(for: .contacts) {
        <span class="kw">case</span> .notDetermined: <span class="kw">return</span> .notDetermined
        <span class="kw">case</span> .authorized: <span class="kw">return</span> .authorized
        <span class="kw">case</span> .denied: <span class="kw">return</span> .denied
        <span class="kw">case</span> .restricted: <span class="kw">return</span> .restricted
        <span class="kw">@unknown</span> <span class="kw">default</span>: <span class="kw">return</span> .notDetermined
        }
    }

    <span class="comment">// ì•Œë¦¼ ê¶Œí•œ</span>
    <span class="kw">func</span> checkNotificationPermission() <span class="kw">async</span> -> <span class="type">PermissionStatus</span> {
        <span class="kw">let</span> settings = <span class="kw">await</span> <span class="type">UNUserNotificationCenter</span>.current().notificationSettings()

        <span class="kw">switch</span> settings.authorizationStatus {
        <span class="kw">case</span> .notDetermined: <span class="kw">return</span> .notDetermined
        <span class="kw">case</span> .authorized, .provisional, .ephemeral: <span class="kw">return</span> .authorized
        <span class="kw">case</span> .denied: <span class="kw">return</span> .denied
        <span class="kw">@unknown</span> <span class="kw">default</span>: <span class="kw">return</span> .notDetermined
        }
    }
}</pre>
</div>

<h2>ğŸ” 2. ê¶Œí•œ ìš”ì²­</h2>
<p>ì‚¬ìš©ìì—ê²Œ ê¶Œí•œì„ ìš”ì²­í•˜ê³  ê²°ê³¼ handling.</p>

<div class="code-block">
<div class="code-header">PermissionRequest.swift â€” Permission Request</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>

<span class="kw">extension</span> <span class="type">PermissionManager</span> {
    <span class="comment">// ê¶Œí•œ ìš”ì²­</span>
    <span class="kw">func</span> requestPermission(<span class="kw">_</span> type: <span class="type">PermissionType</span>) <span class="kw">async</span> -> <span class="type">PermissionStatus</span> {
        <span class="kw">switch</span> type {
        <span class="kw">case</span> .camera:
            <span class="kw">return</span> <span class="kw">await</span> requestCameraPermission()

        <span class="kw">case</span> .photoLibrary:
            <span class="kw">return</span> <span class="kw">await</span> requestPhotoLibraryPermission()

        <span class="kw">case</span> .location:
            <span class="comment">// ìœ„ì¹˜ëŠ” CLLocationManager ë¸ë¦¬ê²Œì´íŠ¸ í•„ìš”</span>
            <span class="kw">return</span> .notDetermined

        <span class="kw">case</span> .microphone:
            <span class="kw">return</span> <span class="kw">await</span> requestMicrophonePermission()

        <span class="kw">case</span> .contacts:
            <span class="kw">return</span> <span class="kw">await</span> requestContactsPermission()

        <span class="kw">case</span> .notifications:
            <span class="kw">return</span> <span class="kw">await</span> requestNotificationPermission()
        }
    }

    <span class="kw">func</span> requestCameraPermission() <span class="kw">async</span> -> <span class="type">PermissionStatus</span> {
        <span class="kw">let</span> granted = <span class="kw">await</span> <span class="type">AVCaptureDevice</span>.requestAccess(for: .video)
        <span class="kw">return</span> granted ? .authorized : .denied
    }

    <span class="kw">func</span> requestPhotoLibraryPermission() <span class="kw">async</span> -> <span class="type">PermissionStatus</span> {
        <span class="kw">let</span> status = <span class="kw">await</span> <span class="type">PHPhotoLibrary</span>.requestAuthorization(for: .readWrite)

        <span class="kw">switch</span> status {
        <span class="kw">case</span> .authorized: <span class="kw">return</span> .authorized
        <span class="kw">case</span> .limited: <span class="kw">return</span> .limited
        <span class="kw">case</span> .denied: <span class="kw">return</span> .denied
        <span class="kw">case</span> .restricted: <span class="kw">return</span> .restricted
        <span class="kw">default</span>: <span class="kw">return</span> .notDetermined
        }
    }

    <span class="kw">func</span> requestMicrophonePermission() <span class="kw">async</span> -> <span class="type">PermissionStatus</span> {
        <span class="kw">let</span> granted = <span class="kw">await</span> <span class="type">AVAudioSession</span>.sharedInstance().requestRecordPermission()
        <span class="kw">return</span> granted ? .authorized : .denied
    }

    <span class="kw">func</span> requestContactsPermission() <span class="kw">async</span> -> <span class="type">PermissionStatus</span> {
        <span class="kw">do</span> {
            <span class="kw">let</span> granted = <span class="kw">try</span> <span class="kw">await</span> <span class="type">CNContactStore</span>().requestAccess(for: .contacts)
            <span class="kw">return</span> granted ? .authorized : .denied
        } <span class="kw">catch</span> {
            <span class="kw">return</span> .denied
        }
    }

    <span class="kw">func</span> requestNotificationPermission() <span class="kw">async</span> -> <span class="type">PermissionStatus</span> {
        <span class="kw">do</span> {
            <span class="kw">let</span> granted = <span class="kw">try</span> <span class="kw">await</span> <span class="type">UNUserNotificationCenter</span>.current()
                .requestAuthorization(options: [.alert, .badge, .sound])
            <span class="kw">return</span> granted ? .authorized : .denied
        } <span class="kw">catch</span> {
            <span class="kw">return</span> .denied
        }
    }

    <span class="comment">// ì„¤ì • ì•±ìœ¼ë¡œ ì´ë™</span>
    <span class="kw">func</span> openSettings() {
        <span class="kw">guard</span> <span class="kw">let</span> settingsURL = <span class="type">URL</span>(string: <span class="type">UIApplication</span>.openSettingsURLString)
        <span class="kw">else</span> { <span class="kw">return</span> }

        <span class="type">UIApplication</span>.shared.open(settingsURL)
    }
}</pre>
</div>

<h2>ğŸ“± 3. ê¶Œí•œ UI</h2>
<p>ì‚¬ìš©ì ì¹œí™”ì ì¸ ê¶Œí•œ ìš”ì²­ í™”ë©´ì„ ë§Œë“­.</p>

<div class="code-block">
<div class="code-header">PermissionView.swift â€” ê¶Œí•œ í™”ë©´</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>

<span class="kw">struct</span> <span class="type">PermissionListView</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> manager = <span class="type">PermissionManager</span>()

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">NavigationStack</span> {
            <span class="type">List</span>(<span class="type">PermissionType</span>.allCases) { type <span class="kw">in</span>
                <span class="type">PermissionRow</span>(
                    type: type,
                    status: manager.permissions[type] ?? .notDetermined,
                    onRequest: {
                        <span class="type">Task</span> {
                            <span class="kw">let</span> newStatus = <span class="kw">await</span> manager.requestPermission(type)
                            manager.permissions[type] = newStatus
                        }
                    },
                    onOpenSettings: {
                        manager.openSettings()
                    }
                )
            }
            .navigationTitle(<span class="str">"ê¶Œí•œ ê´€ë¦¬"</span>)
            .task {
                <span class="kw">await</span> manager.checkAllPermissions()
            }
        }
    }
}

<span class="kw">struct</span> <span class="type">PermissionRow</span>: <span class="type">View</span> {
    <span class="kw">let</span> type: <span class="type">PermissionType</span>
    <span class="kw">let</span> status: <span class="type">PermissionStatus</span>
    <span class="kw">let</span> onRequest: () -> <span class="type">Void</span>
    <span class="kw">let</span> onOpenSettings: () -> <span class="type">Void</span>

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span>(alignment: .leading, spacing: <span class="str">12</span>) {
            <span class="type">HStack</span> {
                <span class="type">Image</span>(systemName: type.icon)
                    .font(.title2)
                    .foregroundStyle(.blue)
                    .frame(width: <span class="str">40</span>)

                <span class="type">VStack</span>(alignment: .leading, spacing: <span class="str">4</span>) {
                    <span class="type">Text</span>(type.rawValue)
                        .font(.headline)

                    <span class="type">Text</span>(type.description)
                        .font(.caption)
                        .foregroundStyle(.secondary)
                }

                <span class="type">Spacer</span>()

                <span class="comment">// ìƒíƒœ ë°°ì§€</span>
                <span class="type">Text</span>(status.text)
                    .font(.caption)
                    .fontWeight(.semibold)
                    .foregroundStyle(.white)
                    .padding(.horizontal, <span class="str">8</span>)
                    .padding(.vertical, <span class="str">4</span>)
                    .background(status.color)
                    .cornerRadius(<span class="str">8</span>)
            }

            <span class="comment">// ì•¡ì…˜ ë²„íŠ¼</span>
            <span class="kw">switch</span> status {
            <span class="kw">case</span> .notDetermined:
                <span class="type">Button</span> {
                    onRequest()
                } label: {
                    <span class="type">Text</span>(<span class="str">"ê¶Œí•œ í—ˆìš©"</span>)
                        .frame(maxWidth: .infinity)
                        .padding(<span class="str">8</span>)
                        .background(<span class="type">Color</span>.blue)
                        .foregroundStyle(.white)
                        .cornerRadius(<span class="str">8</span>)
                }
                .buttonStyle(.plain)

            <span class="kw">case</span> .denied:
                <span class="type">VStack</span>(spacing: <span class="str">8</span>) {
                    <span class="type">Text</span>(<span class="str">"ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤"</span>)
                        .font(.caption)
                        .foregroundStyle(.red)

                    <span class="type">Button</span> {
                        onOpenSettings()
                    } label: {
                        <span class="type">Label</span>(<span class="str">"ì„¤ì •ì—ì„œ í—ˆìš©í•˜ê¸°"</span>, systemImage: <span class="str">"gear"</span>)
                            .frame(maxWidth: .infinity)
                            .padding(<span class="str">8</span>)
                            .background(<span class="type">Color</span>.gray.opacity(<span class="str">0.2</span>))
                            .foregroundStyle(.primary)
                            .cornerRadius(<span class="str">8</span>)
                    }
                    .buttonStyle(.plain)
                }

            <span class="kw">case</span> .limited:
                <span class="type">Button</span> {
                    onRequest()
                } label: {
                    <span class="type">Text</span>(<span class="str">"ì „ì²´ ì•¡ì„¸ìŠ¤ í—ˆìš©"</span>)
                        .frame(maxWidth: .infinity)
                        .padding(<span class="str">8</span>)
                        .background(<span class="type">Color</span>.orange)
                        .foregroundStyle(.white)
                        .cornerRadius(<span class="str">8</span>)
                }
                .buttonStyle(.plain)

            <span class="kw">case</span> .authorized:
                <span class="type">HStack</span> {
                    <span class="type">Image</span>(systemName: <span class="str">"checkmark.circle.fill"</span>)
                        .foregroundStyle(.green)
                    <span class="type">Text</span>(<span class="str">"ê¶Œí•œì´ í—ˆìš©ë˜ì—ˆìŠµë‹ˆë‹¤"</span>)
                        .font(.caption)
                        .foregroundStyle(.secondary)
                }

            <span class="kw">case</span> .restricted:
                <span class="type">Text</span>(<span class="str">"ê¸°ê¸° ì„¤ì •ì— ì˜í•´ ì œí•œë˜ì—ˆìŠµë‹ˆë‹¤"</span>)
                    .font(.caption)
                    .foregroundStyle(.orange)
            }
        }
        .padding(.vertical, <span class="str">8</span>)
    }
}</pre>
</div>

<h2>ğŸ­ 4. ì˜¨ë³´ë”© í†µí•©</h2>
<p>Build an onboarding screen that explains and requests permissions on first launch.</p>

<div class="code-block">
<div class="code-header">PermissionOnboardingView.swift â€” Onboarding</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>

<span class="kw">struct</span> <span class="type">PermissionOnboardingView</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> manager = <span class="type">PermissionManager</span>()
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> currentStep = <span class="str">0</span>
    <span class="kw">@Environment</span>(\.<span class="kw">dismiss</span>) <span class="kw">var</span> dismiss

    <span class="kw">let</span> steps: [<span class="type">PermissionType</span>] = [.camera, .photoLibrary, .location, .notifications]

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span>(spacing: <span class="str">32</span>) {
            <span class="comment">// ì§„í–‰ í‘œì‹œ</span>
            <span class="type">HStack</span>(spacing: <span class="str">8</span>) {
                <span class="type">ForEach</span>(<span class="str">0</span>..<<span class="str">4</span>, id: \.<span class="kw">self</span>) { index <span class="kw">in</span>
                    <span class="type">Capsule</span>()
                        .fill(index <= currentStep ? <span class="type">Color</span>.blue : <span class="type">Color</span>.gray.opacity(<span class="str">0.3</span>))
                        .frame(height: <span class="str">4</span>)
                }
            }
            .padding(.horizontal)

            <span class="type">Spacer</span>()

            <span class="comment">// í˜„ì¬ ë‹¨ê³„ ì½˜í…ì¸ </span>
            <span class="kw">if</span> currentStep < steps.count {
                <span class="type">PermissionStepView</span>(type: steps[currentStep])
            } <span class="kw">else</span> {
                <span class="type">CompletionView</span>()
            }

            <span class="type">Spacer</span>()

            <span class="comment">// ì•¡ì…˜ ë²„íŠ¼</span>
            <span class="type">VStack</span>(spacing: <span class="str">12</span>) {
                <span class="kw">if</span> currentStep < steps.count {
                    <span class="type">Button</span> {
                        <span class="type">Task</span> {
                            <span class="kw">let</span> type = steps[currentStep]
                            <span class="kw">let</span> status = <span class="kw">await</span> manager.requestPermission(type)
                            manager.permissions[type] = status
                            currentStep += <span class="str">1</span>
                        }
                    } label: {
                        <span class="type">Text</span>(<span class="str">"í—ˆìš©"</span>)
                            .font(.headline)
                            .frame(maxWidth: .infinity)
                            .padding()
                            .background(<span class="type">Color</span>.blue)
                            .foregroundStyle(.white)
                            .cornerRadius(<span class="str">12</span>)
                    }

                    <span class="type">Button</span> {
                        currentStep += <span class="str">1</span>
                    } label: {
                        <span class="type">Text</span>(<span class="str">"ë‚˜ì¤‘ì—"</span>)
                            .font(.subheadline)
                            .foregroundStyle(.secondary)
                    }
                } <span class="kw">else</span> {
                    <span class="type">Button</span> {
                        dismiss()
                    } label: {
                        <span class="type">Text</span>(<span class="str">"ì‹œì‘í•˜ê¸°"</span>)
                            .font(.headline)
                            .frame(maxWidth: .infinity)
                            .padding()
                            .background(<span class="type">Color</span>.blue)
                            .foregroundStyle(.white)
                            .cornerRadius(<span class="str">12</span>)
                    }
                }
            }
            .padding()
        }
    }
}

<span class="kw">struct</span> <span class="type">PermissionStepView</span>: <span class="type">View</span> {
    <span class="kw">let</span> type: <span class="type">PermissionType</span>

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span>(spacing: <span class="str">24</span>) {
            <span class="comment">// ì•„ì´ì½˜</span>
            <span class="type">Image</span>(systemName: type.icon)
                .font(.system(size: <span class="str">80</span>))
                .foregroundStyle(.blue)
                .symbolEffect(.bounce)

            <span class="comment">// ì œëª©ê³¼ ì„¤ëª…</span>
            <span class="type">VStack</span>(spacing: <span class="str">8</span>) {
                <span class="type">Text</span>(type.rawValue)
                    .font(.title)
                    .fontWeight(.bold)

                <span class="type">Text</span>(type.description)
                    .font(.body)
                    .foregroundStyle(.secondary)
                    .multilineTextAlignment(.center)
            }
            .padding(.horizontal)

            <span class="comment">// ì‚¬ìš© ì˜ˆì‹œ</span>
            <span class="type">VStack</span>(alignment: .leading, spacing: <span class="str">12</span>) {
                <span class="type">Text</span>(<span class="str">"ì´ëŸ° ìš©ë„ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤:"</span>)
                    .font(.headline)

                <span class="type">VStack</span>(alignment: .leading, spacing: <span class="str">8</span>) {
                    usageExample(<span class="str">"í”„ë¡œí•„ ì‚¬ì§„ ì´¬ì˜"</span>)
                    usageExample(<span class="str">"ë¬¸ì„œ ìŠ¤ìº”"</span>)
                    usageExample(<span class="str">"AR ê¸°ëŠ¥ ì‚¬ìš©"</span>)
                }
            }
            .padding()
            .frame(maxWidth: .infinity, alignment: .leading)
            .background(<span class="type">Color</span>.gray.opacity(<span class="str">0.1</span>))
            .cornerRadius(<span class="str">12</span>)
            .padding(.horizontal)
        }
    }

    <span class="kw">func</span> usageExample(<span class="kw">_</span> text: <span class="type">String</span>) -> <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">HStack</span> {
            <span class="type">Image</span>(systemName: <span class="str">"checkmark.circle.fill"</span>)
                .foregroundStyle(.green)
            <span class="type">Text</span>(text)
                .font(.subheadline)
        }
    }
}

<span class="kw">struct</span> <span class="type">CompletionView</span>: <span class="type">View</span> {
    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span>(spacing: <span class="str">24</span>) {
            <span class="type">Image</span>(systemName: <span class="str">"checkmark.circle.fill"</span>)
                .font(.system(size: <span class="str">80</span>))
                .foregroundStyle(.green)

            <span class="type">VStack</span>(spacing: <span class="str">8</span>) {
                <span class="type">Text</span>(<span class="str">"ëª¨ë‘ ì™„ë£Œ!"</span>)
                    .font(.title)
                    .fontWeight(.bold)

                <span class="type">Text</span>(<span class="str">"ì´ì œ ì•±ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"</span>)
                    .font(.body)
                    .foregroundStyle(.secondary)
            }
        }
    }
}</pre>
</div>

<h2>ğŸ”„ 5. ì‹¤ì‹œê°„ ê¶Œí•œ ëª¨ë‹ˆí„°ë§</h2>
<p>Detect and respond to permission changes while the app is running.</p>

<div class="code-block">
<div class="code-header">PermissionMonitor.swift â€” Real-Time Monitoring</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">Combine</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">PermissionMonitor</span> {
    <span class="kw">var</span> cameraAvailable = <span class="kw">false</span>
    <span class="kw">var</span> locationAvailable = <span class="kw">false</span>
    <span class="kw">var</span> showPermissionAlert = <span class="kw">false</span>
    <span class="kw">var</span> alertMessage = <span class="str">""</span>

    <span class="kw">private</span> <span class="kw">var</span> cancellables = <span class="type">Set</span><<span class="type">AnyCancellable</span>>()

    <span class="kw">init</span>() {
        startMonitoring()
    }

    <span class="kw">func</span> startMonitoring() {
        <span class="comment">// ì•± í¬ê·¸ë¼ìš´ë“œ ì§„ì… ì‹œ ê¶Œí•œ ì¬í™•ì¸</span>
        <span class="type">NotificationCenter</span>.default.publisher(for: <span class="type">UIApplication</span>.willEnterForegroundNotification)
            .sink { <span class="kw">_</span> <span class="kw">in</span>
                <span class="type">Task</span> {
                    <span class="kw">await</span> <span class="kw">self</span>.checkPermissions()
                }
            }
            .store(in: &cancellables)
    }

    <span class="kw">func</span> checkPermissions() <span class="kw">async</span> {
        <span class="comment">// ì¹´ë©”ë¼ ê¶Œí•œ í™•ì¸</span>
        <span class="kw">let</span> cameraStatus = <span class="type">AVCaptureDevice</span>.authorizationStatus(for: .video)
        <span class="kw">let</span> cameraWasAvailable = cameraAvailable
        cameraAvailable = cameraStatus == .authorized

        <span class="comment">// ê¶Œí•œì´ ì·¨ì†Œëœ ê²½ìš°</span>
        <span class="kw">if</span> cameraWasAvailable && !cameraAvailable {
            <span class="kw">await</span> showAlert(<span class="str">"ì¹´ë©”ë¼ ê¶Œí•œì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤. ì„¤ì •ì—ì„œ ë‹¤ì‹œ í—ˆìš©í•´ì£¼ì„¸ìš”."</span>)
        }

        <span class="comment">// ìœ„ì¹˜ ê¶Œí•œ í™•ì¸</span>
        <span class="kw">let</span> locationStatus = <span class="type">CLLocationManager</span>().authorizationStatus
        <span class="kw">let</span> locationWasAvailable = locationAvailable
        locationAvailable = locationStatus == .authorizedWhenInUse || locationStatus == .authorizedAlways

        <span class="kw">if</span> locationWasAvailable && !locationAvailable {
            <span class="kw">await</span> showAlert(<span class="str">"ìœ„ì¹˜ ê¶Œí•œì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤. ì„¤ì •ì—ì„œ ë‹¤ì‹œ í—ˆìš©í•´ì£¼ì„¸ìš”."</span>)
        }
    }

    <span class="kw">func</span> showAlert(<span class="kw">_</span> message: <span class="type">String</span>) <span class="kw">async</span> {
        <span class="kw">await</span> <span class="type">MainActor</span>.run {
            alertMessage = message
            showPermissionAlert = <span class="kw">true</span>
        }
    }
}

<span class="comment">// ì‚¬ìš© ì˜ˆì œ</span>
<span class="kw">struct</span> <span class="type">CameraView</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> monitor = <span class="type">PermissionMonitor</span>()

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="kw">if</span> monitor.cameraAvailable {
                <span class="type">Text</span>(<span class="str">"ì¹´ë©”ë¼ ì‚¬ìš© ê°€ëŠ¥"</span>)
                <span class="comment">// ì¹´ë©”ë¼ UI</span>
            } <span class="kw">else</span> {
                <span class="type">ContentUnavailableView</span> {
                    <span class="type">Label</span>(<span class="str">"ì¹´ë©”ë¼ ê¶Œí•œ í•„ìš”"</span>, systemImage: <span class="str">"camera.fill"</span>)
                } description: {
                    <span class="type">Text</span>(<span class="str">"ì„¤ì •ì—ì„œ ì¹´ë©”ë¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”"</span>)
                } actions: {
                    <span class="type">Button</span>(<span class="str">"ì„¤ì • ì—´ê¸°"</span>) {
                        <span class="type">PermissionManager</span>().openSettings()
                    }
                }
            }
        }
        .alert(<span class="str">"ê¶Œí•œ ë³€ê²½"</span>, isPresented: $monitor.showPermissionAlert) {
            <span class="type">Button</span>(<span class="str">"ì„¤ì • ì—´ê¸°"</span>) {
                <span class="type">PermissionManager</span>().openSettings()
            }
            <span class="type">Button</span>(<span class="str">"í™•ì¸"</span>, role: .cancel) { }
        } message: {
            <span class="type">Text</span>(monitor.alertMessage)
        }
        .task {
            <span class="kw">await</span> monitor.checkPermissions()
        }
    }
}</pre>
</div>

<h2>ğŸ’¡ HIG Guidelines</h2>

<ul>
<li><strong>ëª…í™•í•œ ì´ìœ :</strong> ê¶Œí•œì´ ì™œ í•„ìš”í•œì§€ ì‚¬ìš©ìê°€ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì„¤ëª…</li>
<li><strong>Appropriate Timing:</strong> ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ëŠ” ì‹œì ì— ê¶Œí•œ ìš”ì²­</li>
<li><strong>ìš°ì•„í•œ ì €í•˜:</strong> ê¶Œí•œì´ ì—†ì–´ë„ ì•±ì˜ ë‹¤ë¥¸ ê¸°ëŠ¥ì€ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡</li>
<li><strong>ì¬ìš”ì²­ ê¸ˆì§€:</strong> ê±°ë¶€ëœ ê¶Œí•œì„ ë°˜ë³µì ìœ¼ë¡œ ìš”ì²­í•˜ì§€ ì•ŠìŒ</li>
<li><strong>ì„¤ì • ì•ˆë‚´:</strong> ê±°ë¶€ ì‹œ ì„¤ì • ì•±ìœ¼ë¡œ ì´ë™í•˜ëŠ” ëª…í™•í•œ ê²½ë¡œ ì œê³µ</li>
</ul>

<h2>ğŸ¯ Practical Usage</h2>

<ul>
<li><strong>ì†Œì…œ ì•±:</strong> ì—°ë½ì²˜, ì¹´ë©”ë¼, ì•Œë¦¼ ê¶Œí•œ í†µí•© ê´€ë¦¬</li>
<li><strong>í—¬ìŠ¤ ì•±:</strong> HealthKit, ìœ„ì¹˜, ì•Œë¦¼ ê¶Œí•œ ì˜¨ë³´ë”©</li>
<li><strong>í¬í†  ì•±:</strong> ì‚¬ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶€ë¶„ ê¶Œí•œ í™œìš©</li>
<li><strong>Messaging Apps:</strong> ë§ˆì´í¬, ì¹´ë©”ë¼ ì‹¤ì‹œê°„ ê¶Œí•œ í™•ì¸</li>
<li><strong>ë‚´ë¹„ê²Œì´ì…˜ ì•±:</strong> ìœ„ì¹˜ ê¶Œí•œ ìƒíƒœ ëª¨ë‹ˆí„°ë§</li>
</ul>

<h2>ğŸ“š Learn More</h2>

<ul>
<li><a href="https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture/requesting_authorization_for_media_capture_on_ios">Authorization for Media Capture</a></li>
<li><a href="https://developer.apple.com/documentation/corelocation/requesting_authorization_for_location_services">Location Services Authorization</a></li>
<li><a href="https://developer.apple.com/design/human-interface-guidelines/privacy">HIG: Privacy</a></li>
</ul>

<div class="info-box">
<strong>âš¡ï¸ íŒ:</strong> PermissionKit puts user privacy first. Always explain context before requesting permissions, and design your app to work properly even when denied. Leverage partial permissions (e.g., selected photos only) to increase user trust. Re-check permission status whenever the app returns to foreground for a consistent experience.
</div>

<div style="margin-top:48px;padding:24px;background:linear-gradient(135deg,#f5f5f7,#e8e8ed);border-radius:16px;">
  <h2 style="font-size:20px;margin-bottom:12px;">ğŸ“ Apple Official Resources</h2>
  <div style="display:flex;flex-wrap:wrap;gap:12px;">
    <a href="https://developer.apple.com/documentation/permissionkit" target="_blank" style="display:inline-flex;align-items:center;gap:6px;padding:10px 16px;background:white;border-radius:10px;text-decoration:none;color:var(--accent);font-weight:600;font-size:14px;border:1px solid var(--border);transition:all .2s;">ğŸ“˜ Documentation</a>
    <a href="https://developer.apple.com/videos/all-videos/?q=PermissionKit" target="_blank" style="display:inline-flex;align-items:center;gap:6px;padding:10px 16px;background:white;border-radius:10px;text-decoration:none;color:var(--accent);font-weight:600;font-size:14px;border:1px solid var(--border);transition:all .2s;">ğŸ¬ WWDC Sessions</a>
  </div>
</div>
</article>
</body></html>
