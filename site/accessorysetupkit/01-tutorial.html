<!DOCTYPE html>
<html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>ğŸ”— AccessorySetupKit 2 â€” HIG Lab</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
<style>
:root{--bg:#fafafa;--text:#1d1d1f;--text-2:#6e6e73;--accent:#0071e3;--code-bg:#1e1e2e;--border:#d2d2d7}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);color:var(--text);line-height:1.8}
.top-bar{position:sticky;top:0;z-index:100;background:rgba(250,250,250,0.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.top-bar-inner{max-width:800px;margin:0 auto;padding:12px 24px;display:flex;justify-content:space-between}
.top-logo{font-size:16px;font-weight:700;text-decoration:none;color:var(--text)}.top-logo span{color:var(--accent)}
article{max-width:800px;margin:0 auto;padding:48px 24px 120px}
h1{font-size:clamp(28px,5vw,40px);font-weight:900;margin-bottom:16px;letter-spacing:-1px}
h2{font-size:24px;font-weight:800;margin:48px 0 16px}p{margin-bottom:16px}
.subtitle{font-size:18px;color:var(--text-2);margin-bottom:32px}
.code-block{background:var(--code-bg);border-radius:12px;margin:20px 0;overflow:hidden}
.code-header{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.1);font-size:12px;color:#6e6e73;font-weight:600}
pre.code-body{margin:0;padding:16px;font-family:'JetBrains Mono',monospace;font-size:13px;color:#cdd6f4;white-space:pre;overflow-x:auto}
.kw{color:#cba6f7}.type{color:#89b4fa}.str{color:#a6e3a1}.comment{color:#6c7086}
.badge{display:inline-block;padding:4px 12px;border-radius:16px;font-size:13px;font-weight:600;margin:0 4px 8px 0}
.badge.ios{background:#0071e3;color:#fff}.badge.new{background:#34c759;color:#fff}
ul{margin:16px 0 16px 24px}li{margin:8px 0}
.info-box{background:#f5f5f7;border-left:4px solid var(--accent);padding:16px;margin:24px 0;border-radius:8px}
</style></head>
<body>
<div class="top-bar"><div class="top-bar-inner"><a href="../index.html" class="top-logo">HIG <span>Lab</span></a><a href="01-tutorial.en.html" class="lang-toggle" style="font-size:12px;font-weight:600;color:#0071e3;text-decoration:none;padding:4px 10px;border:1.5px solid #0071e3;border-radius:12px;">ğŸŒ EN</a></div></div>
<article>
<h1>ğŸ”— AccessorySetupKit 2</h1>
<p class="subtitle">Bluetooth & Wi-Fi ì•¡ì„¸ì„œë¦¬ ê°„í¸ í˜ì–´ë§</p>

<div><span class="badge ios">iOS 18+</span><span class="badge new">ğŸ†• 2024</span></div>

<h2>âœ¨ AccessorySetupKit 2ë€?</h2>
<p>AccessorySetupKit 2ëŠ” iOS 18ì—ì„œ ëŒ€í­ ê°œì„ ëœ ì•¡ì„¸ì„œë¦¬ ì„¤ì • í”„ë ˆì„ì›Œí¬ë¡œ, Bluetooth ë° Wi-Fi ê¸°ê¸°ë¥¼ ë³„ë„ì˜ ë³µì¡í•œ ì„¤ì • ì—†ì´ ê°„í¸í•˜ê²Œ ì—°ê²°í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. QR ì½”ë“œ ìŠ¤ìº”, Matter í”„ë¡œí† ì½œ ì§€ì›, HomeKit í†µí•©ì´ ê°•í™”ë˜ì—ˆìŠµë‹ˆë‹¤.</p>

<div class="info-box">
<strong>ğŸ’¡ í•µì‹¬ ê¸°ëŠ¥:</strong> ê°„í¸ í˜ì–´ë§ Â· QR ì½”ë“œ ì¸ì¦ Â· Matter ì§€ì› Â· Wi-Fi í”„ë¡œë¹„ì €ë‹ Â· HomeKit í†µí•© Â· ë³´ì•ˆ ì—°ê²° Â· ìë™ ì¬ì—°ê²°
</div>

<h2>ğŸ¯ 1. ê¸°ë³¸ ì„¤ì •</h2>
<p>AccessorySetupKit ì„¸ì…˜ì„ ìƒì„±í•˜ê³  ì•¡ì„¸ì„œë¦¬ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">AccessoryManager.swift â€” ê¸°ë³¸ ì„¤ì •</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">AccessorySetupKit</span>
<span class="kw">import</span> <span class="type">SwiftUI</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">AccessorySetupManager</span> {
    <span class="kw">var</span> discoveredAccessories: [<span class="type">ASKAccessory</span>] = []
    <span class="kw">var</span> connectedAccessory: <span class="type">ASKAccessory</span>?
    <span class="kw">private</span> <span class="kw">var</span> session: <span class="type">ASKSession</span>?

    <span class="comment">// ì„¸ì…˜ ì‹œì‘</span>
    <span class="kw">func</span> startSession() <span class="kw">async</span> {
        <span class="comment">// ğŸ†• iOS 18+ ìƒˆë¡œìš´ ì„¸ì…˜ ìƒì„± ë°©ì‹</span>
        <span class="kw">let</span> configuration = <span class="type">ASKSessionConfiguration</span>()
        configuration.supportedProtocols = [.bluetooth, .wifi]
        configuration.enableBackgroundRefresh = <span class="kw">true</span>

        session = <span class="type">ASKSession</span>(configuration: configuration)

        <span class="comment">// ì•¡ì„¸ì„œë¦¬ ê²€ìƒ‰ ì‹œì‘</span>
        <span class="kw">do</span> {
            <span class="kw">for</span> <span class="kw">try</span> <span class="kw">await</span> accessory <span class="kw">in</span> session!.discoverAccessories() {
                discoveredAccessories.append(accessory)
            }
        } <span class="kw">catch</span> {
            print(<span class="str">"ê²€ìƒ‰ ì‹¤íŒ¨: \(error)"</span>)
        }
    }

    <span class="comment">// ì•¡ì„¸ì„œë¦¬ í˜ì–´ë§</span>
    <span class="kw">func</span> pair(accessory: <span class="type">ASKAccessory</span>) <span class="kw">async</span> <span class="kw">throws</span> {
        <span class="kw">guard</span> <span class="kw">let</span> session <span class="kw">else</span> { <span class="kw">return</span> }

        <span class="comment">// ì‹œìŠ¤í…œ í˜ì–´ë§ UI í‘œì‹œ</span>
        <span class="kw">try</span> <span class="kw">await</span> session.pair(accessory)
        connectedAccessory = accessory
    }

    <span class="comment">// ì—°ê²° í•´ì œ</span>
    <span class="kw">func</span> disconnect() <span class="kw">async</span> {
        <span class="kw">guard</span> <span class="kw">let</span> accessory = connectedAccessory,
              <span class="kw">let</span> session <span class="kw">else</span> { <span class="kw">return</span> }

        <span class="kw">await</span> session.disconnect(accessory)
        connectedAccessory = <span class="kw">nil</span>
    }

    <span class="comment">// ì„¸ì…˜ ì¢…ë£Œ</span>
    <span class="kw">func</span> endSession() {
        session?.invalidate()
        session = <span class="kw">nil</span>
        discoveredAccessories.removeAll()
    }
}</pre>
</div>

<h2>ğŸ“± 2. QR ì½”ë“œ í˜ì–´ë§</h2>
<p>QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì—¬ ë¹ ë¥´ê²Œ ì•¡ì„¸ì„œë¦¬ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">QRPairing.swift â€” QR ì½”ë“œ í˜ì–´ë§</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">AccessorySetupKit</span>
<span class="kw">import</span> <span class="type">AVFoundation</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">QRPairingManager</span>: <span class="type">NSObject</span> {
    <span class="kw">var</span> scannedAccessory: <span class="type">ASKAccessory</span>?
    <span class="kw">private</span> <span class="kw">var</span> session: <span class="type">ASKSession</span>?

    <span class="comment">// QR ì½”ë“œ ìŠ¤ìº” ë° í˜ì–´ë§</span>
    <span class="kw">func</span> scanAndPair() <span class="kw">async</span> <span class="kw">throws</span> {
        <span class="kw">let</span> configuration = <span class="type">ASKSessionConfiguration</span>()
        configuration.pairingMethod = .qrCode <span class="comment">// ğŸ†• QR ì½”ë“œ ëª¨ë“œ</span>

        session = <span class="type">ASKSession</span>(configuration: configuration)

        <span class="comment">// ì‹œìŠ¤í…œ QR ìŠ¤ìºë„ˆ í‘œì‹œ</span>
        <span class="kw">if</span> <span class="kw">let</span> accessory = <span class="kw">try</span> <span class="kw">await</span> session?.scanQRCode() {
            scannedAccessory = accessory
            <span class="kw">try</span> <span class="kw">await</span> session?.pair(accessory)
        }
    }

    <span class="comment">// Matter ë””ë°”ì´ìŠ¤ QR ì½”ë“œ í˜ì–´ë§</span>
    <span class="kw">func</span> pairMatterDevice(qrCode: <span class="type">String</span>) <span class="kw">async</span> <span class="kw">throws</span> {
        <span class="kw">let</span> configuration = <span class="type">ASKSessionConfiguration</span>()
        configuration.supportedProtocols = [.matter] <span class="comment">// ğŸ†• Matter ì§€ì›</span>

        session = <span class="type">ASKSession</span>(configuration: configuration)

        <span class="comment">// QR ì½”ë“œì—ì„œ ë””ë°”ì´ìŠ¤ ì •ë³´ íŒŒì‹±</span>
        <span class="kw">let</span> accessory = <span class="kw">try</span> <span class="kw">await</span> session?.parseQRCode(qrCode)
        <span class="kw">try</span> <span class="kw">await</span> session?.pair(accessory!)
    }
}</pre>
</div>

<h2>ğŸ“¡ 3. Wi-Fi í”„ë¡œë¹„ì €ë‹</h2>
<p>ì•¡ì„¸ì„œë¦¬ì— Wi-Fi ì •ë³´ë¥¼ ì „ë‹¬í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">WiFiProvisioning.swift â€” Wi-Fi ì„¤ì •</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">AccessorySetupKit</span>
<span class="kw">import</span> <span class="type">NetworkExtension</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">WiFiProvisioningManager</span> {
    <span class="kw">private</span> <span class="kw">var</span> session: <span class="type">ASKSession</span>?
    <span class="kw">var</span> provisioningStatus: <span class="type">String</span> = <span class="str">""</span>

    <span class="comment">// Wi-Fi í”„ë¡œë¹„ì €ë‹ ì‹œì‘</span>
    <span class="kw">func</span> provisionWiFi(
        accessory: <span class="type">ASKAccessory</span>,
        ssid: <span class="type">String</span>,
        password: <span class="type">String</span>
    ) <span class="kw">async</span> <span class="kw">throws</span> {
        <span class="kw">let</span> configuration = <span class="type">ASKSessionConfiguration</span>()
        configuration.supportedProtocols = [.wifi]

        session = <span class="type">ASKSession</span>(configuration: configuration)

        <span class="comment">// ğŸ†• Wi-Fi ìê²© ì¦ëª… ì „ë‹¬</span>
        <span class="kw">let</span> credentials = <span class="type">ASKWiFiCredentials</span>(
            ssid: ssid,
            password: password,
            securityType: .wpa2
        )

        provisioningStatus = <span class="str">"ì—°ê²° ì¤‘..."</span>

        <span class="kw">try</span> <span class="kw">await</span> session?.provisionWiFi(
            for: accessory,
            credentials: credentials
        )

        provisioningStatus = <span class="str">"ì—°ê²° ì™„ë£Œ"</span>
    }

    <span class="comment">// í˜„ì¬ ë„¤íŠ¸ì›Œí¬ ì •ë³´ ìë™ ì „ë‹¬</span>
    <span class="kw">func</span> provisionCurrentNetwork(accessory: <span class="type">ASKAccessory</span>) <span class="kw">async</span> <span class="kw">throws</span> {
        <span class="kw">let</span> configuration = <span class="type">ASKSessionConfiguration</span>()
        configuration.supportedProtocols = [.wifi]
        configuration.autoProvisionCurrentNetwork = <span class="kw">true</span> <span class="comment">// ğŸ†• ìë™ ì„¤ì •</span>

        session = <span class="type">ASKSession</span>(configuration: configuration)

        <span class="comment">// ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ í˜„ì¬ Wi-Fi ì •ë³´ ì „ë‹¬</span>
        <span class="kw">try</span> <span class="kw">await</span> session?.pair(accessory)
    }

    <span class="comment">// Wi-Fi ì„¤ì • ìƒíƒœ ëª¨ë‹ˆí„°ë§</span>
    <span class="kw">func</span> monitorProvisioningStatus(
        accessory: <span class="type">ASKAccessory</span>
    ) <span class="kw">async</span> {
        <span class="kw">guard</span> <span class="kw">let</span> session <span class="kw">else</span> { <span class="kw">return</span> }

        <span class="kw">for</span> <span class="kw">await</span> status <span class="kw">in</span> session.provisioningStatusUpdates(for: accessory) {
            <span class="kw">switch</span> status {
            <span class="kw">case</span> .connecting:
                provisioningStatus = <span class="str">"ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì¤‘"</span>
            <span class="kw">case</span> .connected:
                provisioningStatus = <span class="str">"ì—°ê²° ì™„ë£Œ"</span>
            <span class="kw">case</span> .failed(<span class="kw">let</span> error):
                provisioningStatus = <span class="str">"ì—°ê²° ì‹¤íŒ¨: \(error.localizedDescription)"</span>
            }
        }
    }
}</pre>
</div>

<h2>ğŸ  4. HomeKit í†µí•©</h2>
<p>HomeKitê³¼ ì—°ë™í•˜ì—¬ ìŠ¤ë§ˆíŠ¸ í™ˆ ì•¡ì„¸ì„œë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">HomeKitIntegration.swift â€” HomeKit í†µí•©</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">AccessorySetupKit</span>
<span class="kw">import</span> <span class="type">HomeKit</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">HomeKitAccessoryManager</span>: <span class="type">NSObject</span>, <span class="type">HMHomeManagerDelegate</span> {
    <span class="kw">private</span> <span class="kw">let</span> homeManager = <span class="type">HMHomeManager</span>()
    <span class="kw">private</span> <span class="kw">var</span> session: <span class="type">ASKSession</span>?
    <span class="kw">var</span> homes: [<span class="type">HMHome</span>] = []

    <span class="kw">override</span> <span class="kw">init</span>() {
        <span class="kw">super</span>.<span class="kw">init</span>()
        homeManager.delegate = <span class="kw">self</span>
    }

    <span class="comment">// HomeKit ì•¡ì„¸ì„œë¦¬ ì¶”ê°€</span>
    <span class="kw">func</span> addHomeKitAccessory(
        to home: <span class="type">HMHome</span>,
        accessory: <span class="type">ASKAccessory</span>
    ) <span class="kw">async</span> <span class="kw">throws</span> {
        <span class="kw">let</span> configuration = <span class="type">ASKSessionConfiguration</span>()
        configuration.supportedProtocols = [.homeKit, .matter] <span class="comment">// ğŸ†• HomeKit + Matter</span>
        configuration.homeKitHome = home

        session = <span class="type">ASKSession</span>(configuration: configuration)

        <span class="comment">// í˜ì–´ë§ ë° HomeKit ì¶”ê°€</span>
        <span class="kw">try</span> <span class="kw">await</span> session?.pair(accessory)

        <span class="comment">// HomeKit ì„¤ì • ìë™ ì™„ë£Œ</span>
        <span class="kw">try</span> <span class="kw">await</span> session?.configureHomeKit(for: accessory, in: home)
    }

    <span class="comment">// Matter ë””ë°”ì´ìŠ¤ë¥¼ HomeKitì— ì¶”ê°€</span>
    <span class="kw">func</span> addMatterDevice(
        qrCode: <span class="type">String</span>,
        to home: <span class="type">HMHome</span>
    ) <span class="kw">async</span> <span class="kw">throws</span> {
        <span class="kw">let</span> configuration = <span class="type">ASKSessionConfiguration</span>()
        configuration.supportedProtocols = [.matter]
        configuration.homeKitHome = home
        configuration.pairingMethod = .qrCode

        session = <span class="type">ASKSession</span>(configuration: configuration)

        <span class="comment">// QR ì½”ë“œë¡œ Matter ë””ë°”ì´ìŠ¤ í˜ì–´ë§</span>
        <span class="kw">if</span> <span class="kw">let</span> accessory = <span class="kw">try</span> <span class="kw">await</span> session?.parseQRCode(qrCode) {
            <span class="kw">try</span> <span class="kw">await</span> session?.pair(accessory)
            <span class="kw">try</span> <span class="kw">await</span> session?.configureHomeKit(for: accessory, in: home)
        }
    }

    <span class="comment">// HomeManager ë¸ë¦¬ê²Œì´íŠ¸</span>
    <span class="kw">func</span> homeManagerDidUpdateHomes(<span class="kw">_</span> manager: <span class="type">HMHomeManager</span>) {
        homes = manager.homes
    }
}</pre>
</div>

<h2>ğŸ” 5. ë³´ì•ˆ í˜ì–´ë§</h2>
<p>ì•ˆì „í•œ í˜ì–´ë§ê³¼ ê¶Œí•œ ê´€ë¦¬ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.</p>

<div class="code-block">
<div class="code-header">SecurePairing.swift â€” ë³´ì•ˆ í˜ì–´ë§</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">AccessorySetupKit</span>
<span class="kw">import</span> <span class="type">CryptoKit</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">SecurePairingManager</span> {
    <span class="kw">private</span> <span class="kw">var</span> session: <span class="type">ASKSession</span>?
    <span class="kw">var</span> authenticationStatus: <span class="type">String</span> = <span class="str">""</span>

    <span class="comment">// ì¸ì¦ ì½”ë“œ ê¸°ë°˜ í˜ì–´ë§</span>
    <span class="kw">func</span> pairWithAuthCode(
        accessory: <span class="type">ASKAccessory</span>,
        code: <span class="type">String</span>
    ) <span class="kw">async</span> <span class="kw">throws</span> {
        <span class="kw">let</span> configuration = <span class="type">ASKSessionConfiguration</span>()
        configuration.requiresAuthentication = <span class="kw">true</span> <span class="comment">// ğŸ†• ì¸ì¦ í•„ìˆ˜</span>

        session = <span class="type">ASKSession</span>(configuration: configuration)

        <span class="comment">// ì¸ì¦ ì½”ë“œ ê²€ì¦</span>
        <span class="kw">let</span> isValid = <span class="kw">try</span> <span class="kw">await</span> session?.validateAuthCode(code, for: accessory)

        <span class="kw">if</span> isValid == <span class="kw">true</span> {
            authenticationStatus = <span class="str">"ì¸ì¦ ì„±ê³µ"</span>
            <span class="kw">try</span> <span class="kw">await</span> session?.pair(accessory)
        } <span class="kw">else</span> {
            authenticationStatus = <span class="str">"ì¸ì¦ ì‹¤íŒ¨"</span>
            <span class="kw">throw</span> <span class="type">PairingError</span>.authenticationFailed
        }
    }

    <span class="comment">// PIN ê¸°ë°˜ í˜ì–´ë§</span>
    <span class="kw">func</span> pairWithPIN(
        accessory: <span class="type">ASKAccessory</span>,
        pin: <span class="type">String</span>
    ) <span class="kw">async</span> <span class="kw">throws</span> {
        <span class="kw">let</span> configuration = <span class="type">ASKSessionConfiguration</span>()
        configuration.pairingMethod = .pin <span class="comment">// ğŸ†• PIN ëª¨ë“œ</span>

        session = <span class="type">ASKSession</span>(configuration: configuration)

        <span class="comment">// PIN ì œê³µ ë° í˜ì–´ë§</span>
        <span class="kw">try</span> <span class="kw">await</span> session?.pair(accessory, pin: pin)
    }

    <span class="comment">// ì•”í˜¸í™”ëœ ì—°ê²° í™•ì¸</span>
    <span class="kw">func</span> verifyEncryptedConnection(accessory: <span class="type">ASKAccessory</span>) <span class="kw">async</span> -> <span class="type">Bool</span> {
        <span class="kw">guard</span> <span class="kw">let</span> session <span class="kw">else</span> { <span class="kw">return</span> <span class="kw">false</span> }

        <span class="comment">// ì—°ê²° ë³´ì•ˆ ìƒíƒœ í™•ì¸</span>
        <span class="kw">let</span> securityLevel = <span class="kw">await</span> session.securityLevel(for: accessory)
        <span class="kw">return</span> securityLevel == .encrypted
    }
}

<span class="kw">enum</span> <span class="type">PairingError</span>: <span class="type">Error</span> {
    <span class="kw">case</span> authenticationFailed
    <span class="kw">case</span> invalidPIN
    <span class="kw">case</span> connectionLost
}</pre>
</div>

<h2>ğŸ“± SwiftUI í†µí•©</h2>

<div class="code-block">
<div class="code-header">AccessorySetupView.swift â€” ì¢…í•© ì˜ˆì œ</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">AccessorySetupKit</span>

<span class="kw">struct</span> <span class="type">AccessorySetupView</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> manager = <span class="type">AccessorySetupManager</span>()
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> qrManager = <span class="type">QRPairingManager</span>()
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> wifiManager = <span class="type">WiFiProvisioningManager</span>()
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> showQRScanner = <span class="kw">false</span>

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">NavigationStack</span> {
            <span class="type">List</span> {
                <span class="type">Section</span>(<span class="str">"ê²€ìƒ‰ëœ ì•¡ì„¸ì„œë¦¬"</span>) {
                    <span class="kw">if</span> manager.discoveredAccessories.isEmpty {
                        <span class="type">ContentUnavailableView</span>(
                            <span class="str">"ì•¡ì„¸ì„œë¦¬ ì—†ìŒ"</span>,
                            systemImage: <span class="str">"antenna.radiowaves.left.and.right.slash"</span>,
                            description: <span class="type">Text</span>(<span class="str">"ê²€ìƒ‰ì„ ì‹œì‘í•˜ì„¸ìš”"</span>)
                        )
                    } <span class="kw">else</span> {
                        <span class="type">ForEach</span>(manager.discoveredAccessories, id: \.<span class="kw">self</span>.identifier) { accessory <span class="kw">in</span>
                            <span class="type">HStack</span> {
                                <span class="type">VStack</span>(alignment: .leading) {
                                    <span class="type">Text</span>(accessory.name)
                                        .font(.headline)
                                    <span class="type">Text</span>(accessory.category.rawValue)
                                        .font(.caption)
                                        .foregroundStyle(.secondary)
                                }

                                <span class="type">Spacer</span>()

                                <span class="type">Button</span>(<span class="str">"ì—°ê²°"</span>) {
                                    <span class="type">Task</span> {
                                        <span class="kw">try</span>? <span class="kw">await</span> manager.pair(accessory: accessory)
                                    }
                                }
                                .buttonStyle(.bordered)
                            }
                        }
                    }
                }

                <span class="kw">if</span> <span class="kw">let</span> connected = manager.connectedAccessory {
                    <span class="type">Section</span>(<span class="str">"ì—°ê²°ëœ ì•¡ì„¸ì„œë¦¬"</span>) {
                        <span class="type">HStack</span> {
                            <span class="type">Image</span>(systemName: <span class="str">"checkmark.circle.fill"</span>)
                                .foregroundStyle(.green)
                            <span class="type">Text</span>(connected.name)
                            <span class="type">Spacer</span>()
                            <span class="type">Button</span>(<span class="str">"ì—°ê²° í•´ì œ"</span>) {
                                <span class="type">Task</span> {
                                    <span class="kw">await</span> manager.disconnect()
                                }
                            }
                        }
                    }
                }

                <span class="type">Section</span>(<span class="str">"ì„¤ì • ë°©ë²•"</span>) {
                    <span class="type">Button</span> {
                        <span class="type">Task</span> {
                            <span class="kw">await</span> manager.startSession()
                        }
                    } label: {
                        <span class="type">Label</span>(<span class="str">"Bluetooth ê²€ìƒ‰"</span>, systemImage: <span class="str">"dot.radiowaves.left.and.right"</span>)
                    }

                    <span class="type">Button</span> {
                        showQRScanner = <span class="kw">true</span>
                    } label: {
                        <span class="type">Label</span>(<span class="str">"QR ì½”ë“œ ìŠ¤ìº”"</span>, systemImage: <span class="str">"qrcode.viewfinder"</span>)
                    }
                }

                <span class="kw">if</span> !wifiManager.provisioningStatus.isEmpty {
                    <span class="type">Section</span>(<span class="str">"Wi-Fi ìƒíƒœ"</span>) {
                        <span class="type">Text</span>(wifiManager.provisioningStatus)
                            .foregroundStyle(.secondary)
                    }
                }
            }
            .navigationTitle(<span class="str">"ì•¡ì„¸ì„œë¦¬ ì„¤ì •"</span>)
            .sheet(isPresented: $showQRScanner) {
                <span class="type">QRScannerView</span> { qrCode <span class="kw">in</span>
                    <span class="type">Task</span> {
                        <span class="kw">try</span>? <span class="kw">await</span> qrManager.pairMatterDevice(qrCode: qrCode)
                        showQRScanner = <span class="kw">false</span>
                    }
                }
            }
        }
    }
}

<span class="kw">struct</span> <span class="type">QRScannerView</span>: <span class="type">View</span> {
    <span class="kw">let</span> onScan: (<span class="type">String</span>) -> <span class="type">Void</span>
    <span class="kw">@Environment</span>(\.<span class="kw">dismiss</span>) <span class="kw">var</span> dismiss

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="type">Text</span>(<span class="str">"ì•¡ì„¸ì„œë¦¬ì˜ QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì„¸ìš”"</span>)
                .font(.headline)
                .padding()

            <span class="comment">// QR ìŠ¤ìºë„ˆ êµ¬í˜„</span>
            <span class="type">Rectangle</span>()
                .fill(<span class="type">Color</span>.gray.opacity(<span class="str">0.3</span>))
                .frame(width: <span class="str">300</span>, height: <span class="str">300</span>)
                .overlay {
                    <span class="type">Image</span>(systemName: <span class="str">"qrcode.viewfinder"</span>)
                        .font(.system(size: <span class="str">100</span>))
                        .foregroundStyle(.white)
                }

            <span class="type">Button</span>(<span class="str">"ì·¨ì†Œ"</span>) {
                dismiss()
            }
            .padding()
        }
    }
}</pre>
</div>

<h2>ğŸ’¡ HIG ê°€ì´ë“œë¼ì¸</h2>

<ul>
<li><strong>ì‚¬ìš©ì ê²½í—˜:</strong> í˜ì–´ë§ ê³¼ì •ì„ ìµœëŒ€í•œ ê°„ë‹¨í•˜ê²Œ ìœ ì§€</li>
<li><strong>í”¼ë“œë°±:</strong> ê° ë‹¨ê³„ì—ì„œ ëª…í™•í•œ ìƒíƒœ í‘œì‹œ</li>
<li><strong>ë³´ì•ˆ:</strong> ë¯¼ê°í•œ ì •ë³´(Wi-Fi ë¹„ë°€ë²ˆí˜¸ ë“±) ì•ˆì „í•˜ê²Œ ì²˜ë¦¬</li>
<li><strong>ì˜¤ë¥˜ ì²˜ë¦¬:</strong> ì—°ê²° ì‹¤íŒ¨ ì‹œ ëª…í™•í•œ í•´ê²° ë°©ë²• ì œì‹œ</li>
<li><strong>ê¶Œí•œ:</strong> Bluetooth ë° ë„¤íŠ¸ì›Œí¬ ê¶Œí•œ ì„¤ëª… ì¶”ê°€</li>
</ul>

<h2>ğŸ¯ ì‹¤ë¬´ í™œìš©</h2>

<ul>
<li><strong>ìŠ¤ë§ˆíŠ¸ í™ˆ:</strong> HomeKit ì•¡ì„¸ì„œë¦¬ ê°„í¸ ì„¤ì •</li>
<li><strong>ì›¨ì–´ëŸ¬ë¸”:</strong> í”¼íŠ¸ë‹ˆìŠ¤ íŠ¸ë˜ì»¤, ìŠ¤ë§ˆíŠ¸ì›Œì¹˜ í˜ì–´ë§</li>
<li><strong>IoT ë””ë°”ì´ìŠ¤:</strong> Matter ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë””ë°”ì´ìŠ¤</li>
<li><strong>ì˜¤ë””ì˜¤:</strong> Bluetooth í—¤ë“œí°/ìŠ¤í”¼ì»¤ ì—°ê²°</li>
<li><strong>í—¬ìŠ¤ì¼€ì–´:</strong> ì˜ë£Œ ê¸°ê¸° ì•ˆì „í•œ í˜ì–´ë§</li>
</ul>

<h2>ğŸ“š ë” ì•Œì•„ë³´ê¸°</h2>

<ul>
<li><a href="https://developer.apple.com/documentation/accessorysetupkit">AccessorySetupKit ê³µì‹ ë¬¸ì„œ</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2024/">WWDC 2024: AccessorySetupKit</a></li>
<li><a href="https://developer.apple.com/homekit/">HomeKit ê°œë°œì ê°€ì´ë“œ</a></li>
<li><a href="https://csa-iot.org/all-solutions/matter/">Matter í‘œì¤€</a></li>
</ul>

<div class="info-box">
<strong>âš¡ï¸ ì„±ëŠ¥ íŒ:</strong> Wi-Fi í”„ë¡œë¹„ì €ë‹ ì‹œ <code>autoProvisionCurrentNetwork</code>ë¥¼ í™œì„±í™”í•˜ë©´ ì‚¬ìš©ìê°€ ì§ì ‘ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•  í•„ìš” ì—†ì´ í˜„ì¬ ì—°ê²°ëœ ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</div>

</article>
</body></html>