<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>ğŸ—£ï¸ Build a Siri Voice Control App â€” HIG Lab</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
<style>
:root{--bg:#fafafa;--text:#1d1d1f;--text-2:#6e6e73;--accent:#0071e3;--code-bg:#1e1e2e;--border:#d2d2d7;--green:#34c759}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.8}
.top-bar{position:sticky;top:0;z-index:100;background:rgba(250,250,250,0.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.top-bar-inner{max-width:800px;margin:0 auto;padding:12px 24px;display:flex;justify-content:space-between}
.top-logo{font-size:16px;font-weight:700;text-decoration:none;color:var(--text)}.top-logo span{color:var(--accent)}
article{max-width:800px;margin:0 auto;padding:48px 24px 120px}
h1{font-size:clamp(28px,5vw,40px);font-weight:900;margin-bottom:16px;letter-spacing:-1px}
h2{font-size:24px;font-weight:800;margin:48px 0 16px}p{margin-bottom:16px}
.subtitle{font-size:18px;color:var(--text-2);margin-bottom:32px}
.code-block{background:var(--code-bg);border-radius:12px;margin:20px 0;overflow:hidden}
.code-header{padding:10px 16px;background:rgba(255,255,255,0.05);border-bottom:1px solid rgba(255,255,255,0.08)}
.code-filename{font-size:13px;color:#cdd6f4;font-family:'JetBrains Mono',monospace}
pre.code-body{margin:0;padding:16px;font-family:'JetBrains Mono',monospace;font-size:13px;line-height:1.6;color:#cdd6f4;white-space:pre;overflow-x:auto}
.kw{color:#cba6f7}.type{color:#89b4fa}.str{color:#a6e3a1}.func{color:#89dceb}.prop{color:#f5c2e7}.comment{color:#6c7086}
.tip-box{background:#34c75910;border:1px solid #34c75940;border-radius:12px;padding:16px 20px;margin:24px 0}
.tip-box h4{color:var(--green);margin-bottom:8px}
</style></head>
<body>
<div class="top-bar"><div class="top-bar-inner"><a href="../index.html" class="top-logo">HIG <span>Lab</span></a><a href="01-siri-todo-app.html" class="lang-toggle" style="font-size:12px;font-weight:600;color:#0071e3;text-decoration:none;padding:4px 10px;border:1.5px solid #0071e3;border-radius:12px;">ğŸŒ KO</a></div></div>
<article>
<h1>ğŸ—£ï¸ Siri ìŒì„± ì œì–´ ì•± ë§Œë“¤ê¸°</h1>
<p class="subtitle">Build an app that works when you say "Add a todo" using App Intents.</p>

<h2>âœ¨ App Intents?</h2>
<p>App Intents exposes your app's features to Siri, Shortcuts, and Spotlight. Available on iOS 16+ and much simpler than the previous SiriKit.</p>

<h2>ğŸ“ ì²« ë²ˆì§¸ Intent ë§Œë“¤ê¸°</h2>
<div class="code-block"><div class="code-header"><span class="code-filename">AddTodoIntent.swift</span></div>
<pre class="code-body"><span class="kw">import</span> <span class="type">AppIntents</span>

<span class="kw">struct</span> <span class="type">AddTodoIntent</span>: <span class="type">AppIntent</span> {
    <span class="kw">static var</span> <span class="prop">title</span>: <span class="type">LocalizedStringResource</span> = <span class="str">"í•  ì¼ ì¶”ê°€"</span>
    
    @<span class="type">Parameter</span>(title: <span class="str">"ì œëª©"</span>)
    <span class="kw">var</span> <span class="prop">todoTitle</span>: <span class="type">String</span>
    
    <span class="kw">func</span> <span class="func">perform</span>() <span class="kw">async throws</span> -> <span class="kw">some</span> <span class="type">IntentResult</span> {
        <span class="type">TodoStore</span>.shared.add(title: todoTitle)
        <span class="kw">return</span> .result(dialog: <span class="str">"\(todoTitle) ì¶”ê°€ ì™„ë£Œ!"</span>)
    }
}</pre></div>

<h2>ğŸ¤ Siri ìŒì„± ëª…ë ¹ ë“±ë¡</h2>
<div class="code-block"><div class="code-header"><span class="code-filename">Shortcuts.swift</span></div>
<pre class="code-body"><span class="kw">struct</span> <span class="type">TodoShortcuts</span>: <span class="type">AppShortcutsProvider</span> {
    <span class="kw">static var</span> <span class="prop">appShortcuts</span>: [<span class="type">AppShortcut</span>] {
        <span class="type">AppShortcut</span>(
            intent: <span class="type">AddTodoIntent</span>(),
            phrases: [
                <span class="str">"í•  ì¼ ì¶”ê°€í•´ì¤˜ \(.applicationName)"</span>,
                <span class="str">"\(.applicationName)ì— í•  ì¼ ì¶”ê°€"</span>
            ],
            shortTitle: <span class="str">"í•  ì¼ ì¶”ê°€"</span>,
            systemImageName: <span class="str">"plus.circle"</span>
        )
    }
}</pre></div>

<div class="tip-box">
<h4>ğŸ’¡ HIG íŒ</h4>
<p>Write phrases as natural sentences â€” use expressions people would actually say, like "Add a todo" or "Create a new task."</p>
</div>

<h2>ğŸ”„ íŒŒë¼ë¯¸í„° ëŒ€í™” íë¦„</h2>
<p>íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ Siriê°€ ìë™ìœ¼ë¡œ ë¬¼ì–´ë´…ë‹ˆë‹¤:</p>
<div class="code-block"><div class="code-header"><span class="code-filename">Dialog.swift</span></div>
<pre class="code-body"><span class="kw">guard let</span> title = todoTitle <span class="kw">else</span> {
    <span class="kw">throw</span> $todoTitle.<span class="func">needsValueError</span>(<span class="str">"ì–´ë–¤ í•  ì¼ì„ ì¶”ê°€í• ê¹Œìš”?"</span>)
}</pre></div>

<h2>ğŸ“‹ Entity ì •ì˜</h2>
<p>Define todo items as Entities so Siri can suggest and search tasks:</p>
<div class="code-block"><div class="code-header"><span class="code-filename">TodoEntity.swift</span></div>
<pre class="code-body"><span class="kw">struct</span> <span class="type">TodoEntity</span>: <span class="type">AppEntity</span> {
    <span class="kw">static var</span> <span class="prop">typeDisplayRepresentation</span>: <span class="type">TypeDisplayRepresentation</span> {
        <span class="str">"í•  ì¼"</span>
    }

    <span class="kw">var</span> <span class="prop">id</span>: <span class="type">UUID</span>
    <span class="kw">var</span> <span class="prop">title</span>: <span class="type">String</span>
    <span class="kw">var</span> <span class="prop">isCompleted</span>: <span class="type">Bool</span>

    <span class="kw">var</span> <span class="prop">displayRepresentation</span>: <span class="type">DisplayRepresentation</span> {
        <span class="type">DisplayRepresentation</span>(title: <span class="str">"\(title)"</span>)
    }

    <span class="comment">// Spotlight ê²€ìƒ‰ ì§€ì›</span>
    <span class="kw">static var</span> <span class="prop">defaultQuery</span> = <span class="type">TodoEntityQuery</span>()
}</pre></div>

<h2>ğŸ” EntityQuery êµ¬í˜„</h2>
<div class="code-block"><div class="code-header"><span class="code-filename">TodoEntityQuery.swift</span></div>
<pre class="code-body"><span class="kw">struct</span> <span class="type">TodoEntityQuery</span>: <span class="type">EntityQuery</span> {
    <span class="kw">func</span> <span class="func">entities</span>(<span class="kw">for</span> identifiers: [<span class="type">UUID</span>]) <span class="kw">async throws</span> -> [<span class="type">TodoEntity</span>] {
        <span class="type">TodoStore</span>.shared.todos.filter { identifiers.contains($0.id) }
    }

    <span class="kw">func</span> <span class="func">suggestedEntities</span>() <span class="kw">async throws</span> -> [<span class="type">TodoEntity</span>] {
        <span class="comment">// ë¯¸ì™„ë£Œ í•­ëª© 3ê°œ ì œì•ˆ</span>
        <span class="type">TodoStore</span>.shared.todos
            .filter { !$0.isCompleted }
            .prefix(<span class="num">3</span>)
            .map(<span class="type">TodoEntity</span>.<span class="kw">init</span>)
    }
}</pre></div>

<h2>ğŸ“± SwiftUI Integration</h2>
<p>Use AppIntentsUI to customize Siri responses with SwiftUI:</p>
<div class="code-block"><div class="code-header"><span class="code-filename">AddTodoIntent+UI.swift</span></div>
<pre class="code-body"><span class="kw">import</span> <span class="type">AppIntentsUI</span>

<span class="kw">extension</span> <span class="type">AddTodoIntent</span> {
    @<span class="type">MainActor</span>
    <span class="kw">func</span> <span class="func">perform</span>() <span class="kw">async throws</span> -> <span class="kw">some</span> <span class="type">IntentResult</span> &amp; <span class="type">ProvidesDialog</span> &amp; <span class="type">ShowsSnippetView</span> {
        <span class="kw">let</span> todo = <span class="type">TodoStore</span>.shared.add(title: todoTitle)

        <span class="kw">return</span> .result(
            dialog: <span class="str">"\(todoTitle) ì¶”ê°€í–ˆì–´ìš”!"</span>,
            view: <span class="type">TodoSnippetView</span>(todo: todo)
        )
    }
}

<span class="kw">struct</span> <span class="type">TodoSnippetView</span>: <span class="type">View</span> {
    <span class="kw">let</span> <span class="prop">todo</span>: <span class="type">TodoEntity</span>

    <span class="kw">var</span> <span class="prop">body</span>: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">HStack</span> {
            <span class="type">Image</span>(systemName: <span class="str">"checkmark.circle"</span>)
            <span class="type">Text</span>(todo.title)
        }
        .padding()
    }
}</pre></div>

<div class="tip-box">
<h4>ğŸ’¡ Testing ë°©ë²•</h4>
<p>Run in Xcode and ask Siri "Add a todo [app name]." In the simulator, test via Hardware â†’ Siri.</p>
</div>

<h2>ğŸ“¦ Learning Resources</h2>
<div class="tip-box" style="border:none;background:transparent;padding:0">
<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px">
<a href="https://m1zz.github.io/HIGLab/tutorials/appintents/documentation/higappintents/" style="background:#fff;border:1px solid #d2d2d7;border-radius:12px;padding:20px;text-decoration:none;color:inherit;text-align:center">
<div style="font-size:28px;margin-bottom:8px">ğŸ“š</div>
<div style="font-size:13px;font-weight:600;color:#0071e3">DocC Tutorial</div>
<div style="font-size:12px;color:#86868b;margin-top:2px">Try it in Xcode</div>
</a>
<a href="https://github.com/M1zz/HIGLab" style="background:#fff;border:1px solid #d2d2d7;border-radius:12px;padding:20px;text-decoration:none;color:inherit;text-align:center">
<div style="font-size:28px;margin-bottom:8px">ğŸ’»</div>
<div style="font-size:13px;font-weight:600;color:#0071e3">GitHub Project</div>
<div style="font-size:12px;color:#86868b;margin-top:2px">Complete Source Code</div>
</a>
<a href="https://developer.apple.com/design/human-interface-guidelines/app-intents" style="background:#fff;border:1px solid #d2d2d7;border-radius:12px;padding:20px;text-decoration:none;color:inherit;text-align:center">
<div style="font-size:28px;margin-bottom:8px">ğŸ</div>
<div style="font-size:13px;font-weight:600;color:#0071e3">Apple HIG Docs</div>
<div style="font-size:12px;color:#86868b;margin-top:2px">App Intents ê°€ì´ë“œ</div>
</a>
</div>
</div>

</article>
</body></html>
