<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>ğŸ“¶ Wi-Fi Aware â€” HIG Lab</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">
<style>
:root{--bg:#fafafa;--text:#1d1d1f;--text-2:#6e6e73;--accent:#0071e3;--code-bg:#1e1e2e;--border:#d2d2d7}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.8}
.top-bar{position:sticky;top:0;z-index:100;background:rgba(250,250,250,0.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.top-bar-inner{max-width:800px;margin:0 auto;padding:12px 24px;display:flex;justify-content:space-between}
.top-logo{font-size:16px;font-weight:700;text-decoration:none;color:var(--text)}.top-logo span{color:var(--accent)}
article{max-width:800px;margin:0 auto;padding:48px 24px 120px}
h1{font-size:clamp(28px,5vw,40px);font-weight:900;margin-bottom:16px;letter-spacing:-1px}
h2{font-size:24px;font-weight:800;margin:48px 0 16px}p{margin-bottom:16px}
.subtitle{font-size:18px;color:var(--text-2);margin-bottom:32px}
.code-block{background:var(--code-bg);border-radius:12px;margin:20px 0;overflow:hidden}
.code-header{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.1);font-size:12px;color:#6e6e73;font-weight:600}
pre.code-body{margin:0;padding:16px;font-family:'JetBrains Mono',monospace;font-size:13px;color:#cdd6f4;white-space:pre;overflow-x:auto}
.kw{color:#cba6f7}.type{color:#89b4fa}.str{color:#a6e3a1}.comment{color:#6c7086}
.badge{display:inline-block;padding:4px 12px;border-radius:16px;font-size:13px;font-weight:600;margin:0 4px 8px 0}
.badge.ios{background:#0071e3;color:#fff}.badge.new{background:#34c759;color:#fff}
ul{margin:16px 0 16px 24px}li{margin:8px 0}
.info-box{background:#f5f5f7;border-left:4px solid var(--accent);padding:16px;margin:24px 0;border-radius:8px}
</style></head>
<body>
<div class="top-bar"><div class="top-bar-inner"><a href="../index.html" class="top-logo">HIG <span>Lab</span></a><a href="01-tutorial.html" class="lang-toggle" style="font-size:12px;font-weight:600;color:#0071e3;text-decoration:none;padding:4px 10px;border:1.5px solid #0071e3;border-radius:12px;">ğŸŒ KO</a></div></div>
<article>
<h1>ğŸ“¶ Wi-Fi Aware</h1>
<p class="subtitle">Nearby device discovery and P2P communication via Wi-Fi without Bluetooth</p>

<div><span class="badge ios">iOS 18+</span><span class="badge new">ì‹ ê·œ ê¸°ìˆ </span></div>

<h2>âœ¨ Wi-Fi Aware?</h2>
<p>Wi-Fi Aware is a new proximity communication technology introduced in iOS 18. It discovers nearby devices and exchanges data using only Wi-Fi â€” no Bluetooth needed. It works without internet or existing Wi-Fi networks, providing efficient P2P communication with low power consumption.</p>

<div class="info-box">
<strong>ğŸ’¡ Key Features:</strong> Wi-Fi Based Device Discovery Â· P2P Data Transfer Â· No Bluetooth Required Â· Low Power Â· Background Discovery Â· Encrypted Communication Â· Network Independent
</div>

<h2>ğŸ”§ 1. Project Setup</h2>
<p>To use Wi-Fi Aware, add required permissions and capabilities to your project.</p>

<div class="code-block">
<div class="code-header">Info.plist â€” Add Permission Descriptions</div>
<pre class="code-body"><span class="comment">// Info.plistì— ì¶”ê°€</span>
<span class="type">NSLocalNetworkUsageDescription</span>
<span class="str">"ê·¼ì²˜ ê¸°ê¸°ì™€ Wi-Fië¥¼ í†µí•´ ì—°ê²°í•˜ê³  ë°ì´í„°ë¥¼ ê³µìœ í•©ë‹ˆë‹¤"</span>

<span class="comment">// Bonjour ì„œë¹„ìŠ¤ ì¶”ê°€ (ì˜µì…˜)</span>
<span class="type">NSBonjourServices</span>
<span class="str">_wifiaware._tcp</span></pre>
</div>

<div class="info-box">
<strong>âš™ï¸ Capabilities:</strong> In Xcode Project Setup, go to "Signing & Capabilities" tab and add the "Nearby Interaction" capability.
</div>

<h2>ğŸ¯ 2. Wi-Fi Aware ì„¸ì…˜ ì‹œì‘</h2>
<p>Use NIWiFiAwareSession to start a Wi-Fi Aware session and discover nearby devices.</p>

<div class="code-block">
<div class="code-header">WiFiAwareManager.swift â€” Session Management</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">NearbyInteraction</span>
<span class="kw">import</span> <span class="type">Network</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">WiFiAwareManager</span>: <span class="type">NSObject</span> {
    <span class="kw">var</span> session: <span class="type">NIWiFiAwareSession</span>?
    <span class="kw">var</span> discoveryToken: <span class="type">NIWiFiAwareDiscoveryToken</span>?
    <span class="kw">var</span> discoveredPeers: [<span class="type">NIWiFiAwarePeerToken</span>] = []
    <span class="kw">var</span> isRunning = <span class="kw">false</span>

    <span class="comment">// ì„¸ì…˜ ì‹œì‘</span>
    <span class="kw">func</span> startSession() {
        <span class="comment">// Wi-Fi Aware ì„¸ì…˜ ìƒì„±</span>
        session = <span class="type">NIWiFiAwareSession</span>()
        session?.delegate = <span class="kw">self</span>

        <span class="comment">// ì„¸ì…˜ ì‹œì‘ ë° Discovery Token ìƒì„±</span>
        <span class="kw">do</span> {
            discoveryToken = <span class="kw">try</span> session?.createDiscoveryToken()
            isRunning = <span class="kw">true</span>
            print(<span class="str">"Wi-Fi Aware ì„¸ì…˜ ì‹œì‘ë¨"</span>)
        } <span class="kw">catch</span> {
            print(<span class="str">"ì„¸ì…˜ ì‹œì‘ ì‹¤íŒ¨: \(error)"</span>)
        }
    }

    <span class="comment">// ì„¸ì…˜ ì¤‘ì§€</span>
    <span class="kw">func</span> stopSession() {
        session?.invalidate()
        session = <span class="kw">nil</span>
        discoveryToken = <span class="kw">nil</span>
        discoveredPeers.removeAll()
        isRunning = <span class="kw">false</span>
        print(<span class="str">"Wi-Fi Aware ì„¸ì…˜ ì¢…ë£Œë¨"</span>)
    }

    <span class="comment">// Discovery Tokenì„ Dataë¡œ ë³€í™˜ (ê³µìœ ìš©)</span>
    <span class="kw">func</span> getDiscoveryTokenData() -> <span class="type">Data</span>? {
        <span class="kw">guard</span> <span class="kw">let</span> token = discoveryToken <span class="kw">else</span> { <span class="kw">return</span> <span class="kw">nil</span> }
        <span class="kw">return</span> <span class="kw">try</span>? <span class="type">NSKeyedArchiver</span>.archivedData(
            withRootObject: token,
            requiringSecureCoding: <span class="kw">true</span>
        )
    }

    <span class="comment">// ìƒëŒ€ë°©ì˜ Discovery Tokenìœ¼ë¡œ í”¼ì–´ ì¶”ê°€</span>
    <span class="kw">func</span> addPeer(tokenData: <span class="type">Data</span>) {
        <span class="kw">do</span> {
            <span class="kw">let</span> peerToken = <span class="kw">try</span> <span class="type">NSKeyedUnarchiver</span>.unarchivedObject(
                ofClass: <span class="type">NIWiFiAwarePeerToken</span>.<span class="kw">self</span>,
                from: tokenData
            )

            <span class="kw">if</span> <span class="kw">let</span> peerToken = peerToken {
                <span class="comment">// í”¼ì–´ ì¶”ê°€</span>
                session?.add(peerToken)
                print(<span class="str">"í”¼ì–´ ì¶”ê°€ë¨"</span>)
            }
        } <span class="kw">catch</span> {
            print(<span class="str">"í”¼ì–´ ì¶”ê°€ ì‹¤íŒ¨: \(error)"</span>)
        }
    }

    <span class="comment">// í”¼ì–´ ì œê±°</span>
    <span class="kw">func</span> removePeer(<span class="kw">_</span> peerToken: <span class="type">NIWiFiAwarePeerToken</span>) {
        session?.remove(peerToken)
        discoveredPeers.removeAll { $0 == peerToken }
        print(<span class="str">"í”¼ì–´ ì œê±°ë¨"</span>)
    }
}

<span class="comment">// Delegate êµ¬í˜„</span>
<span class="kw">extension</span> <span class="type">WiFiAwareManager</span>: <span class="type">NIWiFiAwareSessionDelegate</span> {
    <span class="comment">// ì„¸ì…˜ì´ ì‹œì‘ë˜ì—ˆì„ ë•Œ</span>
    <span class="kw">func</span> wifiAwareSession(<span class="kw">_</span> session: <span class="type">NIWiFiAwareSession</span>, didStartWith configuration: <span class="type">NIWiFiAwareConfiguration</span>) {
        print(<span class="str">"Wi-Fi Aware ì„¸ì…˜ í™œì„±í™”ë¨"</span>)
    }

    <span class="comment">// ì„¸ì…˜ì´ ì¤‘ì§€ë˜ì—ˆì„ ë•Œ</span>
    <span class="kw">func</span> wifiAwareSession(<span class="kw">_</span> session: <span class="type">NIWiFiAwareSession</span>, didInvalidateWith error: <span class="type">Error</span>) {
        print(<span class="str">"ì„¸ì…˜ ë¬´íš¨í™”: \(error)"</span>)
        isRunning = <span class="kw">false</span>
    }

    <span class="comment">// í”¼ì–´ê°€ ë°œê²¬ë˜ì—ˆì„ ë•Œ</span>
    <span class="kw">func</span> wifiAwareSession(<span class="kw">_</span> session: <span class="type">NIWiFiAwareSession</span>, didDiscover peerToken: <span class="type">NIWiFiAwarePeerToken</span>) {
        <span class="kw">if</span> !discoveredPeers.contains(peerToken) {
            discoveredPeers.append(peerToken)
            print(<span class="str">"ìƒˆ í”¼ì–´ ë°œê²¬: \(peerToken)"</span>)
        }
    }

    <span class="comment">// í”¼ì–´ ì—°ê²°ì´ ëŠì–´ì¡Œì„ ë•Œ</span>
    <span class="kw">func</span> wifiAwareSession(<span class="kw">_</span> session: <span class="type">NIWiFiAwareSession</span>, didLose peerToken: <span class="type">NIWiFiAwarePeerToken</span>) {
        discoveredPeers.removeAll { $0 == peerToken }
        print(<span class="str">"í”¼ì–´ ì—°ê²° ëŠê¹€: \(peerToken)"</span>)
    }
}</pre>
</div>

<h2>ğŸ“¡ 3. ë°ì´í„° ì „ì†¡</h2>
<p>Use the Network framework to exchange data with peers discovered via Wi-Fi Aware.</p>

<div class="code-block">
<div class="code-header">WiFiAwareDataChannel.swift â€” Data Channel</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">Network</span>
<span class="kw">import</span> <span class="type">NearbyInteraction</span>

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">WiFiAwareDataChannel</span> {
    <span class="kw">var</span> connection: <span class="type">NWConnection</span>?
    <span class="kw">var</span> listener: <span class="type">NWListener</span>?
    <span class="kw">var</span> receivedMessages: [<span class="type">String</span>] = []
    <span class="kw">var</span> isConnected = <span class="kw">false</span>

    <span class="comment">// ë°ì´í„° ë¦¬ìŠ¤ë„ˆ ì‹œì‘ (ì„œë²„ ì—­í• )</span>
    <span class="kw">func</span> startListener(peerToken: <span class="type">NIWiFiAwarePeerToken</span>) {
        <span class="kw">let</span> parameters = <span class="type">NWParameters</span>.tcp
        parameters.requiredInterfaceType = .wifi

        <span class="kw">do</span> {
            listener = <span class="kw">try</span> <span class="type">NWListener</span>(using: parameters)

            listener?.newConnectionHandler = { [<span class="kw">weak self</span>] newConnection <span class="kw">in</span>
                <span class="kw">self</span>?.handleNewConnection(newConnection)
            }

            listener?.stateUpdateHandler = { state <span class="kw">in</span>
                <span class="kw">switch</span> state {
                <span class="kw">case</span> .ready:
                    print(<span class="str">"ë¦¬ìŠ¤ë„ˆ ì¤€ë¹„ë¨"</span>)
                <span class="kw">case</span> .failed(<span class="kw">let</span> error):
                    print(<span class="str">"ë¦¬ìŠ¤ë„ˆ ì‹¤íŒ¨: \(error)"</span>)
                <span class="kw">default</span>:
                    <span class="kw">break</span>
                }
            }

            listener?.start(queue: .<span class="type">main</span>)
        } <span class="kw">catch</span> {
            print(<span class="str">"ë¦¬ìŠ¤ë„ˆ ì‹œì‘ ì‹¤íŒ¨: \(error)"</span>)
        }
    }

    <span class="comment">// í”¼ì–´ì— ì—°ê²° (í´ë¼ì´ì–¸íŠ¸ ì—­í• )</span>
    <span class="kw">func</span> connectToPeer(endpoint: <span class="type">NWEndpoint</span>) {
        <span class="kw">let</span> parameters = <span class="type">NWParameters</span>.tcp
        parameters.requiredInterfaceType = .wifi

        connection = <span class="type">NWConnection</span>(to: endpoint, using: parameters)

        connection?.stateUpdateHandler = { [<span class="kw">weak self</span>] state <span class="kw">in</span>
            <span class="kw">switch</span> state {
            <span class="kw">case</span> .ready:
                <span class="kw">self</span>?.isConnected = <span class="kw">true</span>
                print(<span class="str">"í”¼ì–´ ì—°ê²° ì™„ë£Œ"</span>)
                <span class="kw">self</span>?.receiveData()
            <span class="kw">case</span> .failed(<span class="kw">let</span> error):
                <span class="kw">self</span>?.isConnected = <span class="kw">false</span>
                print(<span class="str">"ì—°ê²° ì‹¤íŒ¨: \(error)"</span>)
            <span class="kw">case</span> .cancelled:
                <span class="kw">self</span>?.isConnected = <span class="kw">false</span>
                print(<span class="str">"ì—°ê²° ì·¨ì†Œë¨"</span>)
            <span class="kw">default</span>:
                <span class="kw">break</span>
            }
        }

        connection?.start(queue: .<span class="type">main</span>)
    }

    <span class="comment">// ìƒˆ ì—°ê²° ì²˜ë¦¬</span>
    <span class="kw">private</span> <span class="kw">func</span> handleNewConnection(<span class="kw">_</span> newConnection: <span class="type">NWConnection</span>) {
        connection = newConnection
        isConnected = <span class="kw">true</span>

        connection?.stateUpdateHandler = { [<span class="kw">weak self</span>] state <span class="kw">in</span>
            <span class="kw">if</span> state == .ready {
                <span class="kw">self</span>?.receiveData()
            }
        }

        connection?.start(queue: .<span class="type">main</span>)
    }

    <span class="comment">// ë°ì´í„° ì „ì†¡</span>
    <span class="kw">func</span> sendData(<span class="kw">_</span> message: <span class="type">String</span>) {
        <span class="kw">guard</span> <span class="kw">let</span> data = message.data(using: .utf8) <span class="kw">else</span> { <span class="kw">return</span> }

        connection?.send(
            content: data,
            completion: .contentProcessed { error <span class="kw">in</span>
                <span class="kw">if</span> <span class="kw">let</span> error = error {
                    print(<span class="str">"ì „ì†¡ ì‹¤íŒ¨: \(error)"</span>)
                } <span class="kw">else</span> {
                    print(<span class="str">"ë©”ì‹œì§€ ì „ì†¡ ì™„ë£Œ: \(message)"</span>)
                }
            }
        )
    }

    <span class="comment">// ë°ì´í„° ìˆ˜ì‹ </span>
    <span class="kw">private</span> <span class="kw">func</span> receiveData() {
        connection?.receive(minimumIncompleteLength: <span class="str">1</span>, maximumLength: <span class="str">65536</span>) { [<span class="kw">weak self</span>] data, context, isComplete, error <span class="kw">in</span>
            <span class="kw">if</span> <span class="kw">let</span> data = data, !data.isEmpty {
                <span class="kw">if</span> <span class="kw">let</span> message = <span class="type">String</span>(data: data, encoding: .utf8) {
                    <span class="kw">self</span>?.receivedMessages.append(message)
                    print(<span class="str">"ë©”ì‹œì§€ ìˆ˜ì‹ : \(message)"</span>)
                }
            }

            <span class="kw">if</span> error == <span class="kw">nil</span> {
                <span class="kw">self</span>?.receiveData() <span class="comment">// ê³„ì† ìˆ˜ì‹  ëŒ€ê¸°</span>
            }
        }
    }

    <span class="comment">// ì—°ê²° ì¢…ë£Œ</span>
    <span class="kw">func</span> disconnect() {
        connection?.cancel()
        listener?.cancel()
        connection = <span class="kw">nil</span>
        listener = <span class="kw">nil</span>
        isConnected = <span class="kw">false</span>
    }
}</pre>
</div>

<h2>ğŸ”„ 4. Discovery Token êµí™˜</h2>
<p>Discover peers by exchanging Discovery Tokens via QR code or other methods.</p>

<div class="code-block">
<div class="code-header">TokenExchange.swift â€” Token Exchange</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">CoreImage</span>.filters

<span class="kw">class</span> <span class="type">TokenExchangeHelper</span> {
    <span class="comment">// Tokenì„ QR ì½”ë“œë¡œ ë³€í™˜</span>
    <span class="kw">func</span> generateQRCode(from tokenData: <span class="type">Data</span>) -> <span class="type">UIImage</span>? {
        <span class="kw">let</span> filter = <span class="type">CIFilter</span>.qrCodeGenerator()
        filter.message = tokenData

        <span class="kw">if</span> <span class="kw">let</span> outputImage = filter.outputImage {
            <span class="kw">let</span> transform = <span class="type">CGAffineTransform</span>(scaleX: <span class="str">10</span>, y: <span class="str">10</span>)
            <span class="kw">let</span> scaledImage = outputImage.transformed(by: transform)

            <span class="kw">let</span> context = <span class="type">CIContext</span>()
            <span class="kw">if</span> <span class="kw">let</span> cgImage = context.createCGImage(scaledImage, from: scaledImage.extent) {
                <span class="kw">return</span> <span class="type">UIImage</span>(cgImage: cgImage)
            }
        }

        <span class="kw">return</span> <span class="kw">nil</span>
    }

    <span class="comment">// Base64 ë¬¸ìì—´ë¡œ ë³€í™˜ (ê°„ë‹¨í•œ ê³µìœ )</span>
    <span class="kw">func</span> encodeTokenToString(<span class="kw">_</span> tokenData: <span class="type">Data</span>) -> <span class="type">String</span> {
        <span class="kw">return</span> tokenData.base64EncodedString()
    }

    <span class="comment">// Base64 ë¬¸ìì—´ì„ Token Dataë¡œ ë³€í™˜</span>
    <span class="kw">func</span> decodeTokenFromString(<span class="kw">_</span> string: <span class="type">String</span>) -> <span class="type">Data</span>? {
        <span class="kw">return</span> <span class="type">Data</span>(base64Encoded: string)
    }
}</pre>
</div>

<h2>ğŸ“± 5. SwiftUI Integration</h2>
<p>Integrate Wi-Fi Aware features into a SwiftUI app.</p>

<div class="code-block">
<div class="code-header">WiFiAwareView.swift â€” SwiftUI Integration</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>
<span class="kw">import</span> <span class="type">NearbyInteraction</span>

<span class="kw">struct</span> <span class="type">WiFiAwareView</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> manager = <span class="type">WiFiAwareManager</span>()
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> dataChannel = <span class="type">WiFiAwareDataChannel</span>()
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> tokenHelper = <span class="type">TokenExchangeHelper</span>()

    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> messageToSend = <span class="str">""</span>
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> showQRCode = <span class="kw">false</span>
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> qrCodeImage: <span class="type">UIImage</span>?

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">NavigationStack</span> {
            <span class="type">List</span> {
                <span class="comment">// ì„¸ì…˜ ìƒíƒœ</span>
                <span class="type">Section</span>(<span class="str">"ì„¸ì…˜"</span>) {
                    <span class="type">HStack</span> {
                        <span class="type">Text</span>(<span class="str">"ìƒíƒœ"</span>)
                        <span class="type">Spacer</span>()
                        <span class="type">Text</span>(manager.isRunning ? <span class="str">"í™œì„±"</span> : <span class="str">"ë¹„í™œì„±"</span>)
                            .foregroundStyle(manager.isRunning ? .green : .secondary)
                    }

                    <span class="kw">if</span> manager.isRunning {
                        <span class="type">Button</span>(<span class="str">"ë‚´ QR ì½”ë“œ í‘œì‹œ"</span>) {
                            <span class="kw">if</span> <span class="kw">let</span> tokenData = manager.getDiscoveryTokenData() {
                                qrCodeImage = tokenHelper.generateQRCode(from: tokenData)
                                showQRCode = <span class="kw">true</span>
                            }
                        }
                    }

                    <span class="type">Button</span>(manager.isRunning ? <span class="str">"ì„¸ì…˜ ì¤‘ì§€"</span> : <span class="str">"ì„¸ì…˜ ì‹œì‘"</span>) {
                        <span class="kw">if</span> manager.isRunning {
                            manager.stopSession()
                            dataChannel.disconnect()
                        } <span class="kw">else</span> {
                            manager.startSession()
                        }
                    }
                    .foregroundStyle(manager.isRunning ? .red : .blue)
                }

                <span class="comment">// ë°œê²¬ëœ í”¼ì–´</span>
                <span class="type">Section</span>(<span class="str">"ë°œê²¬ëœ ê¸°ê¸° (\(manager.discoveredPeers.count))"</span>) {
                    <span class="kw">if</span> manager.discoveredPeers.isEmpty {
                        <span class="type">Text</span>(<span class="str">"ì£¼ë³€ì— ê¸°ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤"</span>)
                            .foregroundStyle(.secondary)
                    } <span class="kw">else</span> {
                        <span class="type">ForEach</span>(manager.discoveredPeers.indices, id: \.<span class="kw">self</span>) { index <span class="kw">in</span>
                            <span class="type">HStack</span> {
                                <span class="type">Image</span>(systemName: <span class="str">"wifi"</span>)
                                    .foregroundStyle(.blue)
                                <span class="type">Text</span>(<span class="str">"ê¸°ê¸° \(index + 1)"</span>)

                                <span class="type">Spacer</span>()

                                <span class="kw">if</span> dataChannel.isConnected {
                                    <span class="type">Image</span>(systemName: <span class="str">"checkmark.circle.fill"</span>)
                                        .foregroundStyle(.green)
                                }
                            }
                        }
                    }
                }

                <span class="comment">// ë©”ì‹œì§€ ì „ì†¡</span>
                <span class="kw">if</span> dataChannel.isConnected {
                    <span class="type">Section</span>(<span class="str">"ë©”ì‹œì§€ ì „ì†¡"</span>) {
                        <span class="type">TextField</span>(<span class="str">"ë©”ì‹œì§€ ì…ë ¥"</span>, text: $messageToSend)

                        <span class="type">Button</span>(<span class="str">"ì „ì†¡"</span>) {
                            dataChannel.sendData(messageToSend)
                            messageToSend = <span class="str">""</span>
                        }
                        .disabled(messageToSend.isEmpty)
                    }
                }

                <span class="comment">// ìˆ˜ì‹  ë©”ì‹œì§€</span>
                <span class="type">Section</span>(<span class="str">"ìˆ˜ì‹  ë©”ì‹œì§€"</span>) {
                    <span class="kw">if</span> dataChannel.receivedMessages.isEmpty {
                        <span class="type">Text</span>(<span class="str">"ìˆ˜ì‹ ëœ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤"</span>)
                            .foregroundStyle(.secondary)
                    } <span class="kw">else</span> {
                        <span class="type">ForEach</span>(dataChannel.receivedMessages, id: \.<span class="kw">self</span>) { message <span class="kw">in</span>
                            <span class="type">Text</span>(message)
                        }
                    }
                }
            }
            .navigationTitle(<span class="str">"Wi-Fi Aware"</span>)
            .sheet(isPresented: $showQRCode) {
                <span class="type">QRCodeView</span>(qrCodeImage: qrCodeImage)
            }
        }
    }
}

<span class="kw">struct</span> <span class="type">QRCodeView</span>: <span class="type">View</span> {
    <span class="kw">let</span> qrCodeImage: <span class="type">UIImage</span>?
    <span class="kw">@Environment</span>(\.<span class="kw">dismiss</span>) <span class="kw">var</span> dismiss

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">NavigationStack</span> {
            <span class="type">VStack</span>(spacing: <span class="str">20</span>) {
                <span class="type">Text</span>(<span class="str">"ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ ì´ QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì„¸ìš”"</span>)
                    .font(.headline)

                <span class="kw">if</span> <span class="kw">let</span> image = qrCodeImage {
                    <span class="type">Image</span>(uiImage: image)
                        .interpolation(.none)
                        .resizable()
                        .scaledToFit()
                        .frame(width: <span class="str">300</span>, height: <span class="str">300</span>)
                        .padding()
                        .background(<span class="type">Color</span>.white)
                        .cornerRadius(<span class="str">12</span>)
                        .shadow(radius: <span class="str">4</span>)
                } <span class="kw">else</span> {
                    <span class="type">Text</span>(<span class="str">"QR ì½”ë“œ ìƒì„± ì‹¤íŒ¨"</span>)
                        .foregroundStyle(.secondary)
                }
            }
            .padding()
            .navigationTitle(<span class="str">"ë‚´ QR ì½”ë“œ"</span>)
            .navigationBarTitleDisplayMode(.inline)
            .toolbar {
                <span class="type">ToolbarItem</span>(placement: .confirmationAction) {
                    <span class="type">Button</span>(<span class="str">"ì™„ë£Œ"</span>) {
                        dismiss()
                    }
                }
            }
        }
    }
}</pre>
</div>

<h2>ğŸ® 6. Practical Example â€” Multiplayer Game</h2>
<p>A simple multiplayer game example using Wi-Fi Aware.</p>

<div class="code-block">
<div class="code-header">WiFiAwareGameView.swift â€” Multiplayer Game</div>
<pre class="code-body"><span class="kw">import</span> <span class="type">SwiftUI</span>

<span class="kw">struct</span> <span class="type">GameMessage</span>: <span class="type">Codable</span> {
    <span class="kw">enum</span> <span class="type">Action</span>: <span class="type">String</span>, <span class="type">Codable</span> {
        <span class="kw">case</span> move, attack, heal
    }

    <span class="kw">let</span> playerName: <span class="type">String</span>
    <span class="kw">let</span> action: <span class="type">Action</span>
    <span class="kw">let</span> position: <span class="type">CGPoint</span>?
    <span class="kw">let</span> timestamp: <span class="type">Date</span>
}

<span class="kw">@Observable</span>
<span class="kw">class</span> <span class="type">GameController</span> {
    <span class="kw">let</span> wifiManager = <span class="type">WiFiAwareManager</span>()
    <span class="kw">let</span> dataChannel = <span class="type">WiFiAwareDataChannel</span>()

    <span class="kw">var</span> playerName = <span class="str">"Player"</span>
    <span class="kw">var</span> playerPosition: <span class="type">CGPoint</span> = .zero
    <span class="kw">var</span> opponentPosition: <span class="type">CGPoint</span> = .zero
    <span class="kw">var</span> gameLog: [<span class="type">String</span>] = []

    <span class="kw">func</span> startGame() {
        wifiManager.startSession()
    }

    <span class="kw">func</span> sendAction(action: <span class="type">GameMessage</span>.<span class="type">Action</span>, position: <span class="type">CGPoint</span>? = <span class="kw">nil</span>) {
        <span class="kw">let</span> message = <span class="type">GameMessage</span>(
            playerName: playerName,
            action: action,
            position: position,
            timestamp: <span class="type">Date</span>()
        )

        <span class="kw">if</span> <span class="kw">let</span> data = <span class="kw">try</span>? <span class="type">JSONEncoder</span>().encode(message),
           <span class="kw">let</span> string = <span class="type">String</span>(data: data, encoding: .utf8) {
            dataChannel.sendData(string)
            gameLog.append(<span class="str">"\(playerName): \(action.rawValue)"</span>)
        }
    }

    <span class="kw">func</span> processReceivedMessage(<span class="kw">_</span> messageString: <span class="type">String</span>) {
        <span class="kw">guard</span> <span class="kw">let</span> data = messageString.data(using: .utf8),
              <span class="kw">let</span> message = <span class="kw">try</span>? <span class="type">JSONDecoder</span>().decode(<span class="type">GameMessage</span>.<span class="kw">self</span>, from: data) <span class="kw">else</span> {
            <span class="kw">return</span>
        }

        <span class="kw">if</span> <span class="kw">let</span> position = message.position {
            opponentPosition = position
        }

        gameLog.append(<span class="str">"\(message.playerName): \(message.action.rawValue)"</span>)
    }
}

<span class="kw">struct</span> <span class="type">WiFiAwareGameView</span>: <span class="type">View</span> {
    <span class="kw">@State</span> <span class="kw">private</span> <span class="kw">var</span> controller = <span class="type">GameController</span>()

    <span class="kw">var</span> body: <span class="kw">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="comment">// ê²Œì„ í™”ë©´</span>
            <span class="type">ZStack</span> {
                <span class="type">Color</span>.gray.opacity(<span class="str">0.2</span>)

                <span class="comment">// ë‚´ ìºë¦­í„°</span>
                <span class="type">Circle</span>()
                    .fill(<span class="type">Color</span>.blue)
                    .frame(width: <span class="str">40</span>, height: <span class="str">40</span>)
                    .position(controller.playerPosition)

                <span class="comment">// ìƒëŒ€ ìºë¦­í„°</span>
                <span class="type">Circle</span>()
                    .fill(<span class="type">Color</span>.red)
                    .frame(width: <span class="str">40</span>, height: <span class="str">40</span>)
                    .position(controller.opponentPosition)
            }
            .frame(height: <span class="str">300</span>)
            .gesture(
                <span class="type">DragGesture</span>()
                    .onChanged { value <span class="kw">in</span>
                        controller.playerPosition = value.location
                        controller.sendAction(action: .move, position: value.location)
                    }
            )

            <span class="comment">// ì•¡ì…˜ ë²„íŠ¼</span>
            <span class="type">HStack</span>(spacing: <span class="str">20</span>) {
                <span class="type">Button</span>(<span class="str">"ê³µê²©"</span>) {
                    controller.sendAction(action: .attack)
                }
                .buttonStyle(.borderedProminent)
                .tint(.red)

                <span class="type">Button</span>(<span class="str">"í"</span>) {
                    controller.sendAction(action: .heal)
                }
                .buttonStyle(.borderedProminent)
                .tint(.green)
            }
            .padding()

            <span class="comment">// ê²Œì„ ë¡œê·¸</span>
            <span class="type">List</span>(controller.gameLog, id: \.<span class="kw">self</span>) { log <span class="kw">in</span>
                <span class="type">Text</span>(log)
                    .font(.caption)
            }
            .frame(height: <span class="str">150</span>)
        }
        .onAppear {
            controller.startGame()
        }
    }
}</pre>
</div>

<h2>ğŸ’¡ HIG Guidelines</h2>

<ul>
<li><strong>ê¶Œí•œ ì„¤ëª…:</strong> Wi-Fi ì‚¬ìš© ëª©ì ì„ ëª…í™•íˆ ì„¤ëª…</li>
<li><strong>Battery Efficiency:</strong> í•„ìš”í•  ë•Œë§Œ ì„¸ì…˜ í™œì„±í™”</li>
<li><strong>ì—°ê²° ìƒíƒœ í‘œì‹œ:</strong> ì‚¬ìš©ìì—ê²Œ ì—°ê²° ìƒíƒœë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œ</li>
<li><strong>Error Handling:</strong> Wi-Fi ë¹„í™œì„±í™” ë“± ì˜¤ë¥˜ ìƒí™© ëŒ€ë¹„</li>
<li><strong>ë°±ê·¸ë¼ìš´ë“œ Supported:</strong> ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œ ì„¤ì • ì‹œ ì—°ì† ë°œê²¬ ê°€ëŠ¥</li>
</ul>

<h2>ğŸ¯ Practical Usage</h2>

<ul>
<li><strong>Multiplayer Games:</strong> ê·¼ê±°ë¦¬ ì‹¤ì‹œê°„ ê²Œì„</li>
<li><strong>File Sharing:</strong> AirDrop ëŒ€ì•ˆ, í° íŒŒì¼ ë¹ ë¥´ê²Œ ì „ì†¡</li>
<li><strong>í˜‘ì—… ë„êµ¬:</strong> ê³µë™ í¸ì§‘, í™”ì´íŠ¸ë³´ë“œ</li>
<li><strong>IoT ê¸°ê¸° ì œì–´:</strong> ìŠ¤ë§ˆíŠ¸ í™ˆ, ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘</li>
<li><strong>ì˜¤í”„ë¼ì¸ ë©”ì‹œì§•:</strong> ì¸í„°ë„· ì—†ì´ ë©”ì‹œì§€ êµí™˜</li>
</ul>

<h2>ğŸ“š Learn More</h2>

<ul>
<li><a href="https://developer.apple.com/documentation/nearbyinteraction">NearbyInteraction ê³µì‹ ë¬¸ì„œ</a></li>
<li><a href="https://developer.apple.com/documentation/network">Network í”„ë ˆì„ì›Œí¬</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2024/">WWDC 2024: Wi-Fi Aware</a></li>
</ul>

<div class="info-box">
<strong>âš¡ï¸ Performance Tips:</strong> Wi-Fi Aware provides faster data transfer speeds than Bluetooth. It's ideal for large file transfers and real-time streaming, with efficient power consumption. Note that it requires iOS 18+, so consider MultipeerConnectivity if you need earlier version support.
</div>

<div style="margin-top:48px;padding:24px;background:linear-gradient(135deg,#f5f5f7,#e8e8ed);border-radius:16px;">
  <h2 style="font-size:20px;margin-bottom:12px;">ğŸ“ Apple Official Resources</h2>
  <div style="display:flex;flex-wrap:wrap;gap:12px;">
    <a href="https://developer.apple.com/documentation/wifiaware" target="_blank" style="display:inline-flex;align-items:center;gap:6px;padding:10px 16px;background:white;border-radius:10px;text-decoration:none;color:var(--accent);font-weight:600;font-size:14px;border:1px solid var(--border);transition:all .2s;">ğŸ“˜ Documentation</a>
    <a href="https://developer.apple.com/videos/all-videos/?q=Wi-Fi+Aware" target="_blank" style="display:inline-flex;align-items:center;gap:6px;padding:10px 16px;background:white;border-radius:10px;text-decoration:none;color:var(--accent);font-weight:600;font-size:14px;border:1px solid var(--border);transition:all .2s;">ğŸ¬ WWDC Sessions</a>
  </div>
</div>
</article>
</body></html>