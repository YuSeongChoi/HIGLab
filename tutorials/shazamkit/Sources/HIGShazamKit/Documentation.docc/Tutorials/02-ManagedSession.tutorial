@Tutorial(time: 18) {
    @Intro(title: "SHManagedSession ì„¤ì •") {
        iOS 17ì—ì„œ ì¶”ê°€ëœ SHManagedSessionì„ ì‚¬ìš©í•´
        ê°„í¸í•˜ê²Œ ìŒì•… ì¸ì‹ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
        
        ë§ˆì´í¬ ê¶Œí•œ ì²˜ë¦¬ì™€ ì„¸ì…˜ ìƒíƒœ ê´€ë¦¬ë¥¼ ë°°ì›ë‹ˆë‹¤.
    }
    
    @Section(title: "SHManagedSession ì´í•´í•˜ê¸°") {
        @ContentAndMedia {
            SHManagedSessionì€ iOS 17ì—ì„œ ì¶”ê°€ëœ **ì˜¬ì¸ì› ì†”ë£¨ì…˜**ì…ë‹ˆë‹¤.
            
            ê¸°ì¡´ì—ëŠ” AVAudioEngineìœ¼ë¡œ ë§ˆì´í¬ ì…ë ¥ì„ ë°›ê³ ,
            SHSignatureGeneratorë¡œ ì‹œê·¸ë‹ˆì²˜ë¥¼ ë§Œë“¤ê³ ,
            SHSessionì— ì „ë‹¬í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.
            
            SHManagedSessionì€ ì´ ëª¨ë“  ê²ƒì„ **ìë™ìœ¼ë¡œ** ì²˜ë¦¬í•©ë‹ˆë‹¤.
        }
        
        @Steps {
            @Step {
                SHManagedSessionì˜ í•µì‹¬ íŠ¹ì§•ì„ ì‚´í´ë´…ë‹ˆë‹¤.
                
                - ë§ˆì´í¬ ì ‘ê·¼ ìë™ ê´€ë¦¬
                - ì‹œê·¸ë‹ˆì²˜ ìƒì„± ìë™í™”
                - ìƒíƒœ ê¸°ë°˜ ì œì–´ (prepare, result, cancel)
                - Swift Concurrency ì™„ë²½ ì§€ì›
                
                @Code(name: "ManagedSessionIntro.swift", file: "02-intro.swift")
            }
            
            @Step {
                **SHSession vs SHManagedSession** ë¹„êµ
                
                SHSessionì€ ì„¸ë°€í•œ ì œì–´ê°€ í•„ìš”í•  ë•Œ,
                SHManagedSessionì€ ë¹ ë¥¸ êµ¬í˜„ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
                
                @Code(name: "SessionComparison.swift", file: "02-comparison.swift")
            }
        }
    }
    
    @Section(title: "MusicRecognizer í´ë˜ìŠ¤ êµ¬í˜„") {
        @ContentAndMedia {
            SHManagedSessionì„ í™œìš©í•œ ìŒì•… ì¸ì‹ ë§¤ë‹ˆì €ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
            @Observable ë§¤í¬ë¡œë¥¼ ì‚¬ìš©í•´ SwiftUIì™€ ì—°ë™í•©ë‹ˆë‹¤.
        }
        
        @Steps {
            @Step {
                **MusicRecognizer ê¸°ë³¸ êµ¬ì¡°**
                
                @Observableì„ ì‚¬ìš©í•´ ìƒíƒœ ë³€ê²½ì„ UIì— ìë™ ë°˜ì˜í•©ë‹ˆë‹¤.
                SHManagedSession ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
                
                @Code(name: "MusicRecognizer.swift", file: "02-recognizer-basic.swift")
            }
            
            @Step {
                **ì¸ì‹ ìƒíƒœ enum ì •ì˜**
                
                ìŒì•… ì¸ì‹ì˜ ë‹¤ì–‘í•œ ìƒíƒœë¥¼ í‘œí˜„í•˜ëŠ” enumì„ ë§Œë“­ë‹ˆë‹¤.
                UIì—ì„œ ê° ìƒíƒœì— ë§ëŠ” í™”ë©´ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                
                @Code(name: "RecognitionState.swift", file: "02-state-enum.swift")
            }
            
            @Step {
                **startRecognition() êµ¬í˜„**
                
                `session.result()` ë©”ì„œë“œë¡œ ì¸ì‹ì„ ì‹œì‘í•©ë‹ˆë‹¤.
                async/awaitë¡œ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
                
                @Code(name: "StartRecognition.swift", file: "02-start-recognition.swift")
            }
            
            @Step {
                **cancelRecognition() êµ¬í˜„**
                
                `session.cancel()` ë©”ì„œë“œë¡œ ì§„í–‰ ì¤‘ì¸ ì¸ì‹ì„ ì·¨ì†Œí•©ë‹ˆë‹¤.
                ì‚¬ìš©ìê°€ ì¤‘ë‹¨ ë²„íŠ¼ì„ ëˆ„ë¥´ê±°ë‚˜ í™”ë©´ì„ ë²—ì–´ë‚  ë•Œ í˜¸ì¶œí•©ë‹ˆë‹¤.
                
                @Code(name: "CancelRecognition.swift", file: "02-cancel-recognition.swift")
            }
        }
    }
    
    @Section(title: "ë§ˆì´í¬ ê¶Œí•œ ì²˜ë¦¬") {
        @ContentAndMedia {
            ìŒì•… ì¸ì‹ì„ ìœ„í•´ì„œëŠ” ë§ˆì´í¬ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.
            ì‚¬ìš©ì ê²½í—˜ì„ ê³ ë ¤í•œ ê¶Œí•œ ìš”ì²­ í”Œë¡œìš°ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
        }
        
        @Steps {
            @Step {
                **AVAudioApplicationìœ¼ë¡œ ê¶Œí•œ í™•ì¸**
                
                iOS 17+ì—ì„œëŠ” AVAudioApplicationì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                í˜„ì¬ ê¶Œí•œ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì ì ˆíˆ ëŒ€ì‘í•©ë‹ˆë‹¤.
                
                @Code(name: "PermissionCheck.swift", file: "02-permission-check.swift")
            }
            
            @Step {
                **ê¶Œí•œ ìš”ì²­ í”Œë¡œìš°**
                
                ê¶Œí•œì´ ì—†ìœ¼ë©´ ìš”ì²­í•˜ê³ , ê±°ë¶€ë˜ë©´ ì„¤ì • ì•±ìœ¼ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤.
                ì‚¬ìš©ìê°€ ì™œ ë§ˆì´í¬ê°€ í•„ìš”í•œì§€ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì„¤ëª…í•©ë‹ˆë‹¤.
                
                @Code(name: "PermissionFlow.swift", file: "02-permission-flow.swift")
            }
            
            @Step {
                **ì„¤ì • ì•±ìœ¼ë¡œ ì´ë™**
                
                ê¶Œí•œì´ ê±°ë¶€ëœ ê²½ìš° ì„¤ì • ì•±ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë²„íŠ¼ì„ ì œê³µí•©ë‹ˆë‹¤.
                UIApplication.openSettingsURLStringì„ í™œìš©í•©ë‹ˆë‹¤.
                
                @Code(name: "OpenSettings.swift", file: "02-open-settings.swift")
            }
        }
    }
    
    @Section(title: "ì„¸ì…˜ ìƒíƒœ ëª¨ë‹ˆí„°ë§") {
        @ContentAndMedia {
            SHManagedSessionì˜ ìƒíƒœ ë³€í™”ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ 
            ì ì ˆí•œ UI í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤.
        }
        
        @Steps {
            @Step {
                **SHManagedSession.State ì´í•´í•˜ê¸°**
                
                - `.idle`: ëŒ€ê¸° ìƒíƒœ
                - `.prerecording`: ë…¹ìŒ ì¤€ë¹„ ì¤‘
                - `.matching`: ë§¤ì¹­ ì§„í–‰ ì¤‘
                
                @Code(name: "SessionState.swift", file: "02-session-state.swift")
            }
            
            @Step {
                **ìƒíƒœ ë³€í™” observe**
                
                AsyncStreamìœ¼ë¡œ ìƒíƒœ ë³€í™”ë¥¼ ê´€ì°°í•©ë‹ˆë‹¤.
                Taskë¡œ ê°ì‹¸ì„œ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
                
                @Code(name: "StateObserve.swift", file: "02-state-observe.swift")
            }
            
            @Step {
                **ì „ì²´ MusicRecognizer ì™„ì„±**
                
                ì§€ê¸ˆê¹Œì§€ êµ¬í˜„í•œ ê¸°ëŠ¥ì„ í†µí•©í•©ë‹ˆë‹¤.
                ê¶Œí•œ ì²˜ë¦¬, ì¸ì‹ ì‹œì‘/ì·¨ì†Œ, ìƒíƒœ ê´€ë¦¬ê°€ ëª¨ë‘ í¬í•¨ë©ë‹ˆë‹¤.
                
                @Code(name: "MusicRecognizerFull.swift", file: "02-recognizer-full.swift")
            }
        }
    }
    
    @Assessments {
        @MultipleChoice {
            SHManagedSessionì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ” ê²ƒì€?
            
            @Choice(isCorrect: false) {
                ë§ˆì´í¬ ì˜¤ë””ì˜¤ ì…ë ¥
                
                @Justification(reaction: "ì´ê±´ ìë™ ì²˜ë¦¬ë©ë‹ˆë‹¤") {
                    SHManagedSessionì€ ë§ˆì´í¬ ì˜¤ë””ì˜¤ ì…ë ¥ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
                }
            }
            
            @Choice(isCorrect: false) {
                ì˜¤ë””ì˜¤ ì‹œê·¸ë‹ˆì²˜ ìƒì„±
                
                @Justification(reaction: "ì´ê±´ ìë™ ì²˜ë¦¬ë©ë‹ˆë‹¤") {
                    SHManagedSessionì€ ì‹œê·¸ë‹ˆì²˜ ìƒì„±ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
                }
            }
            
            @Choice(isCorrect: true) {
                ë§ˆì´í¬ ê¶Œí•œ ìš”ì²­ UI
                
                @Justification(reaction: "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰") {
                    ë§ìŠµë‹ˆë‹¤! ë§ˆì´í¬ ê¶Œí•œ ìš”ì²­ì€ ê°œë°œìê°€ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.
                    AVAudioApplication.requestRecordPermission()ì„ ì‚¬ìš©í•˜ì„¸ìš”.
                }
            }
        }
        
        @MultipleChoice {
            SHManagedSessionì˜ ìƒíƒœê°€ ì•„ë‹Œ ê²ƒì€?
            
            @Choice(isCorrect: false) {
                .idle
                
                @Justification(reaction: "ì´ê±´ ìœ íš¨í•œ ìƒíƒœì…ë‹ˆë‹¤") {
                    .idleì€ ì„¸ì…˜ì´ ëŒ€ê¸° ì¤‘ì¸ ìƒíƒœì…ë‹ˆë‹¤.
                }
            }
            
            @Choice(isCorrect: false) {
                .matching
                
                @Justification(reaction: "ì´ê±´ ìœ íš¨í•œ ìƒíƒœì…ë‹ˆë‹¤") {
                    .matchingì€ ë§¤ì¹­ì´ ì§„í–‰ ì¤‘ì¸ ìƒíƒœì…ë‹ˆë‹¤.
                }
            }
            
            @Choice(isCorrect: true) {
                .completed
                
                @Justification(reaction: "ì •ë‹µ! ğŸ‰") {
                    .completedëŠ” SHManagedSession.Stateì— ì—†ìŠµë‹ˆë‹¤.
                    ë§¤ì¹­ ì™„ë£ŒëŠ” result() ë©”ì„œë“œì˜ ë°˜í™˜ê°’ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.
                }
            }
        }
        
        @MultipleChoice {
            SHManagedSessionì—ì„œ ìŒì•… ì¸ì‹ì„ ì‹œì‘í•˜ëŠ” ë©”ì„œë“œëŠ”?
            
            @Choice(isCorrect: true) {
                result()
                
                @Justification(reaction: "ì •í™•í•©ë‹ˆë‹¤! ğŸ‰") {
                    result()ë¥¼ í˜¸ì¶œí•˜ë©´ ì¸ì‹ì´ ì‹œì‘ë˜ê³ ,
                    asyncë¡œ SHSession.Resultë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
                }
            }
            
            @Choice(isCorrect: false) {
                start()
                
                @Justification(reaction: "ì•„ì‰½ë„¤ìš” ğŸ˜…") {
                    SHManagedSessionì—ëŠ” start() ë©”ì„œë“œê°€ ì—†ìŠµë‹ˆë‹¤.
                    result()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
                }
            }
            
            @Choice(isCorrect: false) {
                match()
                
                @Justification(reaction: "ì•„ì‰½ë„¤ìš” ğŸ˜…") {
                    match() ë©”ì„œë“œëŠ” SHSessionì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
                    SHManagedSessionì€ result()ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
                }
            }
        }
    }
}
