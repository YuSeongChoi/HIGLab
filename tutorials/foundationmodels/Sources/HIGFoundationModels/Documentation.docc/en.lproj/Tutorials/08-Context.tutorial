@Tutorial(time: 20) {
    @Intro(title: "Context Management") {
        Effectively manage and optimize context considering token limits.
    }
    
    @Section(title: "Understanding Context Windows") {
        @ContentAndMedia {
            On-device models have limited context windows. 
            In long conversations, old messages need to be managed appropriately.
        }
        
        @Steps {
            @Step {
                How to monitor and manage context size.
                @Code(name: "ContextWindow.swift", file: "08-context-window.swift")
            }
        }
    }
    
    @Section(title: "Context Optimization Strategies") {
        @ContentAndMedia {
            You can optimize context with various strategies such as summarization, compression, and selective retention.
        }
        
        @Steps {
            @Step {
                Efficiently manage context through conversation summarization.
                @Code(name: "ContextOptimization.swift", file: "08-context-optimization.swift")
            }
        }
    }
    
    @Assessments {
        @MultipleChoice {
            What is the best strategy when the context window is full?
            
            @Choice(isCorrect: false) {
                Ask the user to start a new conversation
                @Justification(reaction: "Think again.") {
                    This degrades user experience. There are better methods.
                }
            }
            
            @Choice(isCorrect: true) {
                Summarize old messages or keep only the most relevant parts
                @Justification(reaction: "Correct!") {
                    Through summarization or selective retention, you can preserve important context while freeing up space.
                }
            }
            
            @Choice(isCorrect: false) {
                Keep all messages as they are
                @Justification(reaction: "Think again.") {
                    Exceeding the context window will cause errors.
                }
            }
        }
        
        @MultipleChoice {
            How should you optimize when the system prompt is long?
            
            @Choice(isCorrect: true) {
                Include only core instructions and minimize examples
                @Justification(reaction: "Correct!") {
                    A concise system prompt leaves more space for user conversations.
                }
            }
            
            @Choice(isCorrect: false) {
                Remove the system prompt entirely
                @Justification(reaction: "Think again.") {
                    The system prompt plays an important role in defining model behavior.
                }
            }
            
            @Choice(isCorrect: false) {
                Include instructions for all possible situations
                @Justification(reaction: "Think again.") {
                    An overly long system prompt wastes context space.
                }
            }
        }
    }
}
